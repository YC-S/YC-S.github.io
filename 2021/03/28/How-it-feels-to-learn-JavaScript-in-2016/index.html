<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    How it feels to learn JavaScript in 2016 |  Aaron&#39;s Blog
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">
  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

</head>

</html>

<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-How-it-feels-to-learn-JavaScript-in-2016"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  How it feels to learn JavaScript in 2016
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/03/28/How-it-feels-to-learn-JavaScript-in-2016/" class="article-date">
  <time datetime="2021-03-28T06:43:20.000Z" itemprop="datePublished">2021-03-28</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">3k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">18 min</span>
        </span>
    </span>
</div>
 
    </div>
      



  
    <div class="article-entry" itemprop="articleBody">
       
  <p>Hey, I got this new web project, but to be honest I haven’t coded much web in a few years and I’ve heard the landscape changed a bit. You are the most up-to date web dev around here right?</p>
<p><em>-The actual term is Front End engineer, but yeah, I’m the right guy. I do web in 2016. Visualisations, music players, flying drones that play football, you name it. I just came back from JsConf and ReactConf, so I know the latest technologies to create web apps.</em></p>
<p>Cool. I need to create a page that displays the latest activity from the users, so I just need to get the data from the REST endpoint and display it in some sort of filterable table, and update it if anything changes in the server. I was thinking maybe using jQuery to fetch and display the data?</p>
<p><em>-Oh my god no, no one uses jQuery anymore. You should try learning React, it’s 2016.</em></p>
<p>Oh, OK. What’s React?</p>
<p><em>-It’s a super cool library made by some guys at Facebook, it really brings control and performance to your application, by allowing you to handle any view changes very easily.</em></p>
<p>That sounds neat. Can I use React to display data from the server?</p>
<p><em>-Yeah, but first you need to add React and React DOM as a library in your webpage.</em></p>
<p>Wait, why two libraries?</p>
<p><em>-So one is the actual library and the second one is for manipulating the DOM, which now you can describe in JSX.</em></p>
<p>JSX? What is JSX?</p>
<p><em>-JSX is just a JavaScript syntax extension that looks pretty much like XML. It’s kind of another way to describe the DOM, think of it as a better HTML.</em></p>
<p>What’s wrong with HTML?</p>
<p><em>-It’s 2016. No one codes HTML directly anymore.</em></p>
<p>Right. Anyway, if I add these two libraries then I can use React?</p>
<p><em>-Not quite. You need to add Babel, and then you are able to use React.</em></p>
<p>Another library? What’s Babel?</p>
<p><em>-Oh, Babel is a transpiler that allows you to target specific versions of JavaScript, while you code in any version of JavaScript. You don’t HAVE to include Babel to use ReactJS, but unless you do, you are stuck with using ES5, and let’s be real, it’s 2016, you should be coding in ES2016+ like the rest of the cool kids do.</em></p>
<p>ES5? ES2016+? I’m getting lost over here. What’s ES5 and ES2016+?</p>
<p><em>-ES5 stands for ECMAScript 5. It’s the edition that has most people target since it has been implemented by most browsers nowadays.</em></p>
<p>ECMAScript?</p>
<p><em>-Yes, you know, the scripting standard JavaScript was based on in 1999 after its initial release in 1995, back then when JavaScript was named Livescript and only ran in the Netscape Navigator. That was very messy back then, but thankfully now things are very clear and we have, like, 7 editions of this implementation.</em></p>
<p>7 editions. For real. And ES5 and ES2016+ are?</p>
<p><em>-The fifth and seventh edition respectively.</em></p>
<p>Wait, what happened with the sixth?</p>
<p><em>-You mean ES6? Yeah, I mean, each edition is a superset of the previous one, so if you are using ES2016+, you are using all the features of the previous versions.</em></p>
<p>Right. And why use ES2016+ over ES6 then?</p>
<p><em>-Well, you COULD use ES6, but to use cool features like async and await, you need to use ES2016+. Otherwise you are stuck with ES6 generators with coroutines to block asynchronous calls for proper control flow.</em></p>
<p>I have no idea what you just said, and all these names are confusing. Look, I’m just loading a bunch of data from a server, I used to be able to just include jQuery from a CDN and just get the data with AJAX calls, why can’t I just do that?</p>
<p><em>-It’s 2016 man, no one uses jQuery anymore, it ends up in a bunch of spaghetti code. Everyone knows that.</em></p>
<p>Right. So my alternative is to load three libraries to fetch data and display a HTML table.</p>
<p><em>-Well, you include those three libraries but bundle them up with a module manager to load only one file.</em></p>
<p>I see. And what’s a module manager?</p>
<p><em>-The definition depends on the environment, but in the web we usually mean anything that supports AMD or CommonJS modules.</em></p>
<p>Riiight. And AMD and CommonJS are…?</p>
<p><em>-Definitions. There are ways to describe how multiple JavaScript libraries and classes should interact. You know, exports and requires? You can write multiple JavaScript files defining the AMD or CommonJS API and you can use something like Browserify to bundle them up.</em></p>
<p>OK, that makes sense… I think. What is Browserify?</p>
<p><em>-It’s a tool that allows you to bundle CommonJS described dependencies to files that can be run in the browser. It was created because most people publish those dependencies in the npm registry.</em></p>
<p>npm registry?</p>
<p><em>-It’s a very big public repository where smart people put code and dependencies as modules.</em></p>
<p>Like a CDN?</p>
<p><em>-Not really. It’s more like a centralised database where anyone can publish and download libraries, so you can use them locally for development and then upload them to a CDN if you want to.</em></p>
<p>Oh, like Bower!</p>
<p><em>-Yes, but it’s 2016 now, no one uses Bower anymore.</em></p>
<p>Oh, I see… so I need to download the libraries from npm then?</p>
<p><em>-Yes. So for instance, if you want to use React , you download the React module and import it in your code. You can do that for almost every popular JavaScript library.</em></p>
<p>Oh, like Angular!</p>
<p><em>-Angular is so 2015. But yes. Angular would be there, alongside VueJS or RxJS and other cool 2016 libraries. Want to learn about those?</em></p>
<p>Let’s stick with React, I’m already learning too many things now. So, if I need to use React I fetch it from this npm and then use this Browserify thing?</p>
<p><em>-Yes.</em></p>
<p>That seems overly complicated to just grab a bunch of dependencies and tie them together.</p>
<p><em>-It is, that’s why you use a task manager like Grunt or Gulp or Broccoli to automate running Browserify. Heck, you can even use Mimosa.</em></p>
<p>Grunt? Gulp? Broccoli? Mimosa? The heck are we talking about now?</p>
<p><em>-Task managers. But they are not cool anymore. We used them in like, 2015, then we used Makefiles, but now we wrap everything with Webpack.</em></p>
<p>Makefiles? I thought that was mostly used on C or C++ projects.</p>
<p><em>-Yeah, but apparently in the web we love making things complicated and then going back to the basics. We do that every year or so, just wait for it, we are going to do assembly in the web in a year or two.</em></p>
<p>Sigh. You mentioned something called Webpack?</p>
<p><em>-It’s another module manager for the browser while being kind of a task runner as well. It’s like a better version of Browserify.</em></p>
<p>Oh, Ok. Why is it better?</p>
<p><em>-Well, maybe not better, it’s just more opinionated on how your dependencies should be tied. Webpack allows you to use different module managers, and not only CommonJS ones, so for instance native ES6 supported modules.</em></p>
<p>I’m extremely confused by this whole CommonJS/ES6 thing.</p>
<p><em>-Everyone is, but you shouldn’t care anymore with SystemJS.</em></p>
<p>Jesus christ, another noun-js. Ok, and what is this SystemJS?</p>
<p><em>-Well, unlike Browserify and Webpack 1.x, SystemJS is a dynamic module loader that allows you to tie multiple modules in multiple files instead of bundling them in one big file.</em></p>
<p>Wait, but I thought we wanted to build our libraries in one big file and load that!</p>
<p><em>-Yes, but because HTTP/2 is coming now multiple HTTP requests are actually better.</em></p>
<p>Wait, so can’t we just add the three original libraries for React??</p>
<p><em>-Not really. I mean, you could add them as external scripts from a CDN, but you would still need to include Babel then.</em></p>
<p>Sigh. And that is bad right?</p>
<p><em>-Yes, you would be including the entire babel-core, and it wouldn’t be efficient for production. On production you need to perform a series of pre-tasks to get your project ready that make the ritual to summon Satan look like a boiled eggs recipe. You need to minify assets, uglify them, inline css above the fold, defer scripts, as well as-</em></p>
<p>I got it, I got it. So if you wouldn’t include the libraries directly in a CDN, how would you do it?</p>
<p><em>-I would transpile it from Typescript using a Webpack + SystemJS + Babel combo.</em></p>
<p>Typescript? I thought we were coding in JavaScript!</p>
<p><em>-Typescript IS JavaScript, or better put, a superset of JavaScript, more specifically JavaScript on version ES6. You know, that sixth version we talked about before?</em></p>
<p>I thought ES2016+ was already a superset of ES6! WHY we need now this thing called Typescript?</p>
<p><em>-Oh, because it allows us to use JavaScript as a typed language, and reduce run-time errors. It’s 2016, you should be adding some types to your JavaScript code.</em></p>
<p>And Typescript obviously does that.</p>
<p><em>-Flow as well, although it only checks for typing while Typescript is a superset of JavaScript which needs to be compiled.</em></p>
<p>Sigh… and Flow is?</p>
<p><em>-It’s a static type checker made by some guys at Facebook. They coded it in OCaml, because functional</em> <a target="_blank" rel="noopener" href="https://hackernoon.com/tagged/programming"><em>programming</em></a> <em>is awesome.</em></p>
<p>OCaml? Functional programming?</p>
<p><em>-It’s what the cool kids use nowadays man, you know, 2016? Functional programming? High order functions? Currying? Pure functions?</em></p>
<p>I have no idea what you just said.</p>
<p><em>-No one does at the beginning. Look, you just need to know that functional programming is better than OOP and that’s what we should be using in 2016.</em></p>
<p>Wait, I learned OOP in college, I thought that was good?</p>
<p><em>-So was Java before being bought by Oracle. I mean, OOP was good back in the days, and it still has its uses today, but now everyone is realising modifying states is equivalent to kicking babies, so now everyone is moving to immutable objects and functional programming. Haskell guys had been calling it for years, -and don’t get me started with the Elm guys- but luckily in the web now we have libraries like Ramda that allow us to use functional programming in plain JavaScript.</em></p>
<p>Are you just dropping names for the sake of it? What the hell is Ramnda?</p>
<p><em>-No. Ramda. Like Lambda. You know, that David Chambers’ library?</em></p>
<p>David who?</p>
<p><em>-David Chambers. Cool guy. Plays a mean Coup game. One of the contributors for Ramda. You should also check Erik Meijer if you are serious about learning functional programming.</em></p>
<p>And Erik Meijer is…?</p>
<p><em>-Functional programming guy as well. Awesome guy. He has a bunch of presentations where he trashes Agile while using this weird coloured shirt. You should also check some of the stuff from Tj, Jash Kenas, Sindre Sorhus, Paul Irish, Addy Osmani-</em></p>
<p>Ok. I’m going to stop you there. All that is good and fine, but I think all that is just so complicated and unnecessary for just fetching data and displaying it. I’m pretty sure I don’t need to know these people or learn all those things to create a table with dynamic data. Let’s get back to React. How can I fetch the data from the server with React?</p>
<p><em>-Well, you actually don’t fetch the data with React, you just display the data with React.</em></p>
<p>Oh, damn me. So what do you use to fetch the data?</p>
<p><em>-You use Fetch to fetch the data from the server.</em></p>
<p>I’m sorry? You use Fetch to fetch the data? Whoever is naming those things needs a thesaurus.</p>
<p><em>-I know right? Fetch it’s the name of the native implementation for performing XMLHttpRequests against a server.</em></p>
<p>Oh, so AJAX.</p>
<p><em>-AJAX is just the use of XMLHttpRequests. But sure. Fetch allows you to do AJAX based in promises, which then you can resolve to avoid the callback hell.</em></p>
<p>Callback hell?</p>
<p><em>-Yeah. Every time you perform an asynchronous request against the server, you need to wait for its response, which then makes you to add a function within a function, which is called the callback pyramid from hell.</em></p>
<p>Oh, Ok. And this promise thing solves it?</p>
<p><em>-Indeed. By manipulating your callbacks through promises, you can write easier to understand code, mock and test them, as well as perform simultaneous requests at once and wait until all of them are loaded.</em></p>
<p>And that can be done with Fetch?</p>
<p><em>-Yes, but only if your user uses an evergreen browser, otherwise you need to include a Fetch polyfill or use Request, Bluebird or Axios.</em></p>
<p>How many libraries do I need to know for god’s sake? How many are of them?</p>
<p><em>-It’s JavaScript. There has to be thousands of libraries that all do the same thing. We know libraries, in fact, we have the best libraries. Our libraries are huuuge, and sometimes we include pictures of Guy Fieri in them.</em></p>
<p>Did you just say Guy Fieri? Let’s get this over with. What these Bluebird, Request, Axios libraries do?</p>
<p><em>-They are libraries to perform XMLHttpRequests that return promises.</em></p>
<p>Didn’t jQuery’s AJAX method start to return promises as well?</p>
<p><em>-We don’t use the “J” word in 2016 anymore. Just use Fetch, and polyfill it when it’s not in a browser or use Bluebird, Request or Axios instead. Then manage the promise with await within an async function and boom, you have proper control flow.</em></p>
<p>It’s the third time you mention await but I have no idea what it is.</p>
<p><em>-Await allows you to block an asynchronous call, allowing you to have better control on when the data is being fetch and overall increasing code readability. It’s awesome, you just need to make sure you add the stage-3 preset in Babel, or use syntax-async-functions and transform-async-to-generator plugin.</em></p>
<p>This is insane.</p>
<p><em>-No, insane is the fact you need to precompile Typescript code and then transpile it with Babel to use await.</em></p>
<p>Wat? It’s not included in Typescript?</p>
<p><em>-It does in the next version, but as of version 1.7 it only targets ES6, so if you want to use await in the browser, first you need to compile your Typescript code targeting ES6 and then Babel that shit up to target ES5.</em></p>
<p>At this point I don’t know what to say.</p>
<p><em>-Look, it’s easy. Code everything in Typescript. All modules that use Fetch compile them to target ES6, transpile them with Babel on a stage-3 preset, and load them with SystemJS. If you don’t have Fetch, polyfill it, or use Bluebird, Request or Axios, and handle all your promises with await.</em></p>
<p>We have very different definitions of easy. So, with that ritual I finally fetched the data and now I can display it with React right?</p>
<p><em>-Is your application going to handle any state changes?</em></p>
<p>Err, I don’t think so. I just need to display the data.</p>
<p><em>-Oh, thank god. Otherwise I would had to explain you Flux, and implementations like Flummox, Alt, Fluxible. Although to be honest you should be using Redux.</em></p>
<p>I’m going to just fly over those names. Again, I just need to display data.</p>
<p><em>-Oh, if you are just displaying the data you didn’t need React to begin with. You would had been fine with a templating engine.</em></p>
<p>Are you kidding me? Do you think this is funny? Is that how you treat your loved ones?</p>
<p><em>-I was just explaining what you could use.</em></p>
<p>Stop. Just stop.</p>
<p><em>-I mean, even if it’s just using templating engine, I would still use a Typescript + SystemJS + Babel combo if I were you.</em></p>
<p>I need to display data on a page, not perform Sub Zero’s original MK fatality. Just tell me what templating engine to use and I’ll take it from there.</p>
<p><em>-There’s a lot, which one you are familiar with?</em></p>
<p>Ugh, can’t remember the name. It was a long time ago.</p>
<p><em>-jTemplates? jQote? PURE?</em></p>
<p>Err, doesn’t ring a bell. Another one?</p>
<p><em>-Transparency? JSRender? MarkupJS? KnockoutJS? That one had two-way binding.</em></p>
<p>Another one?</p>
<p><em>-PlatesJS? jQuery-tmpl? Handlebars? Some people still use it.</em></p>
<p>Maybe. Are there similar to that last one?</p>
<p><em>-Mustache, underscore? I think now even lodash has one to be honest, but those are kind of 2014.</em></p>
<p>Err.. maybe it was newer.</p>
<p><em>-Jade? DustJS?</em></p>
<p>No.</p>
<p><em>-DotJS? EJS?</em></p>
<p>No.</p>
<p><em>-Nunjucks? ECT?</em></p>
<p>No.</p>
<p><em>-Mah, no one likes Coffeescript syntax anyway. Jade?</em></p>
<p>No, you already said Jade.</p>
<p><em>-I meant Pug. I meant Jade. I mean, Jade is now Pug.</em></p>
<p>Sigh. No. Can’t remember. Which one would you use?</p>
<p><em>-Probably just ES6 native template strings.</em></p>
<p>Let me guess. And that requires ES6.</p>
<p><em>-Correct.</em></p>
<p>Which, depending on what browser I’m using needs Babel.</p>
<p><em>-Correct.</em></p>
<p>Which, if I want to include without adding the entire core library, I need to load it as a module from npm.</p>
<p><em>-Correct.</em></p>
<p>Which, requires Browserify, or Wepback, or most likely that other thing called SystemJS.</p>
<p><em>-Correct.</em></p>
<p>Which, unless it’s Webpack, ideally should be managed by a task runner.</p>
<p><em>-Correct.</em></p>
<p>But, since I should be using functional programming and typed languages I first need to pre-compile Typescript or add this Flow thingy.</p>
<p><em>-Correct.</em></p>
<p>And then send that to Babel if I want to use await.</p>
<p><em>-Correct.</em></p>
<p>So I can then use Fetch, promises, and control flow and all that magic.</p>
<p><em>-Just don’t forget to polyfill Fetch if it’s not supported, Safari still can’t handle it.</em></p>
<p>You know what. I think we are done here. Actually, I think I’m done. I’m done with the web, I’m done with JavaScript altogether.</p>
<p><em>-That’s fine, in a few years we all are going to be coding in Elm or WebAssembly.</em></p>
<p>I’m just going to move back to the backend. I just can’t handle these many changes and versions and editions and compilers and transpilers. The JavaScript community is insane if it thinks anyone can keep up with this.</p>
<p><em>-I hear you. You should try the Python community then.</em></p>
<p>Why?</p>
<p><em>-Ever heard of Python 3?</em></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        Share
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://yoursite.com/2021/03/28/How-it-feels-to-learn-JavaScript-in-2016/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
    
      <a href="/2021/03/27/%E8%AF%BB%E3%80%8A%E7%96%AF%E7%8B%82%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%91%98%E3%80%8B%E6%9C%89%E6%84%9F/" class="article-nav-link">
        <strong class="article-nav-caption">next post</strong>
        <div class="article-nav-title">读《疯狂的程序员》有感</div>
      </a>
    
  </nav>

  
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2019-2021
        <i class="ri-heart-fill heart_icon"></i> Aaron
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Aaron&#39;s Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">home</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">archives</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">categories</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">tags</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/travel/">travel</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">about me</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->


<script src="/js/clickBoom2.js"></script>


<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>