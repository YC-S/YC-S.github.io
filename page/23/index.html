<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Yuanchen&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/23/index.html">
<meta property="og:site_name" content="Yuanchen&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yuanchen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/23/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Yuanchen's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yuanchen's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/01/Amazon_Leadership_Principles/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/01/Amazon_Leadership_Principles/" class="post-title-link" itemprop="url">Amazon Leadership Principles</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-01 19:43:30 / Modified: 20:55:18" itemprop="dateCreated datePublished" datetime="2020-01-01T19:43:30-05:00">2020-01-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Customer-Obsession"><a href="#Customer-Obsession" class="headerlink" title="Customer Obsession"></a>Customer Obsession</h3><blockquote>
<p>Leaders start with the customer and work backwards. They work vigorously to earn and keep customer trust. Although leaders pay attention to competitors, they obsess over customers. </p>
</blockquote>
<h3 id="Ownership"><a href="#Ownership" class="headerlink" title="Ownership"></a>Ownership</h3><blockquote>
<p>Leaders are owners. They think long term and don’t sacrifice long-term value for short-term results. They act on behalf of the entire company, beyond just their own team. They never say “that’s not my job.”</p>
</blockquote>
<h3 id="Invent-and-Simplify"><a href="#Invent-and-Simplify" class="headerlink" title="Invent and Simplify"></a>Invent and Simplify</h3><blockquote>
<p>Leaders expect and require innovation and invention from their teams and always find ways to simplify. They are externally aware, look for new ideas from everywhere, and are not limited by “not invented here.” As we do new things, we accept that we may be misunderstood for long periods of time.</p>
</blockquote>
<h3 id="Are-Right-A-Lot"><a href="#Are-Right-A-Lot" class="headerlink" title="Are Right, A Lot"></a>Are Right, A Lot</h3><blockquote>
<p>Leaders are right a lot. They have strong judgment and good instincts. They seek diverse perspectives and work to disconfirm their beliefs.</p>
</blockquote>
<h3 id="Learn-and-Be-Curious"><a href="#Learn-and-Be-Curious" class="headerlink" title="Learn and Be Curious"></a>Learn and Be Curious</h3><blockquote>
<p>Leaders are never done learning and always seek to improve themselves. They are curious about new possibilities and act to explore them.</p>
</blockquote>
<h3 id="Hire-and-Develop-the-Best"><a href="#Hire-and-Develop-the-Best" class="headerlink" title="Hire and Develop the Best"></a>Hire and Develop the Best</h3><blockquote>
<p>Leaders raise the performance bar with every hire and promotion. They recognize exceptional talent, and willingly move them throughout the organization. Leaders develop leaders and take seriously their role in coaching others. We work on behalf of our people to invent mechanisms for development like Career Choice.</p>
</blockquote>
<h3 id="Insist-on-the-Highest-Standards"><a href="#Insist-on-the-Highest-Standards" class="headerlink" title="Insist on the Highest Standards"></a>Insist on the Highest Standards</h3><blockquote>
<p>Leaders have relentlessly high standards -; many people may think these standards are unreasonably high. Leaders are continually raising the bar and drive their teams to deliver high quality products, services, and processes. Leaders ensure that defects do not get sent down the line and that problems are fixed so they stay fixed.</p>
</blockquote>
<h3 id="Think-Big"><a href="#Think-Big" class="headerlink" title="Think Big"></a>Think Big</h3><blockquote>
<p>Thinking small is a self-fulfilling prophecy. Leaders create and communicate a bold direction that inspires results. They think differently and look around corners for ways to serve customers.</p>
</blockquote>
<h3 id="Bias-for-Action"><a href="#Bias-for-Action" class="headerlink" title="Bias for Action"></a>Bias for Action</h3><blockquote>
<p>Speed matters in business. Many decisions and actions are reversible and do not need extensive study. We value calculated risk taking.</p>
</blockquote>
<h3 id="Frugality"><a href="#Frugality" class="headerlink" title="Frugality"></a>Frugality</h3><blockquote>
<p>Accomplish more with less. Constraints breed resourcefulness, self-sufficiency, and invention. There are no extra points for growing headcount, budget size, or fixed expense.</p>
</blockquote>
<h3 id="Earn-Trust"><a href="#Earn-Trust" class="headerlink" title="Earn Trust"></a>Earn Trust</h3><blockquote>
<p>Leaders listen attentively, speak candidly, and treat others respectfully. They are vocally self-critical, even when doing so is awkward or embarrassing. Leaders do not believe their or their team’s body odor smells of perfume. They benchmark themselves and their teams against the best.</p>
</blockquote>
<h3 id="Dive-Deep"><a href="#Dive-Deep" class="headerlink" title="Dive Deep"></a>Dive Deep</h3><blockquote>
<p>Leaders operate at all levels, stay connected to the details, audit frequently, and are skeptical when metrics and anecdote differ. No task is beneath them.</p>
</blockquote>
<h3 id="Have-Backbond-Disagree-and-Commit"><a href="#Have-Backbond-Disagree-and-Commit" class="headerlink" title="Have Backbond; Disagree and Commit"></a>Have Backbond; Disagree and Commit</h3><blockquote>
<p>Leaders are obligated to respectfully challenge decisions when they disagree, even when doing so is uncomfortable or exhausting. Leaders have conviction and are tenacious. They do not compromise for the sake of social cohesion. Once a decision is determined, they commit wholly.</p>
</blockquote>
<h3 id="Deliver-Results"><a href="#Deliver-Results" class="headerlink" title="Deliver Results"></a>Deliver Results</h3><blockquote>
<p>Leaders focus on the key inputs for their business and deliver them with the right quality and in a timely fashion. Despite setbacks, they rise to the occasion and never settle.</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/30/Java-Development/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/30/Java-Development/" class="post-title-link" itemprop="url">Java Development</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-30 16:13:20 / Modified: 17:26:37" itemprop="dateCreated datePublished" datetime="2019-12-30T16:13:20-05:00">2019-12-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Java-Development-Mind-Map"><a href="#Java-Development-Mind-Map" class="headerlink" title="Java Development Mind Map"></a>Java Development Mind Map</h1><p><img src="../images/Java_Development.png" alt="Java_Development"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/30/how-to-read-source-code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/30/how-to-read-source-code/" class="post-title-link" itemprop="url">how to read source code</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-30 12:15:55 / Modified: 13:16:39" itemprop="dateCreated datePublished" datetime="2019-12-30T12:15:55-05:00">2019-12-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="How-To-Read-Source-Code"><a href="#How-To-Read-Source-Code" class="headerlink" title="How To Read Source Code"></a>How To Read Source Code</h1><h2 id="What-do-we-mean-when-we-say-“reading-source-code”"><a href="#What-do-we-mean-when-we-say-“reading-source-code”" class="headerlink" title="What do we mean when we say “reading source code”?"></a>What do we mean when we say “reading source code”?</h2><p>Reading for comprehension</p>
<p>… to find bugs</p>
<p>… to find interactions</p>
<p>… to review</p>
<p>… to see the interface</p>
<p>… to learn!</p>
<hr>
<h2 id="Reading-isn’t-linear"><a href="#Reading-isn’t-linear" class="headerlink" title="Reading isn’t linear"></a>Reading isn’t linear</h2><p>We skip back and forth from chapter to chapter, module to module. We can read the module straight through but we won’t have the definitions of things from other modules. We can read in execution order, but we won’t know where we’re going more than one call site down.</p>
<hr>
<h2 id="Reading-Order"><a href="#Reading-Order" class="headerlink" title="Reading Order"></a>Reading Order</h2><p>Do you start at the entry point of a package?</p>
<p>How about in a browser?</p>
<p>Maybe find the biggest source code file and read that first.</p>
<p>Try setting a breakpoint early and tracing down through functions in a debugger.</p>
<p>Try setting a breakpoint deep in the code, and reading each function in the call stack.</p>
<hr>
<p>Kinds of source code</p>
<ul>
<li>Javascript</li>
<li>C++</li>
<li>ES6</li>
<li>Coffee Script</li>
<li>Shell Script</li>
</ul>
<hr>
<ul>
<li>SNOBOL</li>
<li>APL</li>
<li>Befunge</li>
<li>Forth</li>
<li>Perl</li>
<li>Other people’s javascript</li>
</ul>
<hr>
<p>Another way to think of kinds of source code</p>
<ul>
<li>Glue</li>
<li>Interface-defining</li>
<li>Implementation</li>
<li>Algorithmic</li>
<li>Configuring</li>
<li>Tasking</li>
</ul>
<p>There’s a lot of study of algorithmic source code out there because that’s what academia produces: algorithms, the little, often mathematical ways of doing things. All the others are a lot more nebulous but I think a lot more interesting. They’re certainly the bulk of what most people write when they’re programming computers.</p>
<p>Of course, sometimes, something does more than one of these things. Many times, in fact. Figuring out what it’s trying to be can be one of the first tasks.</p>
<hr>
<h2 id="What’s-‘Glue’"><a href="#What’s-‘Glue’" class="headerlink" title="What’s ‘Glue’?"></a>What’s ‘Glue’?</h2><p>Not all the interfaces we want to use play nice together. Glue is the plumbing connecting things together. Middleware, promises vs callbacks binding code, inflating arguments into objects or breaking objects apart. All that’s glue.</p>
<hr>
<h2 id="How-do-you-read-glue"><a href="#How-do-you-read-glue" class="headerlink" title="How do you read glue?"></a>How do you read glue?</h2><p>We’re looking for how two interfaces are shaped differently, and what’s common between them.</p>
<hr>
<p>This is from Ben Drucker’s <code>stream-to-promise</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">internals.writable = <span class="function"><span class="keyword">function</span> (<span class="params">stream</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    stream.once(<span class="string">'finish'</span>, resolve);</span><br><span class="line">    stream.once(<span class="string">'error'</span>, reject);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>The two interfaces we’re talking about here are node streams and promises.</p>
<p>The things they have in common are that they do work until they finish, in node with an event, in promises by calling the resolution functions.</p>
<p>Now the thing you can notice while you’re reading is that promises really can only be resolved once, but streams can actually emit the same event multiple times. They don’t usually, but as programmers we usually know the difference between can’t and shouldn’t.</p>
<hr>
<p>More glue!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> record = &#123;</span><br><span class="line">    name: (input.name || <span class="string">''</span>).trim(),</span><br><span class="line">    age: <span class="built_in">isNaN</span>(<span class="built_in">Number</span>(input.age)) ? <span class="literal">null</span> : <span class="built_in">Number</span>(input.age),</span><br><span class="line">    email: validateEmail(input.email.trim())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>More things to think about in glue: How are errors handled?</p>
<p>It’s worth asking if any of these things throw? Do they delete bad values? Maybe they coerce them into being okay-enough values? Are these the right choices for the context they’re operating in? Are conversions lossy?</p>
<hr>
<h2 id="What’s-interface-defining-code"><a href="#What’s-interface-defining-code" class="headerlink" title="What’s interface-defining code?"></a>What’s interface-defining code?</h2><p>You know how you have some modules that are really only used one or two places, they’re kinda internal, and you hope nobody looks at them too hard?</p>
<p>Interface-defining is the opposite of that. It’s the hard boundaries of your module.</p>
<hr>
<p>From node’s <code>events.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">exports.usingDomains = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">EventEmitter</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">exports.EventEmitter = EventEmitter;</span><br><span class="line"></span><br><span class="line">EventEmitter.prototype.setMaxListeners = <span class="function"><span class="keyword">function</span> <span class="title">setMaxListeners</span>(<span class="params">n</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.emit = <span class="function"><span class="keyword">function</span> <span class="title">emit</span>(<span class="params">type</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.addListener = <span class="function"><span class="keyword">function</span> <span class="title">addListener</span>(<span class="params">type, listener</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.on = EventEmitter.prototype.addListener;</span><br><span class="line">EventEmitter.prototype.once = <span class="function"><span class="keyword">function</span> <span class="title">once</span>(<span class="params">type, listener</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.removeListener = <span class="function"><span class="keyword">function</span> <span class="title">removeListener</span>(<span class="params">type, listener</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.removeAllListeners = <span class="function"><span class="keyword">function</span> <span class="title">removeAllListeners</span>(<span class="params">type</span>) </span>&#123;&#125;;</span><br><span class="line">EventEmitter.prototype.listeners = <span class="function"><span class="keyword">function</span> <span class="title">listeners</span>(<span class="params">type</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.listenerCount = <span class="function"><span class="keyword">function</span>(<span class="params">emitter, type</span>) </span>&#123; &#125;;</span><br></pre></td></tr></table></figure>

<p>We’re defining the interface for <code>EventEmitter</code> here.</p>
<p>Some things to ask here are is this complete?  What guarantees does this make? Are internal details exposed?</p>
<p>If you have strong interface contracts, this is where you should expect to find them.</p>
<p>Like glue code, look for how errors are handled and exposed. Is that consistent? Does it distinguish errors due to internal inconsistency from errors because the user of the interface didn’t understand it?</p>
<hr>
<h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">startRouting: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.router = <span class="keyword">this</span>.router || <span class="keyword">this</span>.constructor.map(K);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="keyword">this</span>.router;</span><br><span class="line"><span class="keyword">var</span> location = <span class="keyword">get</span>(this, 'location');</span><br><span class="line">var container = this.container;</span><br><span class="line">var self = this;</span><br><span class="line">var initialURL = <span class="keyword">get</span>(this, 'initialURL');</span><br><span class="line">var initialTransition;</span><br><span class="line"></span><br><span class="line">// Allow the Location class to cancel the router setup while it refreshes</span><br><span class="line">// the page</span><br><span class="line">if (<span class="keyword">get</span>(location, 'cancelRouterSetup')) &#123;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>._setupRouter(router, location);</span><br><span class="line"></span><br><span class="line">container.register(<span class="string">'view:default'</span>, _MetamorphView);</span><br><span class="line">container.register(<span class="string">'view:toplevel'</span>, EmberView.extend());</span><br><span class="line"></span><br><span class="line">location.onUpdateURL(<span class="function"><span class="keyword">function</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  self.handleURL(url);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> initialURL === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  initialURL = location.getURL();</span><br><span class="line">&#125;</span><br><span class="line">initialTransition = <span class="keyword">this</span>.handleURL(initialURL);</span><br><span class="line"><span class="keyword">if</span> (initialTransition &amp;&amp; initialTransition.error) &#123;</span><br><span class="line">  <span class="keyword">throw</span> initialTransition.error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>From <code>Ember.Router</code></p>
<p>This is what that always needs more documentation about why and not so much about what.</p>
<p>Things to look for when reading here are how it fits into the larger whole.</p>
<p>What’s coming from the public interface to this module? What needs validation? Are these variables going to contain what we think they contain? What other parts does this touch? What’s the risk to changing it when adding new features? What might break? Do we have tests for that?</p>
<p>What’s the lifetime of these variables? (this is an easy one: This looks really well designed and doesn’t store needless state with a long lifetime.) Though maybe we should look at <code>_setupRouter</code>…</p>
<hr>
<h2 id="Process-entailment"><a href="#Process-entailment" class="headerlink" title="Process entailment"></a>Process entailment</h2><p>Or, looking forward: <em>How much is required to use this thing correctly?</em></p>
<p>and backward: <em>If we’re here, what got us to this point?</em></p>
<p>It’s pretty easy to see what functions call what other functions. However, the reverse is more interesting! So one of the things you can look for when reading source code, and in particular the implementation bits is look at what things have to happen to set up the state the process needs to be in to begin.</p>
<p>Is that state explicit, passed in via parameters? Is it assumed to be there, as an instance variable or property? Is there a single path to get there, with an obvious place that state is set up? Or is it diffuse?</p>
<hr>
<h2 id="Algorithms"><a href="#Algorithms" class="headerlink" title="Algorithms"></a>Algorithms</h2><p>So algorithmic code is a kind of special case of implementation code. It’s not so exposed to the outside world, it’s the meat of a program. Quite often it’s business logic or the core processes of the software.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Grammar</span>(<span class="params">rules</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Processing The Grammar</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// Here we begin defining a grammar given the raw rules, terminal</span></span><br><span class="line">  <span class="comment">// symbols, and symbolic references to rules</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// The input is a list of rules.</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// The input grammar is amended with a final rule, the 'accept' rule,</span></span><br><span class="line">  <span class="comment">// which if it spans the parse chart, means the entire grammar was</span></span><br><span class="line">  <span class="comment">// accepted. This is needed in the case of a nulling start symbol.</span></span><br><span class="line">  rules.push(Rule(<span class="string">'_accept'</span>, [Ref(<span class="string">'start'</span>)]));</span><br><span class="line">  rules.acceptRule = rules.length - <span class="number">1</span>;</span><br></pre></td></tr></table></figure>



<p>This bit is from a parser engine I’ve been working on called <code>lotsawa</code>. More on the next slide.</p>
<p>It’s been said a lot that good comments say why something is done or done that way, rather than what it’s doing. Algorithms usually need more explanation of what’s going on since if they were trivial, they’d probably be built into our standard library. Quite often to get good performance out of something, the exactly what-and-how matters a lot.</p>
<p>This is the stuff that those of you with CS degrees get to drool over (or maybe have traumatic memories of).</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Build a list of all the symbols used in the grammar so they can be numbered instead of referred to</span></span><br><span class="line"><span class="comment">// by name, and therefore their presence can be represented by a single bit in a set.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">censusSymbols</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> out = [];</span><br><span class="line">  rules.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">r</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!~out.indexOf(r.name)) out.push(r.name);</span><br></pre></td></tr></table></figure>

<pre><code>  r.symbols.forEach(function(s, i) {
    var symNo = out.indexOf(s.name);
    if (!~out.indexOf(s.name)) {
      symNo = out.length;
      out.push(s.name);
    }

    r.symbols[i] = symNo;
  });

  r.sym = out.indexOf(r.name);
});

return out;
}

rules.symbols = censusSymbols();</code></pre><p>Reads like a math paper, doesn’t it?</p>
<p>One of the things that you usually need to see in algorithmic code is the actual data structures. This one is building a list of symbols and making sure there’s no duplicates.</p>
<p>Look also for hints as to the running time of the algorithm. You can see in this part, I’ve got two loops. In Big-O notation, that’s O(n * m), then you can see that there’s an <code>indexOf</code> inside that. That’s another loop in Javascript, so that actually adds another factor to the running time. (twice – looks like I could make this more optimal by re-using one of the values here) Good thing this isn’t the main part of the algorithm!</p>
<hr>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>The line between source code and configuration file is super thin. There’s a constant tension between having a configuration be expressive and readable and direct.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.configure(<span class="string">'production'</span>, <span class="string">'staging'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  app.enable(<span class="string">'emails'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.configure(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  app.disable(<span class="string">'emails'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>An example using Javascript for configuration.</p>
<p>What we can run into here is combinatorial explosion of options. How many environments do we configure? Then, how many things do we configure for a specific instance of that environment. It’s really easy to go overboard and end up with all the possible permutations, and to have bugs that only show up in one of them. Keeping an eye out for how many degrees of freedom the configuration allows is super useful.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"express"</span>: &#123;</span><br><span class="line">    <span class="string">"env"</span>: <span class="string">""</span>, <span class="comment">// <span class="doctag">NOTE:</span> `env` is managed by the framework. This value will be overwritten.</span></span><br><span class="line">    <span class="string">"x-powered-by"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"views"</span>: <span class="string">"path:./views"</span>,</span><br><span class="line">    <span class="string">"mountpath"</span>: <span class="string">"/"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"middleware"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="string">"compress"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"priority"</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">"module"</span>: <span class="string">"compression"</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">"favicon"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"priority"</span>: <span class="number">30</span>,</span><br><span class="line">        <span class="string">"module"</span>: &#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"serve-favicon"</span>,</span><br><span class="line">            <span class="string">"arguments"</span>: [ <span class="string">"resolve:kraken-js/public/favicon.ico"</span> ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">A bit of &#96;kraken&#96; config file.</span><br><span class="line"></span><br><span class="line">Kraken took a &#39;low power language&#39; approach to configuration and chose JSON. A little more &quot;configuration&quot; and a little less &quot;source code&quot;. One of the goals was keeping that combinatorial explosion under control. There&#39;s a reason a lot of tools use simple key-value pairs or ini-style files for configuration, even though they&#39;re not terribly expressive.</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Configuration source code has some interesting and unique constraints that are worth looking for.</span><br><span class="line"></span><br><span class="line">* Lifetime</span><br><span class="line">* Machine writability</span><br><span class="line">* Responsible people vary a lot more</span><br><span class="line">* Have to fit in weird places like environment variables</span><br><span class="line">* Often store security-sensitive information</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Tasking</span><br><span class="line">-------</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">What do charging 50 credit cards, building a complex piece of software with a compiler and build tools, and sending 100 emails have in common?</span><br><span class="line"></span><br><span class="line">Transactionality. Often, some piece of the system needs to happen exactly once, and not at all if there&#39;s an error. A compiler that leaves bad build products around is a great source of bugs. Double charging customers is bad. Flooding someone&#39;s inbox because of a retry cycle is terrible.</span><br><span class="line"></span><br><span class="line">Resumabilty. A need to continue where they left off given the state of the system.</span><br><span class="line"></span><br><span class="line">Sequentiality. If they&#39;re not strictly linear processes, there&#39;s usually a very directed flow through the code. Loops tend to be big ones, around the whole shebang.</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Reading Messy Code</span><br><span class="line">------------------</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">So how do you deal with this?</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;javascript</span><br><span class="line">      DuplexCombination.prototype.on &#x3D; function(ev, fn) &#123;</span><br><span class="line">    switch (ev) &#123;</span><br><span class="line">  case &#39;data&#39;:</span><br><span class="line">  case &#39;end&#39;:</span><br><span class="line">  case &#39;readable&#39;:</span><br><span class="line">this.reader.on(ev, fn);</span><br><span class="line">return this</span><br><span class="line">  case &#39;drain&#39;:</span><br><span class="line">  case &#39;finish&#39;:</span><br><span class="line">this.writer.on(ev, fn);</span><br><span class="line">return this</span><br><span class="line">  default:</span><br><span class="line">return Duplex.prototype.on.call(this, ev, fn);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>



<p>You are seeing that right. That’s reverse indendation. Blame Isaac.</p>
<hr>
<h2 id="Rose-tinted-glasses"><a href="#Rose-tinted-glasses" class="headerlink" title="Rose tinted glasses!"></a>Rose tinted glasses!</h2><p><code>standard -F dc.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DuplexCombination.prototype.on = <span class="function"><span class="keyword">function</span> (<span class="params">ev, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (ev) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'data'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'end'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'readable'</span>:</span><br><span class="line">      <span class="keyword">this</span>.reader.on(ev, fn)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'drain'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'finish'</span>:</span><br><span class="line">      <span class="keyword">this</span>.writer.on(ev, fn)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> Duplex.prototype.on.call(<span class="keyword">this</span>, ev, fn)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>It’s okay to use tools while reading! </p>
<hr>
<p>How do you read this?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">if</span>(<span class="keyword">typeof</span> define===<span class="string">"function"</span>&amp;&amp;define.amd)&#123;define([<span class="string">"underscore"</span>,<span class="string">"</span></span><br><span class="line"><span class="string">jquery"</span>,<span class="string">"exports"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">i,r,s</span>)</span>&#123;t.Backbone=e(t,s,i,r)&#125;)&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">export</span></span><br><span class="line">s!==<span class="string">"undefined"</span>)&#123;<span class="keyword">var</span> i=<span class="built_in">require</span>(<span class="string">"underscore"</span>);e(t,exports,i)&#125;<span class="keyword">else</span>&#123;t.Backbone=e(t,</span><br><span class="line">&#123;&#125;,t._,t.jQuery||t.Zepto||t.ender||t.$)&#125;&#125;)(<span class="keyword">this</span>,<span class="function"><span class="keyword">function</span>(<span class="params">t,e,i,r</span>)</span>&#123;<span class="keyword">var</span> s=t.Backbo</span><br><span class="line">ne;<span class="keyword">var</span> n=[];<span class="keyword">var</span> a=n.push;<span class="keyword">var</span> o=n.slice;<span class="keyword">var</span> h=n.splice;e.VERSION=<span class="string">"1.1.2"</span>;e.$=r;e.</span><br><span class="line">noConflict=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;t.Backbone=s;<span class="keyword">return</span> <span class="keyword">this</span>&#125;;e.emulateHTTP=<span class="literal">false</span>;e.emulateJSO</span><br><span class="line">N=<span class="literal">false</span>;<span class="keyword">var</span> u=e.Events=&#123;<span class="attr">on</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,i</span>)</span>&#123;<span class="keyword">if</span>(!c(<span class="keyword">this</span>,<span class="string">"on"</span>,t,[e,i])||!e)<span class="keyword">return</span> t</span><br><span class="line">his;<span class="keyword">this</span>._events||(<span class="keyword">this</span>._events=&#123;&#125;);<span class="keyword">var</span> r=<span class="keyword">this</span>._events[t]||(<span class="keyword">this</span>._events[t]=[]);</span><br><span class="line">r.push(&#123;<span class="attr">callback</span>:e,<span class="attr">context</span>:i,<span class="attr">ctx</span>:i||<span class="keyword">this</span>&#125;);<span class="keyword">return</span> <span class="keyword">this</span>&#125;,<span class="attr">once</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,r</span>)</span>&#123;<span class="keyword">if</span>(</span><br><span class="line">!c(<span class="keyword">this</span>,<span class="string">"once"</span>,t,[e,r])||!e)<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> s=<span class="keyword">this</span>;<span class="keyword">var</span> n=i.once(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;s.off</span><br><span class="line">(t,n);e.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)&#125;);n._callback=e;<span class="keyword">return</span> <span class="keyword">this</span>.on(t,n,r)&#125;,<span class="attr">off</span>:functio</span><br><span class="line">n(t,e,r)&#123;<span class="keyword">var</span> s,n,a,o,h,u,l,f;<span class="keyword">if</span>(!<span class="keyword">this</span>._events||!c(<span class="keyword">this</span>,<span class="string">"off"</span>,t,[e,r]))<span class="keyword">return</span> thi</span><br><span class="line">s;<span class="keyword">if</span>(!t&amp;&amp;!e&amp;&amp;!r)&#123;<span class="keyword">this</span>._events=<span class="keyword">void</span> <span class="number">0</span>;<span class="keyword">return</span> <span class="keyword">this</span>&#125;o=t?[t]:i.keys(<span class="keyword">this</span>._events);fo</span><br><span class="line">r(h=<span class="number">0</span>,u=o.length;h&lt;u;h++)&#123;t=o[h];<span class="keyword">if</span>(a=<span class="keyword">this</span>._events[t])&#123;<span class="keyword">this</span>._events[t]=s=[];<span class="keyword">if</span>(e</span><br><span class="line">||r)&#123;<span class="keyword">for</span>(l=<span class="number">0</span>,f=a.length;l&lt;f;l++)&#123;n=a[l];<span class="keyword">if</span>(e&amp;&amp;e!==n.callback&amp;&amp;e!==n.callback._ca</span><br><span class="line">llback||r&amp;&amp;r!==n.context)&#123;s.push(n)&#125;&#125;&#125;<span class="keyword">if</span>(!s.length)<span class="keyword">delete</span> <span class="keyword">this</span>._events[t]&#125;&#125;retur</span><br><span class="line">n <span class="keyword">this</span>&#125;,<span class="attr">trigger</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">if</span>(!<span class="keyword">this</span>._events)<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> e=o.call(<span class="built_in">arguments</span>,</span><br><span class="line"><span class="number">1</span>);<span class="keyword">if</span>(!c(<span class="keyword">this</span>,<span class="string">"trigger"</span>,t,e))<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> i=<span class="keyword">this</span>._events[t];<span class="keyword">var</span> r=<span class="keyword">this</span>._event</span><br><span class="line">s.all;<span class="keyword">if</span>(i)f(i,e);<span class="keyword">if</span>(r)f(r,<span class="built_in">arguments</span>);<span class="keyword">return</span> <span class="keyword">this</span>&#125;,<span class="attr">stopListening</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,r</span>)</span></span><br><span class="line"><span class="function"></span>&#123;<span class="keyword">var</span> s=<span class="keyword">this</span>._listeningTo;<span class="keyword">if</span>(!s)<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> n=!e&amp;&amp;!r;<span class="keyword">if</span>(!r&amp;&amp;<span class="keyword">typeof</span> e===<span class="string">"objec</span></span><br><span class="line"><span class="string">​</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&#96;uglifyjs -b &lt; backbone-min.js&#96;</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;javascript</span><br><span class="line">(function(t, e) &#123;</span><br><span class="line">    if (typeof define &#x3D;&#x3D;&#x3D; &quot;function&quot; &amp;&amp; define.amd) &#123;</span><br><span class="line">        define([ &quot;underscore&quot;, &quot;jquery&quot;, &quot;exports&quot; ], function(i, r, s) &#123;</span><br><span class="line">            t.Backbone &#x3D; e(t, s, i, r);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else if (typeof exports !&#x3D;&#x3D; &quot;undefined&quot;) &#123;</span><br><span class="line">        var i &#x3D; require(&quot;underscore&quot;);</span><br><span class="line">        e(t, exports, i);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        t.Backbone &#x3D; e(t, &#123;&#125;, t._, t.jQuery || t.Zepto || t.ender || t.$);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(this, function(t, e, i, r) &#123;</span><br><span class="line">    var s &#x3D; t.Backbone;</span><br><span class="line">    var n &#x3D; [];</span><br><span class="line">    var a &#x3D; n.push;</span><br><span class="line">    var o &#x3D; n.slice;</span><br><span class="line">    var h &#x3D; n.splice;</span><br><span class="line">    e.VERSION &#x3D; &quot;1.1.2&quot;;</span><br><span class="line">    e.$ &#x3D; r;</span><br><span class="line">    e.noConflict &#x3D; function() &#123;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="Human-Parts"><a href="#Human-Parts" class="headerlink" title="Human Parts"></a>Human Parts</h2><p>Or: <em>guessing intent is dangerous but you learn so much</em></p>
<hr>
<p>There’s a lot of tricks for figuring out what the author of something meant.</p>
<hr>
<h2 id="Look-for-guards-and-coercions"><a href="#Look-for-guards-and-coercions" class="headerlink" title="Look for guards and coercions"></a>Look for guards and coercions</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> arg != <span class="string">'number'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"arg must be a number"</span>);</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Looks like the domain of whatever function we’re in is ‘numbers’.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arg = <span class="built_in">Number</span>(arg)</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Coerce things to numeric. Same domain as above, but doesn’t reject errors via exceptions. There might be <code>NaN</code>s though. Probably smart to read and check if there’s comparisons that will be false against those.</p>
<hr>
<h2 id="Look-for-defaults"><a href="#Look-for-defaults" class="headerlink" title="Look for defaults"></a>Look for defaults</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arg = arg || &#123;&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Default to an empty object.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arg = (arg == <span class="literal">null</span> ? <span class="literal">true</span> : arg)</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Default to true only if a value wasn’t explicitly passed.</p>
<hr>
<h2 id="Look-for-layers"><a href="#Look-for-layers" class="headerlink" title="Look for layers"></a>Look for layers</h2><p><code>req</code> and <code>res</code> from Express are tied to the web; how deep do they go?</p>
<p>Is there an interface boundary you can find?</p>
<hr>
<h2 id="Look-for-tracing"><a href="#Look-for-tracing" class="headerlink" title="Look for tracing"></a>Look for tracing</h2><p>Are there inspection points?</p>
<p>Debug logs?</p>
<p>Do those form a complete narrative? Or are they ad-hoc leftovers from the last few bugs?</p>
<hr>
<h2 id="Look-for-reflexivity"><a href="#Look-for-reflexivity" class="headerlink" title="Look for reflexivity"></a>Look for reflexivity</h2><p>Are identifiers being dynamically generated?</p>
<p>Is there <code>eval</code>? Metaprogramming? New function creation?</p>
<p><code>func.toString()</code> is your friend!</p>
<hr>
<h2 id="Look-at-lifetimes"><a href="#Look-at-lifetimes" class="headerlink" title="Look at lifetimes"></a>Look at lifetimes</h2><ul>
<li>Who initializes this?</li>
<li>When does it change?</li>
<li>Who changes it?</li>
<li>Is this information somewhere else in the mean time?</li>
<li>Is it ever inconsistent?</li>
</ul>
<p>^ Somewhere, someone typed the value you see into a keyboard, generated it from a random number generator, or computed it and saved it.</p>
<p>^ Somewhere else, some time else, that value will affect some human or humans. Who are these people?</p>
<p>^ What or who chooses who they are?</p>
<p>^ Is that value ever going to change?</p>
<p>^ Who changes it?</p>
<hr>
<h2 id="Look-for-hidden-state-machines"><a href="#Look-for-hidden-state-machines" class="headerlink" title="Look for hidden state machines"></a>Look for hidden state machines</h2><p>^ Sometimes boolean variables get used together as a decomposed state machine</p>
<p>^ For example, the variables <code>isReadied</code> and <code>isFinished</code> might show a state machine like so:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isReadied = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> isFinished = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>Or</p>
<p><code>START -&gt; READY -&gt; FINISHED</code></p>
<hr>
<h2 id="Look-for-hidden-state-machines-1"><a href="#Look-for-hidden-state-machines-1" class="headerlink" title="Look for hidden state machines"></a>Look for hidden state machines</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">| isReadied | isFinished | state    |</span><br><span class="line">| --------- | ---------- | -------- |</span><br><span class="line">| false     | false      | START    |</span><br><span class="line">| false     | true       | invalid  |</span><br><span class="line">| true      | false      | READY    |</span><br><span class="line">| true      | true       | FINISHED |</span><br></pre></td></tr></table></figure>

<p>^ Note that they can also express the state <code>!isReadied &amp;&amp; isFinished</code> – which might be an interesting source of bugs, if something can end up at the finished state without first being ready.</p>
<hr>
<h2 id="Look-for-composition-and-inheritance"><a href="#Look-for-composition-and-inheritance" class="headerlink" title="Look for composition and inheritance"></a>Look for composition and inheritance</h2><p>Is this made of parts I can recognize? Do those parts have names?</p>
<hr>
<h2 id="Look-for-common-operations"><a href="#Look-for-common-operations" class="headerlink" title="Look for common operations"></a>Look for common operations</h2><p><code>map</code>.</p>
<p><code>reduce</code>.</p>
<p>cross-join.</p>
<hr>
<p>It’s time to go read some source code.</p>
<p>Enjoy!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/30/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/30/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-30 01:02:28 / Modified: 13:15:30" itemprop="dateCreated datePublished" datetime="2019-12-30T01:02:28-05:00">2019-12-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/05/DataBase-Review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/05/DataBase-Review/" class="post-title-link" itemprop="url">DataBase Review</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-05 14:00:56" itemprop="dateCreated datePublished" datetime="2019-12-05T14:00:56-05:00">2019-12-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-06 21:37:11" itemprop="dateModified" datetime="2019-12-06T21:37:11-05:00">2019-12-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>整理学习到的databse知识。</p>
<h3 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h3><h6 id="Hierachy-speed-fast-to-slow"><a href="#Hierachy-speed-fast-to-slow" class="headerlink" title="Hierachy (speed fast to slow):"></a>Hierachy (speed fast to slow):</h6><p>​    CPU Register -&gt; Cache -&gt; Main Memory -&gt; Disk -&gt; Tapes</p>
<h6 id="Disk-Capacity"><a href="#Disk-Capacity" class="headerlink" title="Disk Capacity"></a>Disk Capacity</h6><p>​    Disk Capacity = #tracks per surface x (2 x #platter) x #sector per track x     byte per sector.</p>
<ul>
<li><p><strong>Access time = seek time + rotational delay + transfer time + other delay</strong></p>
<ul>
<li>Seek time: time to move the arm to position disk head on the right track.</li>
<li>Rotational delay: time to wait for sector to rotate under the disk head.</li>
<li>Average rotational delay: time for 1/2 revolution.</li>
<li>transfer time: block size / transfer rate.</li>
</ul>
<h6 id="Buffer-Management"><a href="#Buffer-Management" class="headerlink" title="Buffer Management"></a>Buffer Management</h6></li>
</ul>
<p>​    Pages in memory is like blocks in hard disk.</p>
<h6 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Given a total revolution of 7200 RPM.</span><br><span class="line">One rotation &#x3D; 1&#x2F;(7200&#x2F;60s)*1000ms &#x3D; 8.33ms</span><br><span class="line">Average rotational latency &#x3D; 4.16ms</span><br></pre></td></tr></table></figure>

<h6 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">3600 RPM &#x3D; 60 revolutions&#x2F;s -&gt; 1 rev &#x3D; 16.66 ms</span><br><span class="line">128 cylinders &#x3D; 2^7</span><br><span class="line">10% overhead between blocks</span><br><span class="line">time over useful data &#x3D; 16.66 x 0.9 &#x3D; 14.99ms</span><br><span class="line">time over gaps &#x3D; 16.66 x 0.1 &#x3D; 1.66ms</span><br><span class="line"></span><br><span class="line">T1 &#x3D; time to read one random block</span><br><span class="line">T1 &#x3D; seek + rotational delay + transfer time </span><br><span class="line">T1 &#x3D; 25 + 16.66&#x2F;2 + 0.117 &#x3D; 33.45ms</span><br></pre></td></tr></table></figure>



<h3 id="Record-Layout"><a href="#Record-Layout" class="headerlink" title="Record Layout"></a>Record Layout</h3><h4 id="Conventional-Indexes"><a href="#Conventional-Indexes" class="headerlink" title="Conventional Indexes"></a>Conventional Indexes</h4><h6 id="Types"><a href="#Types" class="headerlink" title="Types:"></a>Types:</h6><ol>
<li>Dense index: index record appears for every search-key value</li>
<li>Sparse index: contains index records for only some search-key value</li>
<li>Multilevel index: if primary index does not fit in memory, access becomes expensive.<ol>
<li>Outer index: a sparse index of primary index.</li>
<li>Inner index: the primary index file</li>
</ol>
</li>
<li>Duplicate keys:<ol>
<li>Dense index: only keep record in index for first data record with each search key value.</li>
<li>Sparse index: has key-pointer pairs corresponding to the first search key on each block of the data file.</li>
</ol>
</li>
</ol>
<h4 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B+ Tree"></a>B+ Tree</h4><h6 id="Characteristics"><a href="#Characteristics" class="headerlink" title="Characteristics:"></a>Characteristics:</h6><p>​    full(packed) and balanced(almost uniform height).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Consider a DBMS has following characteristics: Pointers:4 bytes. Keys: 4 bytes. Blocks:100 bytes.</span><br><span class="line">Compute the maximum number of records we can index with:</span><br><span class="line">a).2-level B Tree</span><br><span class="line">b).2-level B+ Tree</span><br><span class="line"></span><br><span class="line">a).2-level B Tree</span><br><span class="line">Find largest integer value of n such that 4n+4(2n+1)&lt;100. n&#x3D;8.</span><br><span class="line">Root has 8 keys + 8 record pointers + 9 children pointers </span><br><span class="line">&#x3D; 8 x 4 + 8 x 4 + 9 x 4 &#x3D; 100bytes.</span><br><span class="line">Each of 9 children has 12 records pointers</span><br><span class="line">&#x3D; 12 x (4 + 4) + 4 &#x3D; 100bytes.</span><br><span class="line">So maximum # of records &#x3D; 12 x 9 + 8 &#x3D; 116.</span><br><span class="line"></span><br><span class="line">b).2-level B+ Tree</span><br><span class="line">Find largest integer value of n such that 4n+(4n+1)&lt;100. n&#x3D;12.</span><br><span class="line">Root has 12 keys + 13 children pointers</span><br><span class="line">&#x3D; 12 x 4 + 13 x 4 &#x3D; 100 bytes.</span><br><span class="line">Each of 13 children has 12 record pointers</span><br><span class="line">&#x3D; 12 x (4 + 4) + 4 &#x3D; 100 bytes.</span><br><span class="line">So maximum # of records &#x3D; 13 x 12 &#x3D; 156.</span><br></pre></td></tr></table></figure>



<h4 id="B-Tree-1"><a href="#B-Tree-1" class="headerlink" title="B Tree"></a>B Tree</h4><h4 id="Hashing"><a href="#Hashing" class="headerlink" title="Hashing"></a>Hashing</h4><h6 id="Characteristics-1"><a href="#Characteristics-1" class="headerlink" title="Characteristics:"></a>Characteristics:</h6><p>$$<br>Avg\ occupancy = \frac{r}{n\times\gamma}<br>$$</p>
<p>n: The number of buckets that is currently in use.</p>
<p>r: current number of search keys stored in the buckets.</p>
<p>$\gamma$: block size(# search keys that can be stored in 1 block).</p>
<h3 id="Relational-Algebra"><a href="#Relational-Algebra" class="headerlink" title="Relational Algebra"></a>Relational Algebra</h3><h4 id="Algebra-expressions-Translate-SQL-into-relational-algebra-Equivlaence"><a href="#Algebra-expressions-Translate-SQL-into-relational-algebra-Equivlaence" class="headerlink" title="Algebra expressions / Translate SQL into relational algebra / Equivlaence."></a>Algebra expressions / Translate SQL into relational algebra / Equivlaence.</h4><h6 id="Query-Process"><a href="#Query-Process" class="headerlink" title="Query Process"></a>Query Process</h6><ul>
<li>parsing: translating the query into a parsing tree.</li>
<li>query rewrite: the parse tree is transformed into an expression tree of relational algebra (logical query plan)</li>
<li>physical plan generation: translate the logical plan into a physical plan<ul>
<li>select algorithms to implement each operator</li>
<li>choose order of operations.</li>
</ul>
</li>
</ul>
<h6 id="Physical-Query-Plan"><a href="#Physical-Query-Plan" class="headerlink" title="Physical Query Plan"></a>Physical Query Plan</h6><ul>
<li>Sequential-Scan<ul>
<li>Read tuples from the relation R by reading data blocks - one block at a time from disk to memory.</li>
</ul>
</li>
<li>Index-Scan<ul>
<li>The relation R must have an index</li>
<li>The index is scanned to find blocks that contain the desired tuples.</li>
<li>All the blocks containing desired tuples are then read into the memory - one block at a time.</li>
</ul>
</li>
</ul>
<h6 id="Clustered-and-unclustered-files-relations-indexes"><a href="#Clustered-and-unclustered-files-relations-indexes" class="headerlink" title="Clustered and unclustered files/relations/indexes"></a>Clustered and unclustered files/relations/indexes</h6><ul>
<li>Clustered file: A file that stores records of one relation.</li>
<li>Unclustered file: A file that stores records of multiple relations.</li>
<li>Clustered index: Index that allows tuples to be read in an order that corresponds to physical order.</li>
<li>Relation R is clustered.</li>
</ul>
<table>
<thead>
<tr>
<th>Operator</th>
<th>I/O cost</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Sequential-Scan</td>
<td>B(R)</td>
<td>Read all blocks, and there are B(R) blocks.</td>
</tr>
<tr>
<td>Index-Scan</td>
<td>≤B(R)</td>
<td>Depends on number of values in the index is scanned.</td>
</tr>
</tbody></table>
<ul>
<li>Relation R is unclustered.</li>
</ul>
<table>
<thead>
<tr>
<th>Operator</th>
<th>I/O cost</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Sequential-Scan</td>
<td>~T(R)</td>
<td>Assuming next tuple is not found in the current block. We will read 1 block per tuple</td>
</tr>
<tr>
<td>Index-Scan</td>
<td>≤T(R)</td>
<td>Depends on number of values in the index is scanned.</td>
</tr>
</tbody></table>
<h6 id="SQL-grammer"><a href="#SQL-grammer" class="headerlink" title="SQL grammer"></a>SQL grammer</h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Query&gt; ::= SELECT &lt;SelList&gt;</span><br><span class="line">						FROM   &lt;From List&gt;</span><br><span class="line">						WHERE  &lt;Condition&gt;</span><br><span class="line">						</span><br><span class="line">&lt;SelList&gt; ::= &lt;Attribute&gt; | &lt;Attribute&gt; , &lt;SelList&gt;</span><br><span class="line"></span><br><span class="line">&lt;FromList&gt; ::= &lt;Relation&gt; | &lt;Relation&gt; , &lt;FromList&gt;</span><br><span class="line"></span><br><span class="line">&lt;Condition&gt; ::= &lt;Condition&gt; AND &lt;Condition&gt;  |</span><br><span class="line">								&lt;Attribute&gt; IN (&lt;Query&gt;)     |</span><br><span class="line">								&lt;Attribute&gt; = &lt;Attribute&gt;</span><br><span class="line">								&lt;Attribute&gt; LIKE &lt;Pattern&gt;</span><br></pre></td></tr></table></figure>

<h6 id="Example-of-parse-trees"><a href="#Example-of-parse-trees" class="headerlink" title="Example of parse trees"></a>Example of parse trees</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> movieTitle</span><br><span class="line"><span class="keyword">FROM</span>   StarsIn, MovieStar</span><br><span class="line"><span class="keyword">WHERE</span>  starName = <span class="keyword">name</span></span><br><span class="line">       <span class="keyword">AND</span> birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/exampleOfParseTrees.png" alt=""></p>
<h6 id="Example-2-of-parse-trees"><a href="#Example-2-of-parse-trees" class="headerlink" title="Example 2 of parse trees"></a>Example 2 of parse trees</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> movieTitle</span><br><span class="line"><span class="keyword">FROM</span>   StarsIn</span><br><span class="line"><span class="keyword">WHERE</span>  starName <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">name</span></span><br><span class="line">                    <span class="keyword">FROM</span>   MovieStar</span><br><span class="line">                    <span class="keyword">WHERE</span>  birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="../images/example2OfParseTrees.png" alt="example2OfParseTrees"></p>
<h6 id="Virtual-Relation-Pre-Processing"><a href="#Virtual-Relation-Pre-Processing" class="headerlink" title="Virtual Relation Pre-Processing"></a>Virtual Relation Pre-Processing</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> Paramount_Movies <span class="keyword">AS</span></span><br><span class="line">	(<span class="keyword">SELECT</span> title, <span class="keyword">year</span></span><br><span class="line">	<span class="keyword">FROM</span>   Movies</span><br><span class="line">	<span class="keyword">WHERE</span>  StudioName = <span class="string">'Paramount'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021435872.png" alt="image-20191206021435872"></p>
<h6 id="Consider-the-following-query-on-the-virtual-table-Paramount-Movies"><a href="#Consider-the-following-query-on-the-virtual-table-Paramount-Movies" class="headerlink" title="Consider the following query on the virtual table Paramount_Movies:"></a>Consider the following query on the virtual table Paramount_Movies:</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>	title</span><br><span class="line"><span class="keyword">FROM</span>		Paramount_Movies</span><br><span class="line"><span class="keyword">WHERE</span>		<span class="keyword">year</span> = <span class="number">1979</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021508616.png" alt="image-20191206021508616"></p>
<h6 id="Then-the-virtual-table-is-replaced-by-the-corresponding-logical-query-plan"><a href="#Then-the-virtual-table-is-replaced-by-the-corresponding-logical-query-plan" class="headerlink" title="Then, the virtual table is replaced by the corresponding logical query plan"></a>Then, the virtual table is replaced by the corresponding logical query plan</h6><p><img src="../images/image-20191206021527531.png" alt="image-20191206021527531"></p>
<h4 id="Convert-Parse-Tree-into-initial-L-Q-P"><a href="#Convert-Parse-Tree-into-initial-L-Q-P" class="headerlink" title="Convert Parse Tree into initial L.Q.P"></a>Convert Parse Tree into initial L.Q.P</h4><p><img src="../images/convertParseTreeIntoInitialLQP.png" alt="convertParseTreeIntoInitialLQP"></p>
<h6 id="Set-vs-Bag-semantics"><a href="#Set-vs-Bag-semantics" class="headerlink" title="Set vs Bag semantics"></a>Set vs Bag semantics</h6><ul>
<li>Set semantics: No duplicate entries.</li>
<li>Bag semantics: Allow duplicate entries.</li>
</ul>
<h6 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h6><ul>
<li>Selection<ul>
<li>Syntax: σ c (R)</li>
<li>Set: { t | t ∈ R AND t fulfills c} </li>
<li>Bag: { $t^n$ | $t^n$ ∈ R AND t fulfills c}</li>
</ul>
</li>
<li>Renaming<ul>
<li>Syntax: ρ A (R)</li>
<li>Set: { t.A | t∈R} </li>
<li>Bag: { $(t.A)^n$ | $t^n$ ∈R}</li>
<li>Example: $ρ_c$←a(R)</li>
</ul>
</li>
<li>Projection<ul>
<li>Syntax: π A (R)</li>
<li>Set: { t.A | t∈R} </li>
<li>Bag: { $(t.A)^n$ | $t^n$ ∈R}</li>
</ul>
</li>
<li>Joins<ul>
<li>Theta, natural, cross-product, outer, anti</li>
<li>Cross Product<ul>
<li>Syntax: R × S</li>
<li>Set: { (t,s) | t∈R AND s∈S} </li>
<li>Bag: { (t,s)^n×m | t^n ∈R AND s^m ∈S}</li>
</ul>
</li>
<li>Join<ul>
<li>Syntax: $R\bowtie_{c}S$</li>
<li>Set: { (t,s) | t∈R AND s∈S AND (t,s) matches c} </li>
<li>Bag: { $(t,s)^{n×m}$ |$t^n$ ∈R AND $s^m$ ∈S AND (t,s) matches c}</li>
</ul>
</li>
<li>Natural Join<ul>
<li>Syntax: $R\bowtie S$</li>
<li>All combinations of tuples from R and S that match on common attributes</li>
<li>A = common attributes of R and S</li>
<li>C = exclusive attributes of S</li>
<li>Set: {(t,s.C) | t∈R AND s∈S AND t.A=s.A}</li>
<li>Bag: {$(t,s.C)^{n×m}$ | $t^n$ ∈R AND $s^m$ ∈S AND t.A=s.A}</li>
</ul>
</li>
<li>Left-outer Join<ul>
<li>Syntax:$R=\bowtie{c} S$</li>
<li>Contains all tuples in R join S</li>
<li>Also includes every tuple in R that is not joined with a tuple in S, after padding a NULL</li>
<li>$R=\bowtie _{a=d}S$</li>
<li><img src="../images/left_outer_join_example.png" alt="left_outer_join_example"></li>
</ul>
</li>
<li>Right-outer Join<ul>
<li>Syntax:$R\bowtie =S$</li>
<li>s∈S without match, ﬁll R attributes with NULLrigh</li>
<li>$R\bowtie =_{a=d}S$</li>
<li><img src="../images/right_outer_join_example.png" alt="right_outer_join_example"></li>
</ul>
</li>
<li>Full-outer Join<ul>
<li>Syntax: $R=\bowtie =_{c}S$</li>
<li>$R=\bowtie=_{a=d}S$</li>
<li><img src="../images/full_outer_join_example.png" alt="full_outer_join_example"></li>
</ul>
</li>
</ul>
</li>
<li>Aggregation<ul>
<li>All operators treat a relation as a bag of tuples.</li>
<li>SUM: computes the sum of a column with numerical values.</li>
<li>AVG: computes the average of a column with numerical values.</li>
<li>MIN and MAX: Natural Order</li>
<li>COUNT: computes the number of non-NULL tuples in a column.</li>
<li>Grouping and aggregation generally need to be implemented and optimized together</li>
<li>Syntax: $G\gamma A(R)$<ul>
<li>A is list of aggregation functions </li>
<li>G is list of group by attributes</li>
</ul>
</li>
<li>Build groups of tuples according G and compute the aggregation functions from each group</li>
<li>$b\gamma sum(a)(R)$</li>
<li><img src="../images/aggregation_example.png" alt="aggregation_example"></li>
</ul>
</li>
<li>Duplicate removal<ul>
<li>Syntax: $\delta(R)$: is the relation containing exactly one copy of each tuple in R.</li>
<li>$\delta(R)$</li>
<li><img src="../images/duplicate_removal.png" alt="duplicate_removal"></li>
</ul>
</li>
<li>Set operations.</li>
<li>Union, Intersection and Difference<ul>
<li>Union<ul>
<li>Syntax: $R\cup S$</li>
<li><img src="../images/unionExample.png" alt="unionExample"></li>
</ul>
</li>
<li>Intersection<ul>
<li>Syntax: $R\cap S$</li>
<li><img src="../images/intersectionExample.png" alt="intersectionExample"></li>
</ul>
</li>
<li>Set Difference<ul>
<li>Syntax: $R-S$</li>
<li><img src="../images/setExample.png" alt="setExample"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Canonical-Translation-to-Relational-Algebra"><a href="#Canonical-Translation-to-Relational-Algebra" class="headerlink" title="Canonical Translation to Relational Algebra"></a>Canonical Translation to Relational Algebra</h4><ul>
<li><strong>FROM</strong> clause into joins and crossproducts </li>
<li><strong>WHERE</strong> clause into selection </li>
<li><strong>SELECT</strong> clause into projection and renaming<ul>
<li>If it has aggregation functions use aggregation </li>
<li><strong>DISTINCT</strong> into duplicate removal</li>
</ul>
</li>
<li><strong>GROUP BY</strong> clause into aggregation </li>
<li><strong>HAVING</strong> clause into selection </li>
<li><strong>ORDER BY</strong> - no counter-part</li>
</ul>
<h4 id="Set-Operations"><a href="#Set-Operations" class="headerlink" title="Set Operations"></a>Set Operations</h4><ul>
<li><strong>UNION ALL</strong> into union </li>
<li><strong>UNION</strong> duplicate removal over union </li>
<li><strong>INTERSECT ALL</strong> into intersection </li>
<li><strong>INTERSECT</strong> add duplicate removal </li>
<li><strong>EXCEPT ALL</strong> into set diﬀerence </li>
<li><strong>EXCEPT</strong> apply duplicate removal to inputs and then apply set diﬀerence</li>
</ul>
<h4 id="Conversion-into-Relational-Algebra"><a href="#Conversion-into-Relational-Algebra" class="headerlink" title="Conversion into Relational Algebra"></a>Conversion into Relational Algebra</h4><h5 id="Example-1-1"><a href="#Example-1-1" class="headerlink" title="Example 1"></a>Example 1</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> MovieStar <span class="keyword">WHERE</span> birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span>;</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021614275.png" alt="image-20191206021614275"></p>
<h5 id="Example-2-1"><a href="#Example-2-1" class="headerlink" title="Example 2"></a>Example 2</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> movieTitle</span><br><span class="line"><span class="keyword">FROM</span>   StarsIn, MovieStar</span><br><span class="line"><span class="keyword">WHERE</span>  starName = <span class="keyword">name</span> <span class="keyword">AND</span> birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span>;</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021630157.png" alt="image-20191206021630157"></p>
<h5 id="Example-3"><a href="#Example-3" class="headerlink" title="Example 3"></a>Example 3</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sum</span>(a)</span><br><span class="line"><span class="keyword">FROM</span> R</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> b</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021643102.png" alt="image-20191206021643102"></p>
<h5 id="Example-4"><a href="#Example-4" class="headerlink" title="Example 4"></a>Example 4</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> dep, headcnt</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">AS</span> headcnt, dep</span><br><span class="line">     <span class="keyword">FROM</span> Employee</span><br><span class="line">     <span class="keyword">GROUP</span> <span class="keyword">BY</span> dep)</span><br><span class="line"><span class="keyword">WHERE</span> headcnt &gt; <span class="number">100</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021656629.png" alt="image-20191206021656629"></p>
<h5 id="Example-5"><a href="#Example-5" class="headerlink" title="Example 5"></a>Example 5</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> title <span class="keyword">FROM</span> StarsIn <span class="keyword">WHERE</span> starName <span class="keyword">IN</span> (&lt;<span class="keyword">Query</span>&gt;);</span><br></pre></td></tr></table></figure>

<p><img src="../images/conversion_into_relationExample5.png" alt="conversion_into_relationExample5"></p>
<h3 id="Query-Processing-and-Optimization"><a href="#Query-Processing-and-Optimization" class="headerlink" title="Query Processing and Optimization"></a>Query Processing and Optimization</h3><h4 id="Query-Optimization"><a href="#Query-Optimization" class="headerlink" title="Query Optimization"></a>Query Optimization</h4><p><img src="../images/image-20191206022236925.png" alt="image-20191206022236925"></p>
<h5 id="Relational-Algebra-Optimization"><a href="#Relational-Algebra-Optimization" class="headerlink" title="Relational Algebra Optimization"></a>Relational Algebra Optimization</h5><h6 id="Algebraic-Laws"><a href="#Algebraic-Laws" class="headerlink" title="Algebraic Laws:"></a>Algebraic Laws:</h6><ul>
<li>Joins and Products<ul>
<li>Natural joins and product are both associative and commutative</li>
<li>theta-join is commutative but not always associative.</li>
</ul>
</li>
<li>Union and Intersect<ul>
<li>Union and intersection are both associative and commutative</li>
</ul>
</li>
<li>Laws for Bags and Sets can differ<ul>
<li>Holds for sets, but guarentee for bags</li>
</ul>
</li>
<li>Select<ul>
<li>reduces the number of tuples (size of relation)</li>
<li>an important general rule in optimization is to push selects as far down the tree as possible</li>
<li>commutative</li>
<li>must be pushed through both arguments for union:<ul>
<li>Union: σ p (R ∪ S) = σ p (R) ∪ σ p (S)</li>
</ul>
</li>
<li>must be pushed through ﬁrst arguments, optionally second for diﬀerence:<ul>
<li>Diﬀerence: σ p (R - S) = σ p (R) - S</li>
</ul>
</li>
<li>For the other operators it is only required that the selection be pushed to one argument.<ul>
<li>σ p (R × S) = σ p (R) × S, if p contains only attributes from R</li>
</ul>
</li>
<li>Derivation<ul>
<li><img src="../images/image-20191206024632637.png" alt="image-20191206024632637"></li>
</ul>
</li>
<li>Amendment to the simple push down the select<ul>
<li>Use this algebraic law in the reverse order: $\sigma _p(R\bowtie S) = \sigma _p(R)\bowtie S$ to push the σ year=1996 operation up the tree</li>
<li><img src="../images/image-20191206025216352.png" alt="image-20191206025216352"></li>
<li>Then use the algebraic law in the forward order: $\sigma _p(R\bowtie S) = \sigma _p(R)\bowtie \sigma _p(S)$ push the $\sigma _{year=1996}$ operation down the tree.</li>
<li><img src="../images/image-20191206025413264.png" alt="image-20191206025413264"></li>
</ul>
</li>
</ul>
</li>
<li>Projection<ul>
<li><img src="../images/image-20191206025519667.png" alt="image-20191206025519667"></li>
</ul>
</li>
<li>Example<ul>
<li><img src="../images/image-20191206030745130.png" alt="image-20191206030745130"></li>
<li><img src="../images/image-20191206030801787.png" alt="image-20191206030801787"></li>
<li><img src="../images/image-20191206030815185.png" alt="image-20191206030815185"></li>
<li><img src="../images/image-20191206030824074.png" alt="image-20191206030824074"></li>
<li><img src="../images/image-20191206030838597.png" alt="image-20191206030838597"></li>
</ul>
</li>
<li>Summary<ul>
<li>Selections<ul>
<li>push down tree as far as possible </li>
<li>if condition is an AND, split and push separately </li>
<li>sometimes need to push up before pushing down</li>
</ul>
</li>
<li>Projections<ul>
<li>can be pushed down</li>
<li>new ones can be added (but be careful)</li>
</ul>
</li>
<li>duplicate eliminations can sometimes be removed (e.g., if one key)</li>
<li>Selection/product combinations<ul>
<li>can sometimes be replaced with join</li>
</ul>
</li>
<li>Many transformations lead to “promising” plans</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/05/Maven-Lesson/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/05/Maven-Lesson/" class="post-title-link" itemprop="url">Maven Lesson</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-05 01:17:03 / Modified: 02:52:52" itemprop="dateCreated datePublished" datetime="2019-12-05T01:17:03-05:00">2019-12-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Maven-Introduction"><a href="#Maven-Introduction" class="headerlink" title="Maven Introduction"></a>Maven Introduction</h2><p>整理学习到的maven知识。</p>
<h3 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h3><ol>
<li>Maven 是一个可以用于构建和管理任何基于Java的项目的工具. <ol>
<li>Maven 不仅帮我们自动化构件，还能够抽象构建过程，提供构建任务实现。</li>
<li>Maven 跨平台。</li>
</ol>
</li>
<li>Maven 还是一个依赖管理工具和项目管理工具，提供了中央仓库，能自动下载依赖。</li>
</ol>
<h3 id="Maven-常用命令"><a href="#Maven-常用命令" class="headerlink" title="Maven 常用命令"></a>Maven 常用命令</h3><ul>
<li>mvn clean：表示运行清理操作（会默认把target文件夹中的数据清理）。如果要把项目部署到生产环境，需使用mvn clean package命令，确保部署的是最新的内容。</li>
<li>mvn package: Maven根据pom文件里packaging的配置，决定是生成jar文件还是war文件，并放到target目录下。此命令需要在项目的根目录(也就是pom.xml文件所在的目录)下运行，Maven才知道打包哪个项目。</li>
<li>mvn test: 该命令执行后会去运行所有的单元测试</li>
<li>mvn clean install： 该命令会把你的项目打包并放到本地仓库，可以别人就可以引用了。</li>
<li>mvn site: 该命令会为你的项目生产一个文档站点，介绍你的项目，存储位置为target/site，该命令可能只有开源项目有用吧，毕竟平常没人会去关注你的项目信息。</li>
</ul>
<h3 id="Maven-使用"><a href="#Maven-使用" class="headerlink" title="Maven 使用"></a>Maven 使用</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.twitter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>twitter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>twitter<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>代码的第一行是XML头，指定了该xml文档的版本和编码方式。 </li>
<li>project是所有pom.xml的根元素，它还声明了一些POM相关的命名空间及xsd元素。</li>
<li>根元素下的第一个子元素modelVersion指定了当前的POM模型的版本，对于Maven3来说，它只能是4.0.0 代码中最重要是包含了groupId,artifactId和version了。这三个元素定义了一个项目基本的坐标，在Maven的世界，任何的jar、pom或者jar都是以基于这些基本的坐标进行区分的。</li>
<li>groupId定义了项目属于哪个组，随意命名，比如谷歌公司的myapp项目，就取名为 com.google.myapp</li>
<li>artifactId定义了当前Maven项目在组中唯一的ID,比如定义hello-world。</li>
<li>version指定了项目当前的版本0.0.1-SNAPSHOT,SNAPSHOT意为快照，说明该项目还处于开发中，是不稳定的。</li>
<li>name元素生命了一个对于用户更为友好的项目名称，虽然这不是必须的，但还是推荐为每个POM声明name,以方便信息交流</li>
</ul>
<h3 id="Dependency-配置"><a href="#Dependency-配置" class="headerlink" title="Dependency 配置"></a>Dependency 配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>实际项目<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>模块<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>版本<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">type</span>&gt;</span>依赖类型<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">scope</span>&gt;</span>依赖范围<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">optional</span>&gt;</span>依赖是否可选<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">!—主要用于排除传递性依赖--</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>…<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>…<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>根元素project下的dependencies可以包含一个或者多个dependency元素，以声明一个或者多个项目依赖。每个依赖可以包含的元素有：</p>
<ul>
<li><strong>grounpId、artifactId和version</strong>:以来的基本坐标，对于任何一个依赖来说，基本坐标是最重要的，Maven根据坐标才能找到需要的依赖。</li>
<li><strong>type</strong>:依赖的类型，对于项目坐标定义的packaging。大部分情况下，该元素不必声明，其默认值为jar</li>
<li><strong>scope</strong>:依赖的范围</li>
<li><strong>optional</strong>:标记依赖是否可选</li>
<li><strong>exclusions</strong>:用来排除传递性依赖</li>
</ul>
<h3 id="仓库的分类"><a href="#仓库的分类" class="headerlink" title="仓库的分类"></a>仓库的分类</h3><h4 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h4><p>​    一般来说，在Maven项目目录下，没有诸如lib/这样用来存放依赖文件的目录。当Maven在执行编译或测试时，如果需要使用依赖文件，它总是基于坐标使用本地仓库的依赖文件。</p>
<h4 id="远程仓库-中央仓库"><a href="#远程仓库-中央仓库" class="headerlink" title="远程仓库-中央仓库"></a>远程仓库-中央仓库</h4><p>​    由于最原始的本地仓库是空的，Maven必须知道至少一个可用的远程仓库，才能在执行Maven命令的时候下载到需要的构件。中央仓库就是这样一个默认的远程仓库，Maven的安装文件自带了中央仓库的配置。</p>
<p>​    中央仓库包含了这个世界上绝大多数流行的开源Java构件，以及源码、作者信息、SCM,信息、许可证信息等，每个月这里都会接受全世界Java程序员大概1亿次的访问，它对全世界Java开发者的贡献由此可见一斑。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/22/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><span class="page-number current">23</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=432430716&auto=1&height=66"></iframe>
      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Yuanchen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">226</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">88</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuanchen</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0
  </div>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
