<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Yuanchen&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Yuanchen&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yuanchen">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Yuanchen's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yuanchen's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/06/%E6%8F%90%E9%97%AE%E7%9A%84%E8%89%BA%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/06/%E6%8F%90%E9%97%AE%E7%9A%84%E8%89%BA%E6%9C%AF/" class="post-title-link" itemprop="url">提问的艺术</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-06 17:58:27 / Modified: 18:01:32" itemprop="dateCreated datePublished" datetime="2020-01-06T17:58:27-06:00">2020-01-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="在提问之前"><a href="#在提问之前" class="headerlink" title="在提问之前"></a>在提问之前</h2><p>在你准备要通过电子邮件、新闻群组或者聊天室提出技术问题前，请先做到以下事情：</p>
<pre><code>1. 尝试在你准备提问的论坛的旧文章中搜索答案。
2. 尝试上网搜索以找到答案。
3. 尝试阅读手册以找到答案。
4. 尝试阅读常见问题文件（FAQ）以找到答案。
5. 尝试自己检查或试验以找到答案。
6. 向你身边的强者朋友打听以找到答案。
7. 如果你是程序开发者，请尝试阅读源代码以找到答案。</code></pre><p>当你提出问题的时候，请先表明你已经做了上述的努力；这将有助于树立你并不是一个不劳而获且浪费别人的时间的提问者。如果你能一并表达在做了上述努力的过程中所<strong>学到</strong>的东西会更好，因为我们更乐于回答那些表现出能从答案中学习的人的问题。</p>
<p>运用某些策略，比如先用 Google 搜索你所遇到的各种错误信息（既搜索 <a href="http://groups.google.com/" target="_blank" rel="noopener">Google 论坛</a>，也搜索网页），这样很可能直接就找到了能解决问题的文件或邮件列表线索。即使没有结果，在邮件列表或新闻组寻求帮助时加上一句 <code>我在 Google 中搜过下列句子但没有找到什么有用的东西</code> 也是件好事，即使它只是表明了搜索引擎不能提供哪些帮助。这么做（加上搜索过的字串）也让遇到相似问题的其他人能被搜索引擎引导到你的提问来。</p>
<p>别着急，不要指望几秒钟的 Google 搜索就能解决一个复杂的问题。在向专家求助之前，再阅读一下常见问题文件（FAQ）、放轻松、坐舒服一些，再花点时间思考一下这个问题。相信我们，他们能从你的提问看出你做了多少阅读与思考，如果你是有备而来，将更有可能得到解答。不要将所有问题一股脑拋出，只因你的第一次搜索没有找到答案（或者找到太多答案）。</p>
<p>准备好你的问题，再将问题仔细的思考过一遍，因为草率的发问只能得到草率的回答，或者根本得不到任何答案。越是能表现出在寻求帮助前你为解决问题所付出的努力，你越有可能得到实质性的帮助。</p>
<p>小心别问错了问题。如果你的问题基于错误的假设，某个普通黑客（J. Random Hacker）多半会一边在心里想着<code>蠢问题…</code>， 一边用无意义的字面解释来答复你，希望着你会从问题的回答（而非你想得到的答案）中汲取教训。</p>
<p>绝不要自以为<strong>够格</strong>得到答案，你没有；你并没有。毕竟你没有为这种服务支付任何报酬。你将会是自己去<strong>挣到</strong>一个答案，靠提出有内涵的、有趣的、有思维激励作用的问题 —— 一个有潜力能贡献社区经验的问题，而不仅仅是被动的从他人处索取知识。</p>
<p>另一方面，表明你愿意在找答案的过程中做点什么是一个非常好的开端。<code>谁能给点提示？</code>、<code>我的这个例子里缺了什么？</code>以及<code>我应该检查什么地方</code>比<code>请把我需要的确切的过程贴出来</code>更容易得到答复。因为你表现出只要有人能指个正确方向，你就有完成它的能力和决心。</p>
<h2 id="当你提问时"><a href="#当你提问时" class="headerlink" title="当你提问时"></a>当你提问时</h2><h3 id="慎选提问的论坛"><a href="#慎选提问的论坛" class="headerlink" title="慎选提问的论坛"></a>慎选提问的论坛</h3><p>小心选择你要提问的场合。如果你做了下述的事情，你很可能被忽略掉或者被看作失败者：</p>
<ul>
<li>在与主题不合的论坛上贴出你的问题。</li>
<li>在探讨进阶技术问题的论坛张贴非常初级的问题；反之亦然。</li>
<li>在太多的不同新闻群组上重复转贴同样的问题（cross-post）。</li>
<li>向既非熟人也没有义务解决你问题的人发送私人电邮。</li>
</ul>
<p>黑客会剔除掉那些搞错场合的问题，以保护他们沟通的渠道不被无关的东西淹没。你不会想让这种事发生在自己身上的。</p>
<p>因此，第一步是找到对的论坛。再说一次，Google 和其它搜索引擎还是你的朋友，用它们来找到与你遭遇到困难的软硬件问题最相关的网站。通常那儿都有常见问题（FAQ）、邮件列表及相关说明文件的链接。如果你的努力（包括<strong>阅读</strong> FAQ）都没有结果，网站上也许还有报告 Bug（Bug-reporting）的流程或链接，如果是这样，链过去看看。</p>
<p>向陌生的人或论坛发送邮件最可能是风险最大的事情。举例来说，别假设一个提供丰富内容的网页的作者会想充当你的免费顾问。不要对你的问题是否会受到欢迎做太乐观的估计 – 如果你不确定，那就向别处发送，或者压根别发。</p>
<p>在选择论坛、新闻群组或邮件列表时，别太相信名字，先看看 FAQ 或者许可书以弄清楚你的问题是否切题。发文前先翻翻已有的话题，这样可以让你感受一下那里的文化。事实上，事先在新闻组或邮件列表的历史记录中搜索与你问题相关的关键词是个极好的主意，也许这样就找到答案了。即使没有，也能帮助你归纳出更好的问题。</p>
<p>别像机关枪似的一次”扫射”所有的帮助渠道，这就像大喊大叫一样会使人不快。要一个一个地来。</p>
<p>搞清楚你的主题！最典型的错误之一是在某种致力于跨平台可移植的语言、套件或工具的论坛中提关于 Unix 或 Windows 操作系统程序界面的问题。如果你不明白为什么这是大错，最好在搞清楚这之间差异之前什么也别问。</p>
<p>一般来说，在仔细挑选的公共论坛中提问，会比在私有论坛中提同样的问题更容易得到有用的回答。有几个理由可以支持这点，一是看潜在的回复者有多少，二是看观众有多少。黑客较愿意回答那些能帮助到许多人的问题。</p>
<p>可以理解的是，老练的黑客和一些热门软件的作者正在接受过多的错发信息。就像那根最后压垮骆驼背的稻草一样，你的加入也有可能使情况走向极端 —— 已经好几次了，一些热门软件的作者从自己软件的支持中抽身出来，因为伴随而来涌入其私人邮箱的无用邮件变得无法忍受。</p>
<h3 id="Stack-Overflow"><a href="#Stack-Overflow" class="headerlink" title="Stack Overflow"></a>Stack Overflow</h3><p>搜索，<strong>然后</strong> 在 Stack Exchange 问。</p>
<p>近年来，Stack Exchange community 社区已经成为回答技术及其他问题的主要渠道，尤其是那些开放源码的项目。</p>
<p>因为 Google 索引是即时的，在看 Stack Exchange 之前先在 Google 搜索。有很高的机率某人已经问了一个类似的问题，而且 Stack Exchange 网站们往往会是搜索结果中最前面几个。如果你在 Google 上没有找到任何答案，你再到特定相关主题的网站去找。用标签（Tag）搜索能让你更缩小你的搜索结果。</p>
<p>Stack Exchange 已经成长到<a href="http://stackexchange.com/sites" target="_blank" rel="noopener">超过一百个网站</a>，以下是最常用的几个站：</p>
<ul>
<li>Super User 是问一些通用的电脑问题，如果你的问题跟代码或是写程序无关，只是一些网络连线之类的，请到这里。</li>
<li>Stack Overflow 是问写程序有关的问题。</li>
<li>Server Fault 是问服务器和网管相关的问题。</li>
</ul>
<h3 id="网站和-IRC-论坛"><a href="#网站和-IRC-论坛" class="headerlink" title="网站和 IRC 论坛"></a>网站和 IRC 论坛</h3><p>本地的使用者群组（user group），或者你所用的 Linux 发行版本也许正在宣传他们的网页论坛或 IRC 频道，并提供新手帮助（在一些非英语国家，新手论坛很可能还是邮件列表）， 这些地方是开始提问的好首选，特别是当你觉得遇到的也许只是相对简单或者很普通的问题时。有广告赞助的 IRC 频道是公开欢迎提问的地方，通常可以即时得到回应。</p>
<p>事实上，如果程序出的问题只发生在特定 Linux 发行版提供的版本（这很常见），最好先去该发行版的论坛或邮件列表中提问，再到程序本身的论坛或邮件列表提问。（否则）该项目的黑客可能仅仅回复 “用<strong>我们的</strong>版本”。</p>
<p>在任何论坛发文以前，先确认一下有没有搜索功能。如果有，就试着搜索一下问题的几个关键词，也许这会有帮助。如果在此之前你已做过通用的网页搜索（你也该这样做），还是再搜索一下论坛，搜索引擎有可能没来得及索引此论坛的全部内容。</p>
<p>通过论坛或 IRC 频道来提供使用者支持服务有增长的趋势，电子邮件则大多为项目开发者间的交流而保留。所以最好先在论坛或 IRC 中寻求与该项目相关的协助。</p>
<p>在使用 IRC 的时候，首先最好不要发布很长的问题描述，有些人称之为频道洪水。最好通过一句话的问题描述来开始聊天。</p>
<h3 id="第二步，使用项目邮件列表"><a href="#第二步，使用项目邮件列表" class="headerlink" title="第二步，使用项目邮件列表"></a>第二步，使用项目邮件列表</h3><p>当某个项目提供开发者邮件列表时，要向列表而不是其中的个别成员提问，即使你确信他能最好地回答你的问题。查一查项目的文件和首页，找到项目的邮件列表并使用它。有几个很好的理由支持我们采用这种办法：</p>
<ul>
<li>任何好到需要向个别开发者提出的问题，也将对整个项目群组有益。反之，如果你认为自己的问题对整个项目群组来说太愚蠢，也不能成为骚扰个别开发者的理由。</li>
<li>向列表提问可以分散开发者的负担，个别开发者（尤其是项目领导人）也许太忙以至于没法回答你的问题。</li>
<li>大多数邮件列表都会被存档，那些被存档的内容将被搜索引擎索引。如果你向列表提问并得到解答，将来其它人可以通过网页搜索找到你的问题和答案，也就不用再次发问了。</li>
<li>如果某些问题经常被问到，开发者可以利用此信息来改进说明文件或软件本身，以使其更清楚。如果只是私下提问，就没有人能看到最常见问题的完整场景。</li>
</ul>
<p>如果一个项目既有”使用者” 也有”开发者”（或”黑客”）邮件列表或论坛，而你又不会动到那些源代码，那么就向”使用者”列表或论坛提问。不要假设自己会在开发者列表中受到欢迎，那些人多半会将你的提问视为干扰他们开发的噪音。</p>
<p>然而，如果你<strong>确信</strong>你的问题很特别，而且在”使用者” 列表或论坛中几天都没有回复，可以试试前往”开发者”列表或论坛发问。建议你在张贴前最好先暗地里观察几天以了解那里的行事方式（事实上这是参与任何私有或半私有列表的好主意）</p>
<p>如果你找不到一个项目的邮件列表，而只能查到项目维护者的电子邮件地址，尽管向他发信。即使是在这种情况下，也别假设（项目）邮件列表不存在。在你的电子邮件中，请陈述你已经试过但没有找到合适的邮件列表，也提及你不反对将自己的邮件转发给他人（许多人认为，即使没什么秘密，私人电子邮件也不应该被公开。通过允许将你的电子邮件转发他人，你给了相应人员处置你邮件的选择）。</p>
<h3 id="使用有意义且描述明确的标题"><a href="#使用有意义且描述明确的标题" class="headerlink" title="使用有意义且描述明确的标题"></a>使用有意义且描述明确的标题</h3><p>在邮件列表、新闻群组或论坛中，大约 50 字以内的标题是抓住资深专家注意力的好机会。别用喋喋不休的<code>帮帮忙</code>、<code>跪求</code>、<code>急</code>（更别说<code>救命啊！！！！</code>这样让人反感的话，用这种标题会被条件反射式地忽略）来浪费这个机会。不要妄想用你的痛苦程度来打动我们，而应该是在这点空间中使用极简单扼要的描述方式来提出问题。</p>
<p>一个好标题范例是<code>目标 —— 差异</code>式的描述，许多技术支持组织就是这样做的。在<code>目标</code>部分指出是哪一个或哪一组东西有问题，在<code>差异</code>部分则描述与期望的行为不一致的地方。</p>
<blockquote>
<p>蠢问题：救命啊！我的笔记本电脑不能正常显示了！</p>
</blockquote>
<blockquote>
<p>聪明问题：X.org 6.8.1 的鼠标光标会变形，某牌显卡 MV1005 芯片组。</p>
</blockquote>
<blockquote>
<p>更聪明问题：X.org 6.8.1 的鼠标光标，在某牌显卡 MV1005 芯片组环境下 - 会变形。</p>
</blockquote>
<p>编写<code>目标 —— 差异</code> 式描述的过程有助于你组织对问题的细致思考。是什么被影响了？ 仅仅是鼠标光标或者还有其它图形？只在 X.org 的 X 版中出现？或只是出现在 6.8.1 版中？ 是针对某牌显卡芯片组？或者只是其中的 MV1005 型号？ 一个黑客只需瞄一眼就能够立即明白你的环境<strong>和</strong>你遇到的问题。</p>
<p>总而言之，请想像一下你正在一个只显示标题的存档讨论串（Thread）索引中查寻。让你的标题更好地反映问题，可使下一个搜索类似问题的人能够关注这个讨论串，而不用再次提问相同的问题。</p>
<p>如果你想在回复中提出问题，记得要修改内容标题，以表明你是在问一个问题， 一个看起来像 <code>Re: 测试</code> 或者 <code>Re: 新 bug</code> 的标题很难引起足够重视。另外，在不影响连贯性之下，适当引用并删减前文的内容，能给新来的读者留下线索。</p>
<p>对于讨论串，不要直接点击回复来开始一个全新的讨论串，这将限制你的观众。因为有些邮件阅读程序，比如 mutt ，允许使用者按讨论串排序并通过折叠讨论串来隐藏消息，这样做的人永远看不到你发的消息。</p>
<p>仅仅改变标题还不够。mutt 和其它一些邮件阅读程序还会检查邮件标题以外的其它信息，以便为其指定讨论串。所以宁可发一个全新的邮件。</p>
<p>在网页论坛上，好的提问方式稍有不同，因为讨论串与特定的信息紧密结合，并且通常在讨论串外就看不到里面的内容，故通过回复提问，而非改变标题是可接受的。不是所有论坛都允许在回复中出现分离的标题，而且这样做了基本上没有人会去看。不过，通过回复提问，这本身就是暧昧的做法，因为它们只会被正在查看该标题的人读到。所以，除非你<strong>只想</strong>在该讨论串当前活跃的人群中提问，不然还是另起炉灶比较好。</p>
<h3 id="使问题容易回复"><a href="#使问题容易回复" class="headerlink" title="使问题容易回复"></a>使问题容易回复</h3><p>以<code>请将你的回复发送到……</code>来结束你的问题多半会使你得不到回答。如果你觉得花几秒钟在邮件客户端设置一下回复地址都麻烦，我们也觉得花几秒钟思考你的问题更麻烦。如果你的邮件程序不支持这样做，<a href="http://linuxmafia.com/faq/Mail/muas.html" target="_blank" rel="noopener">换个好点的</a>；如果是操作系统不支持这种邮件程序，也换个好点的。</p>
<p>在论坛，要求通过电子邮件回复是非常无礼的，除非你认为回复的信息可能比较敏感（有人会为了某些未知的原因，只让你而不是整个论坛知道答案）。如果你只是想在有人回复讨论串时得到电子邮件提醒，可以要求网页论坛发送给你。几乎所有论坛都支持诸如<code>追踪此讨论串</code>、<code>有回复时发送邮件提醒</code>等功能。</p>
<h3 id="用清晰、正确、精准并语法正确的语句"><a href="#用清晰、正确、精准并语法正确的语句" class="headerlink" title="用清晰、正确、精准并语法正确的语句"></a>用清晰、正确、精准并语法正确的语句</h3><p>我们从经验中发现，粗心的提问者通常也会粗心的写程序与思考（我敢打包票）。回答粗心大意者的问题很不值得，我们宁愿把时间耗在别处。</p>
<p>正确的拼写、标点符号和大小写是很重要的。一般来说，如果你觉得这样做很麻烦，不想在乎这些，那我们也觉得麻烦，不想在乎你的提问。花点额外的精力斟酌一下字句，用不着太僵硬与正式 —— 事实上，黑客文化很看重能准确地使用非正式、俚语和幽默的语句。但它<strong>必须很</strong>准确，而且有迹象表明你是在思考和关注问题。</p>
<p>正确地拼写、使用标点和大小写，不要将<code>its</code>混淆为<code>it&#39;s</code>，<code>loose</code>搞成<code>lose</code>或者将<code>discrete</code>弄成<code>discreet</code>。不要<strong>全部用大写</strong>，这会被视为无礼的大声嚷嚷（全部小写也好不到哪去，因为不易阅读。<a href="http://en.wikipedia.org/wiki/Alan_Cox" target="_blank" rel="noopener">Alan Cox</a> 也许可以这样做，但你不行）。</p>
<p>更白话的说，如果你写得像是个半文盲[译注：<a href="http://zh.wikipedia.org/wiki/小白" target="_blank" rel="noopener">小白</a>]，那多半得不到理睬。也不要使用即时通信中的简写或<a href="http://zh.wikipedia.org/wiki/火星文" target="_blank" rel="noopener">火星文</a>，如将<code>的</code>简化为<code>d</code>会使你看起来像一个为了少打几个键而省字的小白。更糟的是，如果像个小孩似地鬼画符那绝对是在找死，可以肯定没人会理你（或者最多是给你一大堆指责与挖苦）。</p>
<p>如果在使用非母语的论坛提问，你可以犯点拼写和语法上的小错，但决不能在思考上马虎（没错，我们通常能弄清两者的分别）。同时，除非你知道回复者使用的语言，否则请使用英语书写。繁忙的黑客一般会直接删除用他们看不懂语言写的消息。在网络上英语是通用语言，用英语书写可以将你的问题在尚未被阅读就被直接删除的可能性降到最低。</p>
<p>如果英文是你的外语（Second language），提示潜在回复者你有潜在的语言困难是很好的：<br>[译注：以下附上原文以供使用]</p>
<blockquote>
<p>English is not my native language; please excuse typing errors.</p>
</blockquote>
<ul>
<li>英文不是我的母语，请原谅我的错字或语法。</li>
</ul>
<blockquote>
<p>If you speak $LANGUAGE, please email/PM me;<br>I may need assistance translating my question.</p>
</blockquote>
<ul>
<li>如果你说<strong>某语言</strong>，请寄信/私讯给我；我需要有人协助我翻译我的问题。</li>
</ul>
<blockquote>
<p>I am familiar with the technical terms,<br>but some slang expressions and idioms are difficult for me.</p>
</blockquote>
<ul>
<li>我对技术名词很熟悉，但对于俗语或是特别用法比较不甚了解。</li>
</ul>
<blockquote>
<p>I’ve posted my question in $LANGUAGE and English.<br>I’ll be glad to translate responses, if you only use one or the other.</p>
</blockquote>
<ul>
<li>我把我的问题用<strong>某语言</strong>和英文写出来，如果你只用一种语言回答，我会乐意将其翻译成另一种。</li>
</ul>
<h3 id="使用易于读取且标准的文件格式发送问题"><a href="#使用易于读取且标准的文件格式发送问题" class="headerlink" title="使用易于读取且标准的文件格式发送问题"></a>使用易于读取且标准的文件格式发送问题</h3><p>如果你人为地将问题搞得难以阅读，它多半会被忽略，人们更愿读易懂的问题，所以：</p>
<ul>
<li>使用纯文字而不是 HTML (<a href="http://archive.birdhouse.org/etc/evilmail.html" target="_blank" rel="noopener">关闭 HTML</a> 并不难）。</li>
<li>使用 MIME 附件通常是可以的，前提是真正有内容（譬如附带的源代码或 patch），而不仅仅是邮件程序生成的模板（譬如只是信件内容的拷贝）。</li>
<li>不要发送一段文字只是一行句子但自动换行后会变成多行的邮件（这使得回复部分内容非常困难）。设想你的读者是在 80 个字符宽的终端机上阅读邮件，最好设置你的换行分割点小于 80 字。</li>
<li>但是，对一些特殊的文件<strong>不要</strong>设置固定宽度（譬如日志档案拷贝或会话记录）。数据应该原样包含，让回复者有信心他们看到的是和你看到的一样的东西。</li>
<li>在英语论坛中，不要使用<code>Quoted-Printable</code> MIME 编码发送消息。这种编码对于张贴非 ASCII 语言可能是必须的，但很多邮件程序并不支持这种编码。当它们处理换行时，那些文本中四处散布的<code>=20</code>符号既难看也分散注意力，甚至有可能破坏内容的语意。</li>
<li>绝对，<strong>永远</strong>不要指望黑客们阅读使用封闭格式编写的文档，像微软公司的 Word 或 Excel 文件等。大多数黑客对此的反应就像有人将还在冒热气的猪粪倒在你家门口时你的反应一样。即便他们能够处理，他们也很厌恶这么做。</li>
<li>如果你从使用 Windows 的电脑发送电子邮件，关闭微软愚蠢的<code>智能引号</code>功能 （从[选项] &gt; [校订] &gt; [自动校正选项]，勾选掉<code>智能引号</code>单选框），以免在你的邮件中到处散布垃圾字符。</li>
<li>在论坛，勿滥用<code>表情符号</code>和<code>HTML</code>功能（当它们提供时）。一两个表情符号通常没有问题，但花哨的彩色文本倾向于使人认为你是个无能之辈。过滥地使用表情符号、色彩和字体会使你看来像个傻笑的小姑娘。这通常不是个好主意，除非你只是对性而不是对答案感兴趣。</li>
</ul>
<p>如果你使用图形用户界面的邮件程序（如微软公司的 Outlook 或者其它类似的），注意它们的默认设置不一定满足这些要求。大多数这类程序有基于选单的<code>查看源代码</code>命令，用它来检查发送文件夹中的邮件，以确保发送的是纯文本文件同时没有一些奇怪的字符。</p>
<h3 id="精确地描述问题并言之有物"><a href="#精确地描述问题并言之有物" class="headerlink" title="精确地描述问题并言之有物"></a>精确地描述问题并言之有物</h3><ul>
<li>仔细、清楚地描述你的问题或 Bug 的症状。</li>
<li>描述问题发生的环境（机器配置、操作系统、应用程序、以及相关的信息），提供经销商的发行版和版本号（如：<code>Fedora Core 4</code>、<code>Slackware 9.1</code>等）。</li>
<li>描述在提问前你是怎样去研究和理解这个问题的。</li>
<li>描述在提问前为确定问题而采取的诊断步骤。</li>
<li>描述最近做过什么可能相关的硬件或软件变更。</li>
<li>尽可能的提供一个可以<code>重现这个问题的可控环境</code>的方法。</li>
</ul>
<p>尽量去揣测一个黑客会怎样反问你，在你提问之前预先将黑客们可能遇到的问题回答一遍。</p>
<p>以上几点中，当你报告的是你认为可能在代码中的问题时，给黑客一个可以重现你的问题的环境尤其重要。当你这么做时，你得到有效的回答的机会和速度都会大大的提升。</p>
<p><a href="http://www.chiark.greenend.org.uk/~sgtatham/" target="_blank" rel="noopener">Simon Tatham</a> 写过一篇名为《<a href="http://www.chiark.greenend.org.uk/~sgtatham/bugs-cn.html" target="_blank" rel="noopener">如何有效的报告 Bug</a>》的出色文章。强力推荐你也读一读。</p>
<h3 id="话不在多而在精"><a href="#话不在多而在精" class="headerlink" title="话不在多而在精"></a>话不在多而在精</h3><p>你需要提供精确有内容的信息。这并不是要求你简单的把成堆的出错代码或者资料完全转录到你的提问中。如果你有庞大而复杂的测试样例能重现程序挂掉的情境，尽量将它剪裁得越小越好。</p>
<p>这样做的用处至少有三点。<br>第一，表现出你为简化问题付出了努力，这可以使你得到回答的机会增加；<br>第二，简化问题使你更有可能得到<strong>有用</strong>的答案；<br>第三，在精炼你的 bug 报告的过程中，你很可能就自己找到了解决方法或权宜之计。</p>
<h3 id="别动辄声称找到-Bug"><a href="#别动辄声称找到-Bug" class="headerlink" title="别动辄声称找到 Bug"></a>别动辄声称找到 Bug</h3><p>当你在使用软件中遇到问题，除非你非常、<strong>非常</strong>的有根据，不要动辄声称找到了 Bug。提示：除非你能提供解决问题的源代码补丁，或者提供回归测试来表明前一版本中行为不正确，否则你都多半不够完全确信。这同样适用在网页和文件，如果你（声称）发现了文件的<code>Bug</code>，你应该能提供相应位置的修正或替代文件。</p>
<p>请记得，还有许多其它使用者没遇到你发现的问题，否则你在阅读文件或搜索网页时就应该发现了（你在抱怨前<a href="#在提问之前">已经做了这些，是吧</a>？）。这也意味着很有可能是你弄错了而不是软件本身有问题。</p>
<p>编写软件的人总是非常辛苦地使它尽可能完美。如果你声称找到了 Bug，也就是在质疑他们的能力，即使你是对的，也有可能会冒犯到其中某部分人。当你在标题中嚷嚷着有<code>Bug</code>时，这尤其严重。</p>
<p>提问时，即使你私下非常确信已经发现一个真正的 Bug，最好写得像是<strong>你</strong>做错了什么。如果真的有 Bug，你会在回复中看到这点。这样做的话，如果真有 Bug，维护者就会向你道歉，这总比你惹恼别人然后欠别人一个道歉要好一点。</p>
<h3 id="低声下气不能代替你的功课"><a href="#低声下气不能代替你的功课" class="headerlink" title="低声下气不能代替你的功课"></a>低声下气不能代替你的功课</h3><p>有些人明白他们不该粗鲁或傲慢的提问并要求得到答复，但他们选择另一个极端 —— 低声下气：<code>我知道我只是个可悲的新手，一个撸瑟，但...</code>。这既使人困扰，也没有用，尤其是伴随着与实际问题含糊不清的描述时更令人反感。</p>
<p>别用原始灵长类动物的把戏来浪费你我的时间。取而代之的是，尽可能清楚地描述背景条件和你的问题情况。这比低声下气更好地定位了你的位置。</p>
<p>有时网页论坛会设有专为新手提问的版面，如果你真的认为遇到了初学者的问题，到那去就是了，但一样别那么低声下气。</p>
<h3 id="描述问题症状而非你的猜测"><a href="#描述问题症状而非你的猜测" class="headerlink" title="描述问题症状而非你的猜测"></a>描述问题症状而非你的猜测</h3><p>告诉黑客们你认为问题是怎样造成的并没什么帮助。（如果你的推断如此有效，还用向别人求助吗？），因此要确信你原原本本告诉了他们问题的症状，而不是你的解释和理论；让黑客们来推测和诊断。如果你认为陈述自己的猜测很重要，清楚地说明这只是你的猜测，并描述为什么它们不起作用。</p>
<p><strong>蠢问题</strong></p>
<blockquote>
<p>我在编译内核时接连遇到 SIG11 错误，<br>我怀疑某条飞线搭在主板的走线上了，这种情况应该怎样检查最好？</p>
</blockquote>
<p><strong>聪明问题</strong></p>
<blockquote>
<p>我的组装电脑是 FIC-PA2007 主机板搭载 AMD K6/233 CPU（威盛 Apollo VP2 芯片组），<br>256MB Corsair PC133 SDRAM 内存，在编译内核时，从开机 20 分钟以后就频频产生 SIG11 错误，<br>但是在头 20 分钟内从没发生过相同的问题。重新启动也没有用，但是关机一晚上就又能工作 20 分钟。<br>所有内存都换过了，没有效果。相关部分的标准编译记录如下…。</p>
</blockquote>
<p>由于以上这点似乎让许多人觉得难以配合，这里有句话可以提醒你：<code>所有的诊断专家都来自密苏里州。</code> 美国国务院的官方座右铭则是：<code>让我看看</code>（出自国会议员 Willard D. Vandiver 在 1899 年时的讲话：<code>我来自一个出产玉米，棉花，牛蒡和民主党人的国家，滔滔雄辩既不能说服我，也不会让我满意。我来自密苏里州，你必须让我看看。</code>） 针对诊断者而言，这并不是一种怀疑，而只是一种真实而有用的需求，以便让他们看到的是与你看到的原始证据尽可能一致的东西，而不是你的猜测与归纳的结论。所以，大方的展示给我们看吧！</p>
<h3 id="按发生时间先后列出问题症状"><a href="#按发生时间先后列出问题症状" class="headerlink" title="按发生时间先后列出问题症状"></a>按发生时间先后列出问题症状</h3><p>问题发生前的一系列操作，往往就是对找出问题最有帮助的线索。因此，你的说明里应该包含你的操作步骤，以及机器和软件的反应，直到问题发生。在命令行处理的情况下，提供一段操作记录（例如运行脚本工具所生成的），并引用相关的若干行（如 20 行）记录会非常有帮助。</p>
<p>如果挂掉的程序有诊断选项（如 -v 的详述开关），试着选择这些能在记录中增加调试信息的选项。记住，<code>多</code>不等于<code>好</code>。试着选取适当的调试级别以便提供有用的信息而不是让读者淹没在垃圾中。</p>
<p>如果你的说明很长（如超过四个段落），在开头简述问题，接下来再按时间顺序详述会有所帮助。这样黑客们在读你的记录时就知道该注意哪些内容了。</p>
<h3 id="描述目标而不是过程"><a href="#描述目标而不是过程" class="headerlink" title="描述目标而不是过程"></a>描述目标而不是过程</h3><p>如果你想弄清楚如何做某事（而不是报告一个 Bug），在开头就描述你的目标，然后才陈述重现你所卡住的特定步骤。</p>
<p>经常寻求技术帮助的人在心中有个更高层次的目标，而他们在自以为能达到目标的特定道路上被卡住了，然后跑来问该怎么走，但没有意识到这条路本身就有问题。结果要费很大的劲才能搞定。</p>
<p><strong>蠢问题</strong></p>
<blockquote>
<p>我怎样才能从某绘图程序的颜色选择器中取得十六进制的的 RGB 值？</p>
</blockquote>
<p><strong>聪明问题</strong></p>
<blockquote>
<p>我正试着用替换一幅图片的色码（color table）成自己选定的色码，我现在知道的唯一方法是编辑每个色码区块（table slot），<br>但却无法从某绘图程序的颜色选择器取得十六进制的的 RGB 值。</p>
</blockquote>
<p>第二种提问法比较聪明，你可能得到像是<code>建议采用另一个更合适的工具</code>的回复。</p>
<h3 id="别要求使用私人电邮回复"><a href="#别要求使用私人电邮回复" class="headerlink" title="别要求使用私人电邮回复"></a>别要求使用私人电邮回复</h3><p>黑客们认为问题的解决过程应该公开、透明，此过程中如果更有经验的人注意到不完整或者不当之处，最初的回复才能够、也应该被纠正。同时，作为提供帮助者可以得到一些奖励，奖励就是他的能力和学识被其他同行看到。</p>
<p>当你要求私下回复时，这个过程和奖励都被中止。别这样做，让<strong>回复者</strong>来决定是否私下回答 —— 如果他真这么做了，通常是因为他认为问题编写太差或者太肤浅，以至于对其它人没有兴趣。</p>
<p>这条规则存在一条有限的例外，如果你确信提问可能会引来大量雷同的回复时，那么这个神奇的提问句会是<code>向我发电邮，我将为论坛归纳这些回复</code>。试着将邮件列表或新闻群组从洪水般的雷同回复中解救出来是非常有礼貌的 —— 但你必须信守诺言。</p>
<h3 id="清楚明确的表达你的问题以及需求"><a href="#清楚明确的表达你的问题以及需求" class="headerlink" title="清楚明确的表达你的问题以及需求"></a>清楚明确的表达你的问题以及需求</h3><p>漫无边际的提问是近乎无休无止的时间黑洞。最有可能给你有用答案的人通常也正是最忙的人（他们忙是因为要亲自完成大部分工作）。这样的人对无节制的时间黑洞相当厌恶，所以他们也倾向于厌恶那些漫无边际的提问。</p>
<p>如果你明确表述需要回答者做什么（如提供指点、发送一段代码、检查你的补丁、或是其他等等），就最有可能得到有用的答案。因为这会定出一个时间和精力的上限，便于回答者能集中精力来帮你。这么做很棒。</p>
<p>要理解专家们所处的世界，请把专业技能想像为充裕的资源，而回复的时间则是稀缺的资源。你要求他们奉献的时间越少，你越有可能从真正专业而且很忙的专家那里得到解答。</p>
<p>所以，界定一下你的问题，使专家花在辨识你的问题和回答所需要付出的时间减到最少，这技巧对你有用答案相当有帮助 —— 但这技巧通常和简化问题有所区别。因此，问<code>我想更好的理解 X，可否指点一下哪有好一点说明？</code>通常比问<code>你能解释一下 X 吗？</code>更好。如果你的代码不能运作，通常请别人看看哪里有问题，比要求别人替你改正要明智得多。</p>
<h3 id="询问有关代码的问题时"><a href="#询问有关代码的问题时" class="headerlink" title="询问有关代码的问题时"></a>询问有关代码的问题时</h3><p>别要求他人帮你调试有问题的代码，不提示一下应该从何入手。张贴几百行的代码，然后说一声：<code>它不能工作</code>会让你完全被忽略。只贴几十行代码，然后说一句：<code>在第七行以后，我期待它显示 &lt;x&gt;，但实际出现的是 &lt;y&gt;</code>比较有可能让你得到回应。</p>
<p>最有效描述程序问题的方法是提供最精简的 Bug 展示测试用例（bug-demonstrating test case）。什么是最精简的测试用例？那是问题的缩影；一小个程序片段能<strong>刚好</strong>展示出程序的异常行为，而不包含其他令人分散注意力的内容。怎么制作最精简的测试用例？如果你知道哪一行或哪一段代码会造成异常的行为，复制下来并加入足够重现这个状况的代码（例如，足以让这段代码能被编译/直译/被应用程序处理）。如果你无法将问题缩减到一个特定区块，就复制一份代码并移除不影响产生问题行为的部分。总之，测试用例越小越好（查看<a href="#话不在多而在精">话不在多而在精</a>一节）。</p>
<p>一般而言，要得到一段相当精简的测试用例并不太容易，但永远先尝试这样做的是种好习惯。这种方式可以帮助你了解如何自行解决这个问题 —— 而且即使你的尝试不成功，黑客们也会看到你在尝试取得答案的过程中付出了努力，这可以让他们更愿意与你合作。</p>
<p>如果你只是想让别人帮忙审查（Review）一下代码，在信的开头就要说出来，并且一定要提到你认为哪一部分特别需要关注以及为什么。</p>
<h3 id="别把自己家庭作业的问题贴上来"><a href="#别把自己家庭作业的问题贴上来" class="headerlink" title="别把自己家庭作业的问题贴上来"></a>别把自己家庭作业的问题贴上来</h3><p>黑客们很擅长分辨哪些问题是家庭作业式的问题；因为我们中的大多数都曾自己解决这类问题。同样，这些问题得由<strong>你</strong>来搞定，你会从中学到东西。你可以要求给点提示，但别要求得到完整的解决方案。</p>
<p>如果你怀疑自己碰到了一个家庭作业式的问题，但仍然无法解决，试试在使用者群组，论坛或（最后一招）在项目的<strong>使用者</strong>邮件列表或论坛中提问。尽管黑客们<strong>会</strong>看出来，但一些有经验的使用者也许仍会给你一些提示。</p>
<h3 id="去掉无意义的提问句"><a href="#去掉无意义的提问句" class="headerlink" title="去掉无意义的提问句"></a>去掉无意义的提问句</h3><p>避免用无意义的话结束提问，例如<code>有人能帮我吗？</code>或者<code>这有答案吗？</code>。</p>
<p>首先：如果你对问题的描述不是很好，这样问更是画蛇添足。</p>
<p>其次：由于这样问是画蛇添足，黑客们会很厌烦你 —— 而且通常会用逻辑上正确，但毫无意义的回答来表示他们的蔑视， 例如：<code>没错，有人能帮你</code>或者<code>不，没答案</code>。</p>
<p>一般来说，避免用 <code>是或否</code>、<code>对或错</code>、<code>有或没有</code>类型的问句，除非你想得到<a href="http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/questions-with-yes-or-no-answers.html" target="_blank" rel="noopener">是或否类型的回答</a>。</p>
<h3 id="即使你很急也不要在标题写紧急"><a href="#即使你很急也不要在标题写紧急" class="headerlink" title="即使你很急也不要在标题写紧急"></a>即使你很急也不要在标题写<code>紧急</code></h3><p>这是你的问题，不是我们的。宣称<code>紧急</code>极有可能事与愿违：大多数黑客会直接删除无礼和自私地企图即时引起关注的问题。更严重的是，<code>紧急</code>这个字（或是其他企图引起关注的标题）通常会被垃圾信过滤器过滤掉 —— 你希望能看到你问题的人可能永远也看不到。</p>
<p>有半个例外的情况是，如果你是在一些很高调，会使黑客们兴奋的地方，也许值得这样去做。在这种情况下，如果你有时间压力，也很有礼貌地提到这点，人们也许会有兴趣回答快一点。</p>
<p>当然，这风险很大，因为黑客们兴奋的点多半与你的不同。譬如从 NASA 国际空间站（International Space Station）发这样的标题没有问题，但用自我感觉良好的慈善行为或政治原因发肯定不行。事实上，张贴诸如<code>紧急：帮我救救这个毛绒绒的小海豹！</code>肯定让你被黑客忽略或惹恼他们，即使他们认为毛绒绒的小海豹很重要。</p>
<p>如果你觉得这点很不可思议，最好再把这份指南剩下的内容多读几遍，直到你弄懂了再发文。</p>
<h3 id="礼多人不怪，而且有时还很有帮助"><a href="#礼多人不怪，而且有时还很有帮助" class="headerlink" title="礼多人不怪，而且有时还很有帮助"></a>礼多人不怪，而且有时还很有帮助</h3><p>彬彬有礼，多用<code>请</code>和<code>谢谢您的关注</code>，或<code>谢谢你的关照</code>。让大家都知道你对他们花时间免费提供帮助心存感激。</p>
<p>坦白说，这一点并没有比清晰、正确、精准并合法语法和避免使用专用格式重要（也不能取而代之）。黑客们一般宁可读有点唐突但技术上鲜明的 Bug 报告，而不是那种有礼但含糊的报告。（如果这点让你不解，记住我们是按问题能教给我们什么来评价问题的价值的）</p>
<p>然而，如果你有一串的问题待解决，客气一点肯定会增加你得到有用回应的机会。</p>
<p>（我们注意到，自从本指南发布后，从资深黑客那里得到的唯一严重缺陷反馈，就是对预先道谢这一条。一些黑客觉得<code>先谢了</code>意味着事后就不用再感谢任何人的暗示。我们的建议是要么先说<code>先谢了</code>，<strong>然后</strong>事后再对回复者表示感谢，或者换种方式表达感激，譬如用<code>谢谢你的关注</code>或<code>谢谢你的关照</code>。）</p>
<h3 id="问题解决后，加个简短的补充说明"><a href="#问题解决后，加个简短的补充说明" class="headerlink" title="问题解决后，加个简短的补充说明"></a>问题解决后，加个简短的补充说明</h3><p>问题解决后，向所有帮助过你的人发个说明，让他们知道问题是怎样解决的，并再一次向他们表示感谢。如果问题在新闻组或者邮件列表中引起了广泛关注，应该在那里贴一个说明比较恰当。</p>
<p>最理想的方式是向最初提问的话题回复此消息，并在标题中包含<code>已修正</code>，<code>已解决</code>或其它同等含义的明显标记。在人来人往的邮件列表里，一个看见讨论串<code>问题 X</code>和<code>问题 X - 已解决</code>的潜在回复者就明白不用再浪费时间了（除非他个人觉得<code>问题 X</code>的有趣），因此可以利用此时间去解决其它问题。</p>
<p>补充说明不必很长或是很深入；简单的一句<code>你好，原来是网线出了问题！谢谢大家 – Bill</code>比什么也不说要来的好。事实上，除非结论真的很有技术含量，否则简短可爱的小结比长篇大论更好。说明问题是怎样解决的，但大可不必将解决问题的过程复述一遍。</p>
<p>对于有深度的问题，张贴调试记录的摘要是有帮助的。描述问题的最终状态，说明是什么解决了问题，在此<strong>之后</strong>才指明可以避免的盲点。避免盲点的部分应放在正确的解决方案和其它总结材料之后，而不要将此信息搞成侦探推理小说。列出那些帮助过你的名字，会让你交到更多朋友。</p>
<p>除了有礼貌和有内涵以外，这种类型的补充也有助于他人在邮件列表/新闻群组/论坛中搜索到真正解决你问题的方案，让他们也从中受益。</p>
<p>至少，这种补充有助于让每位参与协助的人因问题的解决而从中得到满足感。如果你自己不是技术专家或者黑客，那就相信我们，这种感觉对于那些你向他们求助的大师或者专家而言，是非常重要的。问题悬而未决会让人灰心；黑客们渴望看到问题被解决。好人有好报，满足他们的渴望，你会在下次提问时尝到甜头。</p>
<p>思考一下怎样才能避免他人将来也遇到类似的问题，自问写一份文件或加个常见问题（FAQ）会不会有帮助。如果是的话就将它们发给维护者。</p>
<p>在黑客中，这种良好的后继行动实际上比传统的礼节更为重要，也是你如何透过善待他人而赢得声誉的方式，这是非常有价值的资产。</p>
<h2 id="如何解读答案"><a href="#如何解读答案" class="headerlink" title="如何解读答案"></a>如何解读答案</h2><h3 id="RTFM-和-STFW：如何知道你已完全搞砸了"><a href="#RTFM-和-STFW：如何知道你已完全搞砸了" class="headerlink" title="RTFM 和 STFW：如何知道你已完全搞砸了"></a>RTFM 和 STFW：如何知道你已完全搞砸了</h3><p>有一个古老而神圣的传统：如果你收到<code>RTFM （Read The Fucking Manual）</code>的回应，回答者认为你<strong>应该去读他妈的手册</strong>。当然，基本上他是对的，你应该去读一读。</p>
<p>RTFM 有一个年轻的亲戚。如果你收到<code>STFW（Search The Fucking Web）</code>的回应，回答者认为你<strong>应该到他妈的网上搜索</strong>。那人多半也是对的，去搜索一下吧。（更温和一点的说法是 <strong><a href="http://lmgtfy.com/" target="_blank" rel="noopener">Google 是你的朋友</a></strong>！）</p>
<p>在论坛，你也可能被要求去爬爬论坛的旧文。事实上，有人甚至可能热心地为你提供以前解决此问题的讨论串。但不要依赖这种关照，提问前应该先搜索一下旧文。</p>
<p>通常，用这两句之一回答你的人会给你一份包含你需要内容的手册或者一个网址，而且他们打这些字的时候也正在读着。这些答复意味着回答者认为</p>
<ul>
<li><strong>你需要的信息非常容易获得</strong>；</li>
<li><strong>你自己去搜索这些信息比灌给你，能让你学到更多</strong>。</li>
</ul>
<p>你不应该因此不爽；<strong>依照黑客的标准，他已经表示了对你一定程度的关注，而没有对你的要求视而不见</strong>。你应该对他祖母般的慈祥表示感谢。</p>
<h3 id="如果还是搞不懂"><a href="#如果还是搞不懂" class="headerlink" title="如果还是搞不懂"></a>如果还是搞不懂</h3><p>如果你看不懂回应，别立刻要求对方解释。像你以前试着自己解决问题时那样（利用手册，FAQ，网络，身边的高手），先试着去搞懂他的回应。如果你真的需要对方解释，记得表现出你已经从中学到了点什么。</p>
<p>比方说，如果我回答你：<code>看来似乎是 zentry 卡住了；你应该先清除它。</code>，然后，这是一个<strong>很糟的</strong>后续问题回应：<code>zentry 是什么？</code> <strong>好</strong>的问法应该是这样：<code>哦~~~我看过说明了但是只有 -z 和 -p 两个参数中提到了 zentries，而且还都没有清楚的解释如何清除它。你是指这两个中的哪一个吗？还是我看漏了什么？</code></p>
<h3 id="处理无礼的回应"><a href="#处理无礼的回应" class="headerlink" title="处理无礼的回应"></a>处理无礼的回应</h3><p>很多黑客圈子中看似无礼的行为并不是存心冒犯。相反，它是直接了当，一针见血式的交流风格，这种风格更注重解决问题，而不是使人感觉舒服而却模模糊糊。</p>
<p>如果你觉得被冒犯了，试着平静地反应。如果有人真的做了出格的事，邮件列表、新闻群组或论坛中的前辈多半会招呼他。如果这<strong>没有</strong>发生而你却发火了，那么你发火对象的言语可能在黑客社区中看起来是正常的，而<strong>你</strong>将被视为有错的一方，这将伤害到你获取信息或帮助的机会。</p>
<p>另一方面，你偶尔真的会碰到无礼和无聊的言行。与上述相反，对真正的冒犯者狠狠地打击，用犀利的语言将其驳得体无完肤都是可以接受的。然而，在行事之前一定要非常非常的有根据。纠正无礼的言论与开始一场毫无意义的口水战仅一线之隔，黑客们自己莽撞地越线的情况并不鲜见。如果你是新手或外人，避开这种莽撞的机会并不高。如果你想得到的是信息而不是消磨时光，这时最好不要把手放在键盘上以免冒险。</p>
<p>（有些人断言很多黑客都有轻度的自闭症或亚斯伯格综合症，缺少用于润滑人类社会<strong>正常</strong>交往所需的神经。这既可能是真也可能是假的。如果你自己不是黑客，兴许你认为我们脑袋有问题还能帮助你应付我们的古怪行为。只管这么干好了，我们不在乎。我们<strong>喜欢</strong>我们现在这个样子，并且通常对病患标记都有站得住脚的怀疑）。</p>
<p>Jeff Bigler 的观察总结和这个相关也值得一读 (<strong><a href="http://www.mit.edu/~jcb/tact.html" target="_blank" rel="noopener">tact filters</a></strong>)。</p>
<p>在下一节，我们会谈到另一个问题，当<strong>你</strong>行为不当时所会受到的<code>冒犯</code>。</p>
<h2 id="如何避免扮演失败者"><a href="#如何避免扮演失败者" class="headerlink" title="如何避免扮演失败者"></a>如何避免扮演失败者</h2><p>在黑客社区的论坛中有那么几次你可能会搞砸 —— 以本指南所描述到的或类似的方式。而你会在公开场合中被告知你是如何搞砸的，也许攻击的言语中还会带点夹七夹八的颜色。</p>
<p>这种事发生以后，你能做的最糟糕的事莫过于哀嚎你的遭遇、宣称被口头攻击、要求道歉、高声尖叫、憋闷气、威胁诉诸法律、向其雇主报怨、忘了关马桶盖等等。相反地，你该这么做：</p>
<p>熬过去，这很正常。事实上，它是有益健康且合理的。</p>
<p>社区的标准不会自行维持，它们是通过参与者积极而<strong>公开地</strong>执行来维持的。不要哭嚎所有的批评都应该通过私下的邮件传送，它不是这样运作的。当有人评论你的一个说法有误或者提出不同看法时，坚持声称受到个人攻击也毫无益处，这些都是失败者的态度。</p>
<p>也有其它的黑客论坛，受过高礼节要求的误导，禁止参与者张贴任何对别人帖子挑毛病的消息，并声称<code>如果你不想帮助用户就闭嘴。</code> 结果造成有想法的参与者纷纷离开，这么做只会使它们沦为毫无意义的唠叨与无用的技术论坛。</p>
<p>夸张的讲法是：你要的是“友善”（以上述方式）还是有用？两个里面挑一个。</p>
<p>记着：当黑客说你搞砸了，并且（无论多么刺耳）告诉你别再这样做时，他正在为关心<strong>你</strong>和<strong>他的社区</strong>而行动。对他而言，不理你并将你从他的生活中滤掉更简单。如果你无法做到感谢，至少要表现得有点尊严，别大声哀嚎，也别因为自己是个有戏剧性超级敏感的灵魂和自以为有资格的新来者，就指望别人像对待脆弱的洋娃娃那样对你。</p>
<p>有时候，即使你没有搞砸（或者只是在他的想像中你搞砸了），有些人也会无缘无故地攻击你本人。在这种情况下，抱怨倒是<strong>真的</strong>会把问题搞砸。</p>
<p>这些来找麻烦的人要么是毫无办法但自以为是专家的不中用家伙，要么就是测试你是否真会搞砸的心理专家。其它读者要么不理睬，要么用自己的方式对付他们。这些来找麻烦的人在给他们自己找麻烦，这点你不用操心。</p>
<p>也别让自己卷入口水战，最好不要理睬大多数的口水战 – 当然，这是在你检验它们只是口水战，并且未指出你有搞砸的地方，同时也没有巧妙地将问题真正的答案藏于其后（这也是有可能的）。</p>
<h2 id="不该问的问题"><a href="#不该问的问题" class="headerlink" title="不该问的问题"></a>不该问的问题</h2><p>以下是几个经典蠢问题，以及黑客没回答时心中所想的：</p>
<p>问题：<a href="#q1">我能在哪找到 X 程序或 X 资源？</a></p>
<p>问题：<a href="#q2">我怎样用 X 做 Y？</a></p>
<p>问题：<a href="#q3">如何设定我的 shell 提示？</a></p>
<p>问题：<a href="#q4">我可以用 Bass-o-matic 文件转换工具将 AcmeCorp 档案转换为 TeX 格式吗？</a></p>
<p>问题：<a href="#q5">我的程序/设定/SQL 语句没有用</a></p>
<p>问题：<a href="#q6">我的 Windows 电脑有问题，你能帮我吗？</a></p>
<p>问题：<a href="#q7">我的程序不会动了，我认为系统工具 X 有问题</a></p>
<p>问题：<a href="#q8">我在安装 Linux（或者 X ）时有问题，你能帮我吗？</a></p>
<p>问题：<a href="#q9">我怎么才能破解 root 帐号/窃取 OP 特权/读别人的邮件呢？</a></p>
<hr>
<blockquote>
<p>问题：我能在哪找到 X 程序或 X 资源？</p>
</blockquote>
<p>回答：就在我找到它的地方啊，白痴 —— 搜索引擎的那一头。天哪！难道还有人不会用 <a href="http://www.google.com" target="_blank" rel="noopener">Google</a> 吗？</p>
<blockquote>
<p>问题：我怎样用 X 做 Y？</p>
</blockquote>
<p>回答：如果你想解决的是 Y ，提问时别给出可能并不恰当的方法。这种问题说明提问者不但对 X 完全无知，也对 Y 要解决的问题糊涂，还被特定形势禁锢了思维。最好忽略这种人，等他们把问题搞清楚了再说。</p>
<blockquote>
<p>问题：如何设定我的 shell 提示？？</p>
</blockquote>
<p>回答：如果你有足够的智慧提这个问题，你也该有足够的智慧去 <a href="#RTFM">RTFM</a>，然后自己去找出来。</p>
<blockquote>
<p>问题：我可以用 Bass-o-matic 文件转换工具将 AcmeCorp 档案转换为 TeX 格式吗？</p>
</blockquote>
<p>回答：试试看就知道了。如果你试过，你既知道了答案，就不用浪费我的时间了。</p>
<blockquote>
<p>问题：我的{程序/设定/SQL 语句}不工作</p>
</blockquote>
<p>回答：这不算是问题吧，我对要我问你二十个问题才找得出你真正问题的问题没兴趣 —— 我有更有意思的事要做呢。在看到这类问题的时候，我的反应通常不外如下三种</p>
<ul>
<li>你还有什么要补充的吗？</li>
<li>真糟糕，希望你能搞定。</li>
<li>这关我有什么屁事？</li>
</ul>
<blockquote>
<p>问题：我的 Windows 电脑有问题，你能帮我吗？</p>
</blockquote>
<p>回答：能啊，扔掉微软的垃圾，换个像 Linux 或 BSD 的开源操作系统吧。</p>
<p>注意：如果程序有官方版 Windows 或者与 Windows 有互动（如 Samba），你<strong>可以</strong>问与 Windows 相关的问题， 只是别对问题是由 Windows 操作系统而不是程序本身造成的回复感到惊讶， 因为 Windows 一般来说实在太烂，这种说法通常都是对的。</p>
<blockquote>
<p>问题：我的程序不会动了，我认为系统工具 X 有问题</p>
</blockquote>
<p>回答：你完全有可能是第一个注意到被成千上万用户反复使用的系统调用与函数库档案有明显缺陷的人，更有可能的是你完全没有根据。不同凡响的说法需要不同凡响的证据，当你这样声称时，你必须有清楚而详尽的缺陷说明文件作后盾。</p>
<blockquote>
<p>问题：我在安装 Linux（或者 X ）时有问题，你能帮我吗？</p>
</blockquote>
<p>回答：不能，我只有亲自在你的电脑上动手才能找到毛病。还是去找你当地的 Linux 使用群组者寻求实际的指导吧（你能在<a href="http://www.linux.org/groups/index.html" target="_blank" rel="noopener">这儿</a>找到使用者群组的清单）。</p>
<p>注意：如果安装问题与某 Linux 的发行版有关，在它的邮件列表、论坛或本地使用者群组中提问也许是恰当的。此时，应描述问题的准确细节。在此之前，先用 <code>Linux</code> 和<strong>所有</strong>被怀疑的硬件作关键词仔细搜索。</p>
<blockquote>
<p>问题：我怎么才能破解 root 帐号/窃取 OP 特权/读别人的邮件呢？</p>
</blockquote>
<p>回答：想要这样做，说明了你是个卑鄙小人；想找个黑客帮你，说明你是个白痴！</p>
<h2 id="好问题与蠢问题"><a href="#好问题与蠢问题" class="headerlink" title="好问题与蠢问题"></a>好问题与蠢问题</h2><p>最后，我将透过举一些例子，来说明怎样聪明的提问；同一个问题的两种问法被放在一起，一种是愚蠢的，另一种才是明智的。</p>
<p><strong>蠢问题</strong>：</p>
<blockquote>
<p>我可以在哪儿找到关于 Foonly Flurbamatic 的资料？</p>
</blockquote>
<p>这种问法无非想得到 <a href="#RTFM">STFW</a> 这样的回答。</p>
<p><strong>聪明问题</strong>：</p>
<blockquote>
<p>我用 Google 搜索过 “Foonly Flurbamatic 2600”，但是没找到有用的结果。谁知道上哪儿去找对这种设备编程的资料？</p>
</blockquote>
<p>这个问题已经 STFW 过了，看起来他真的遇到了麻烦。</p>
<p><strong>蠢问题</strong>：</p>
<blockquote>
<p>我从 foo 项目找来的源码没法编译。它怎么这么烂？</p>
</blockquote>
<p>他觉得都是别人的错，这个傲慢自大的提问者。</p>
<p><strong>聪明问题</strong>：</p>
<blockquote>
<p>foo 项目代码在 Nulix 6.2 版下无法编译通过。我读过了 FAQ，但里面没有提到跟 Nulix 有关的问题。这是我编译过程的记录，我有什么做的不对的地方吗？</p>
</blockquote>
<p>提问者已经指明了环境，也读过了 FAQ，还列出了错误，并且他没有把问题的责任推到别人头上，他的问题值得被关注。</p>
<p><strong>蠢问题</strong>：</p>
<blockquote>
<p>我的主机板有问题了，谁来帮我？</p>
</blockquote>
<p>某黑客对这类问题的回答通常是：<code>好的，还要帮你拍拍背和换尿布吗？</code>，然后按下删除键。</p>
<p><strong>聪明问题</strong>：</p>
<blockquote>
<p>我在 S2464 主机板上试过了 X 、 Y 和 Z ，但没什么作用，我又试了 A 、 B 和 C 。请注意当我尝试 C 时的奇怪现象。显然 florbish 正在 grommicking，但结果出人意料。通常在 Athlon MP 主机板上引起 grommicking 的原因是什么？有谁知道接下来我该做些什么测试才能找出问题？</p>
</blockquote>
<p>这个家伙，从另一个角度来看，值得去回答他。他表现出了解决问题的能力，而不是坐等天上掉答案。</p>
<p>在最后一个问题中，注意<code>告诉我答案</code>和<code>给我启示，指出我还应该做什么诊断工作</code>之间微妙而又重要的区别。</p>
<p>事实上，后一个问题源自于 2001 年 8 月在 Linux 内核邮件列表（lkml）上的一个真实的提问。我（Eric）就是那个提出问题的人。我在 Tyan S2464 主板上观察到了这种无法解释的锁定现象，列表成员们提供了解决这一问题的重要信息。</p>
<p>通过我的提问方法，我给了别人可以咀嚼玩味的东西；我设法让人们很容易参与并且被吸引进来。我显示了自己具备和他们同等的能力，并邀请他们与我共同探讨。通过告诉他们我所走过的弯路，以避免他们再浪费时间，我也表明了对他们宝贵时间的尊重。</p>
<p>事后，当我向每个人表示感谢，并且赞赏这次良好的讨论经历的时候， 一个 Linux 内核邮件列表的成员表示，他觉得我的问题得到解决并非由于我是这个列表中的<strong>名</strong>人，而是因为我用了正确的方式来提问。</p>
<p>黑客从某种角度来说是拥有丰富知识但缺乏人情味的家伙；我相信他是对的，如果我<strong>像</strong>个乞讨者那样提问，不论我是谁，一定会惹恼某些人或者被他们忽视。他建议我记下这件事，这直接导致了本指南的出现。</p>
<h2 id="如果得不到回答"><a href="#如果得不到回答" class="headerlink" title="如果得不到回答"></a>如果得不到回答</h2><p>如果仍得不到回答，请不要以为我们觉得无法帮助你。有时只是看到你问题的人不知道答案罢了。没有回应不代表你被忽视，虽然不可否认这种差别很难区分。</p>
<p>总的来说，简单的重复张贴问题是个很糟的点子。这将被视为无意义的喧闹。有点耐心，知道你问题答案的人可能生活在不同的时区，可能正在睡觉，也有可能你的问题一开始就没有组织好。</p>
<p>你可以通过其他渠道获得帮助，这些渠道通常更适合初学者的需要。</p>
<p>有许多网上的以及本地的使用者群组，由热情的软件爱好者（即使他们可能从没亲自写过任何软件）组成。通常人们组建这样的团体来互相帮助并帮助新手。</p>
<p>另外，你可以向很多商业公司寻求帮助，不论公司大还是小。别为要付费才能获得帮助而感到沮丧！毕竟，假使你的汽车发动机汽缸密封圈爆掉了 —— 完全可能如此 —— 你还得把它送到修车铺，并且为维修付费。就算软件没花费你一分钱，你也不能强求技术支持总是免费的。</p>
<p>对像是 Linux 这种大众化的软件，每个开发者至少会对应到上万名使用者。根本不可能由一个人来处理来自上万名使用者的求助电话。要知道，即使你要为这些协助付费，和你所购买的同类软件相比，你所付出的也是微不足道的（通常封闭源代码软件的技术支持费用比开源软件的要高得多，且内容也没那么丰富）。</p>
<h2 id="如何更好地回答问题"><a href="#如何更好地回答问题" class="headerlink" title="如何更好地回答问题"></a>如何更好地回答问题</h2><p><strong>态度和善一点</strong>。问题带来的压力常使人显得无礼或愚蠢，其实并不是这样。</p>
<p><strong>对初犯者私下回复</strong>。对那些坦诚犯错之人没有必要当众羞辱，一个真正的新手也许连怎么搜索或在哪找常见问题都不知道。</p>
<p><strong>如果你不确定，一定要说出来</strong>！一个听起来权威的错误回复比没有还要糟，别因为听起来像个专家很好玩，就给别人乱指路。要谦虚和诚实，给提问者与同行都树个好榜样。</p>
<p><strong>如果帮不了忙，也别妨碍他</strong>。不要在实际步骤上开玩笑，那样也许会毁了使用者的设置 —— 有些可怜的呆瓜会把它当成真的指令。</p>
<p><strong>试探性的反问以引出更多的细节</strong>。如果你做得好，提问者可以学到点东西 —— 你也可以。试试将蠢问题转变成好问题，别忘了我们都曾是新手。</p>
<p>尽管对那些懒虫抱怨一声 RTFM 是正当的，能指出文件的位置（即使只是建议个 Google 搜索关键词）会更好。</p>
<p><strong>如果你决定回答，就请给出好的答案</strong>。当别人正在用错误的工具或方法时别建议笨拙的权宜之计（wordaround），应推荐更好的工具，重新界定问题。</p>
<p><strong>正面的回答问题</strong>！如果这个提问者已经很深入的研究而且也表明已经试过 X 、 Y 、 Z 、 A 、 B 、 C 但没得到结果，回答 <code>试试看 A 或是 B</code> 或者 <code>试试 X 、 Y 、 Z 、 A 、 B 、 C</code> 并附上一个链接一点用都没有。</p>
<p><strong>帮助你的社区从问题中学习</strong>。当回复一个好问题时，问问自己<code>如何修改相关文件或常见问题文件以免再次解答同样的问题？</code>，接着再向文件维护者发一份补丁。</p>
<p>如果你是在研究一番后才做出的回答，<strong>展现你的技巧而不是直接端出结果</strong>。毕竟<code>授人以鱼不如授人以渔</code>。</p>
<h2 id="相关资源"><a href="#相关资源" class="headerlink" title="相关资源"></a>相关资源</h2><p>如果你需要个人电脑、Unix 系统和网络如何运作的基础知识，参阅 <a href="http://en.tldp.org/HOWTO/Unix-and-Internet-Fundamentals-HOWTO/" target="_blank" rel="noopener">Unix 系统和网络基本原理</a>。</p>
<p>当你发布软件或补丁时，试着按<a href="http://en.tldp.org/HOWTO/Software-Release-Practice-HOWTO/index.html" target="_blank" rel="noopener">软件发布实践</a>操作。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/05/Preventing-The-Collapsing-Of-Civilization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/05/Preventing-The-Collapsing-Of-Civilization/" class="post-title-link" itemprop="url">Preventing The Collapsing Of Civilization</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-05 13:26:46 / Modified: 13:31:31" itemprop="dateCreated datePublished" datetime="2020-01-05T13:26:46-06:00">2020-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em>在2019年5月17号，莫斯科的 DevGAMM上，Jonathan Blow发表了一个题为『阻止文明倒塌』的长达一小时的奇怪演讲。我把这个演讲总结为下面这篇文字记录。</em></p>
<p><em>善意提醒：不懂编程不代表你我不能阅读一篇和计算机有关的演讲，并有所思考，只能跟风刷刷梗；另外，对于Blow的观点，作为成年人我们应该可以有自己的反思。</em></p>
<p><em>我个人对这个演讲的逻辑非常赞叹，但也认为他明显偏重了软件系统本身的问题，而对另一个甚至更根本的问题选择了视而不见。那就是当代效率提升过程中的真正瓶颈：人的协作。如果仔细观察软件，以及其他可以类比的当代文明复杂系统，大规模的人际协作中无法改进的沟通效率、责任分配、人性的不可管理，都让系统不可避免地显现为笨拙甚至荒谬的面貌。而抽象层级的提高，也绝不仅仅是软件的趋势而已，正如它所带来的问题也绝不仅是机器的问题。</em></p>
<h2 id="阻止文明倒塌"><a href="#阻止文明倒塌" class="headerlink" title="阻止文明倒塌"></a>阻止文明倒塌</h2><p>乔纳森布洛，2019年5月在莫斯科</p>
<p>演讲从1957年苏联发射 Sputnik 上天引发的美苏太空争霸谈起，回顾了首次卫星发射、首次宇航员上天，以及首次登月的过程。在1962年9月肯尼迪总统在一次国会演讲中宣称我们要在这个十年结束之前实现登月。结果1969年阿波罗11号实现了这个目标。Blow 的要点在于：人类（这里指美国）从一无所知，到实现登月只用了12年。然而从那时之后，人类的载人航天事业很大程度上停滞，甚至出现了倒退。这是不是很令人遗憾？</p>
<p>Blow 播放了一段后来解密的阿波罗11号现场纪录片片段，那种震撼的感觉难以名状，只有看的人能了解其中直观的『退步感』。</p>
<p>然后 Blow 播放了一段 Elon Musk 的 TED 访谈，其中 Elon 指出：我们一定要意识到：不同于可持续能源的未来是必然的，Spacefare civilization（多星球文明）绝对不是必然会发生的（它需要巨大的努力）。1969年人类可以登月，然后人类只能用航天飞机把人送到近地轨道。然后航天飞机退役，近地轨道也没法送上去了——连起来看，趋势是向着0倒退。这和人们对于“科技当然显然必然自动地向前进步”这样的信念相违背。</p>
<h2 id="Elon-认为，正好相反，科技在不付出巨大努力的情况下，是逐渐倒退的。"><a href="#Elon-认为，正好相反，科技在不付出巨大努力的情况下，是逐渐倒退的。" class="headerlink" title="Elon 认为，正好相反，科技在不付出巨大努力的情况下，是逐渐倒退的。"></a>Elon 认为，<strong>正好相反，科技在不付出巨大努力的情况下，是逐渐倒退的</strong>。</h2><p>从古埃及的后人忘记金字塔，到古罗马人忘记如何建造罗马水道。</p>
<p>Elon 的火箭创业公司则非常成功，他们的目标是2024年重新实现载人登月。Blow 接下来给出了几个科技倒退的实例：</p>
<p>第一个是 Lycurgus Cup，公元300年。从正面看它的反光是青色的，透光来看，则呈现为红色。原因是其银和金的颗粒体积非常小，小到50-70纳米，如此之小以至于物理放大镜看不见它们，想观测需要用电子显微镜。然后西罗马帝国覆灭，后人忘记了这个工艺</p>
<p>很多人认为这就是扯淡，当时的人并不知道其任何原理只是误打误撞做出了这些东西。Blow 则认为有如此观点的人显然没有用心亲手打磨过任何东西，否则他们一定会明白，达到这样水平的结果，是不可能通过偶然和运气的，对于工艺的掌握必然在不断迭代过程中达到了非常高的水平，它才有任何可能出现。比如这个图案中人的身体的肉红色，肯定是费劲千辛万苦不断改进实现出来的。这就是一种材料科学。</p>
<p>然后 Blow 提到了拜占庭的喷火筒。拜占庭的战船上安装了这种金属喷管，喷出某种成分的“水扑不灭”的有机物燃烧导致的火焰，焚毁敌人船只。这是拜占庭帝国的国家机密，它在帝国灭亡之前就被遗忘，原因不明，具体实现方式已经不可考证。</p>
<p>第三个例子是机械日历，一种安提凯希拉装置（Antikythera Mechanism），1901年于希腊安提凯特拉岛上的一艘古船残骸中被发现的随船沉没2100余年的钟形装置。这个机械日历的实际模型被复原为一段动画（自己看视频，语言无法描述），它的精密程度是高档机械手表的范畴。它的存在意味着背后多么复杂的一整套制造能力呢？</p>
<p>这样的例子还有很多，就不说了，Blow 这时候放了地动仪的图片。要点是：在人类历史上，杰出的科技被完全遗忘，这件事经常发生。当代也一样。</p>
<p>然后 Blow 给出的例子是 Bob Colwell，早期英特尔的首席芯片架构师，在计算机发展初期的时候接受采访的片段内容，背景是他们发现合作的零部件制造商TI（德州仪器公司）送来的产品不能稳定使用，质量残次。</p>
<p>Bob 去找 TI 质询，本来以为对方会说“那是你们不知道怎么使用，我们的产品是好的”，实际对方的答复是：“是，我们知道，我看看你的清单。哦，我们还有更多你们不知道的（不好使的产品）。”实际情况是，TI 没有比任何其他竞争对手更差，摩托罗拉、Fairchild 也一样。这些硅制品让英特尔的芯片研发停滞不前，为何会如此？TI的人回答道：“第一代 TTL（逻辑门电路）是那帮胡子花白的老头子做的，他们知道其中的道理；现在的工程师都是毛头小子，学校毕业过来搞生产，他们不知道内部组装的改变，会导致感应峰（inductive spikes）。”这里的spike就是指每一个点的电压变化时，都会产生磁场，而磁场变化的相互干扰，没有被设计者纳入考虑，因为他们不理解。</p>
<p>这就是科技退步的原因。代际之间的交流和传承需要巨大的努力，这过程中有损失。如果代际的传承失败，文明就灭亡。</p>
<p>接下来 Blow 给出了历史中文明灭亡的实例，来自于 Eric Clive 的一个演讲，题目是《公元前1700年的文明灭亡》，具体来说是青铜器时代晚期，爱琴海，古埃及，塞浦路斯，迈锡尼，赫梯，古巴比伦等。这一圈围绕在美索不达米亚平原和地中海一带的文明曾经形成了一个非常复杂的贸易网络。在下图中，每个节点是一个文明，不是每一个都能和每一个贸易，但通过中间节点，所有贸易都达到非常优化的效率。</p>
<p>这一点非常重要，因为青铜作为国防和生产的重要资料，非常难以制造。你需要用锡和铜一起生产。铜产地比较少，比如塞浦路斯岛。而锡则更难找，而且离铜产地非常远，比如阿富汗。而这些文明需要把它们运到一起以生产青铜。</p>
<p>而这些文明的灭亡至今没有确切原因，有人说是自然环境恶化导致互相攻击，贸易变成战争。它们灭亡到什么程度呢，不仅是国家不存在了，城市也消失了，语言和文化也消失了。刻在石碑上的文字大多数至今我们不能翻译。</p>
<p>Blow 的要点是：软件正在倒退，而人类空前依赖软件。尽管，这和我们置身其中的人的观感是相反的。波音飞机掉下来的主要原因就是软件问题（编者不能同意）。文明衰退的速度如果很慢，我们能意识到这个衰退么？</p>
<p>这里 Blow 给出了他对于“软件明显在蓬勃发展”之直观感受的解释：软件正在享受硬件能力提升的红利，它只是“看上去”蓬勃发展而已。</p>
<p>机器学习是最明显的例子。一方面，它在二十年前不能存在主要是因为硬件性能无法支持而已。另一方面，它只是人类依赖着的软件世界中极小极小的部分。属于软件的进步已经很长时间停滞。比如，我们使用软件给自己AI换脸成明星的样子，或者配上猪耳朵，这个有趣的部分，只占这个app极小极小的部分，而这个部分非常简单，另外的极大部分却极度复杂，包括把你的脸加载到屏幕上，以及处理你的点击，等等。出问题的是这些部分。人工智能的局部成就，没法和软件世界整体的退化的巨大惯性抗衡。</p>
<p>最明显的迹象，就是“我们已经不指望软件能长期稳定工作了。”我们的标准一降再降，还能降到多低？降低到哪里会出大问题？</p>
<p>接下来 Blow 疯狂吐槽了十分钟，关于电脑上一切软件都经常 bug，以至于用户对于一切软件“重启试试”成为不假思索的操作。包括 Emacs 的问题、Visual Studio 不能处理最最简单的指令，只能连续报错，微软 Word 的字符换行 bug 二十年后仍然没有消灭，像幽灵一样此起彼伏；于是他为了缓解自己的愤怒想打游戏，打开 Epic Store 和 Steam 又连续遇到 bug；于是他关掉游戏客户端去看 CS 直播，发现 CS 直播电竞比赛里全程有一个多余的名为“未定义”的 bug 玩家出现在地图里，直到比赛结束；然后他进入俄罗斯签证申请页面，被死活不能通过，且不能刷新的手机号验证脚本逼得只能刷新整个页面重新填写申请；然后他来到莫斯科住进酒店，他的房间的座机有5%的概率会空调开关触发响铃……等等。编者这里就不赘述了。</p>
<p>这让90年代电脑销售的一个常见推销语“五个9”（指，本设备可以99.999%时间稳定运行）成为今日的讽刺。Blow的电脑连两个9都没有。</p>
<p>对于这个问题，软件行业的普遍答案是：市场不会为更好的稳定性买单。Blow则认为：对于一个从未提供出足够稳健的产品的行业，为什么会有人会相信它『能』？</p>
<p>接下来，Blow 从正面描述了软件的结构：抽象层次的序列。机器语言、汇编语言、Fortran/C/C++、C#/Haskell/Javascript……在这个序列里，绝大多数工程师在最高抽象层次进行工作，因为这是“聪明、省力、高效率的”。在这个抽象从低到高的序列里的某些位置，问题就出在这里。Blow 认为，全行业的高抽象层次工作，多数人的“高效率”的另一面，是失去（或者从未拥有过）能力。考虑 Facebook 作为一个软件的功能增加，和它要多雇佣的成千上万的工程师，二者相除得到的平均每人的价值创造是趋近于零的。这和“抽象层次越高效率越高”明显矛盾。</p>
<p>Blow 给出的对比，是 UNIX 发明者 Ken Thompson 的一个演讲片段。他回忆道他趁老婆孩子出去度假，用了三个礼拜写了三个东西（编辑器、编译器、软硬件交互层或者叫操作系统），做出了 UNIX。现场爆发笑声和掌声——当今程序员可没有这种效率。而 Blow 认为这是个悲剧，它并不好笑。今天软件显没有在进步，它的鲁棒性和生产力都在衰退。</p>
<p>Blow 从图形计算的角度给出了一些“最最基本的，你不能直接做的事情”，其中一个编者能听懂的例子是，把一个程序拷贝到另一个设备（安装是个复杂过程）——而这并不是因为 CPU，CPU 不能背锅因为今天各类设备的 CPU 一致性已经相当好。安装程序不是为了对接 CPU，而是为了解决操作系统层面不可思议之多的兼容问题，其绝大部分是我们不想打交道的。操作系统本来是给 CPU 赋予能力，但同时你也可以说它防止着 CPU 具备很多能力。在编程过程中，你绝大多数时间在处理那些，你很难理解、也不可能预料到的各种和你的设计思路没有关系的问题。</p>
<p>更可怕的是，你不能直接编写一个独立程序进行编译和 linking。微软为了能让人这么做，专门设计了一个 vswhere 的软件。</p>
<p>现在有一种叫做LSP的东西，开源的语言服务器协定。在Blow看来它基本上是一种更复杂、更费劲的编写和调用库的方式，而其满足的需求都是非常基本的操作，比如在你的编辑器里临时起意，查看一个变量的特征或者类型，LSP给你提供一个工具条，或者鼠标点击直接查询的功能。为了实现这个，你需要一个标准化服务跑在服务器上，好让你的编辑器和服务器用socket交互——为了使用方便，你把本地的、单一的编程工作置于分布式的系统之中。</p>
<p>这样的做法推而广之，你依赖了越来越多的库，库又依赖了越来越多的库，关键是这些库/服务本身可能是在变化的、并且没有被中心化地存储和管理，这样一来我们就陷入了无穷无尽的debug的、重启服务的、互相同步的……我们自身所不能掌握的问题海洋之中。</p>
<p>现在大家竟然在积极主动建设着这样一个东西。程序员们忙着把简单事情复杂化的同时……</p>
<p>电脑游戏却变得连最基本的事情都很难实现了。比如游戏现在很难保持全屏, 经常跳出为窗口。再比如，辛辛苦苦做的游戏，很难稳定在一个帧数上跑，无论你多努力也不行。Allen（全称听不清楚）在GDC上介绍了他的一篇论文讲述了这个简单的能力我们现在无法具备的原因。</p>
<p>复杂性的提高，加速了知识的丢失：</p>
<h2 id="1、知识总量更多，我们就让每个人知道的比例变得更小来应对。"><a href="#1、知识总量更多，我们就让每个人知道的比例变得更小来应对。" class="headerlink" title="1、知识总量更多，我们就让每个人知道的比例变得更小来应对。"></a>1、知识总量更多，我们就让每个人知道的比例变得更小来应对。</h2><p>每个人对全局的把握一弱再弱，既难以传承知识，也难以做好自己的工作。</p>
<h2 id="2、『深知识』被『琐碎信息』替代。"><a href="#2、『深知识』被『琐碎信息』替代。" class="headerlink" title="2、『深知识』被『琐碎信息』替代。"></a>2、『深知识』被『琐碎信息』替代。</h2><p>典型的深知识，如理解Cache Coherency（缓存一致性，指保留在高速缓存中的共享资源，保持数据一致性的机制），可以让人优化程序在多个处理器上跑得更快。典型的琐碎信息，如『这个Unity里的小图标不知道为啥不显示了，请教老师傅得知，是某个深藏不露的菜单里看似没有关联的一个开关关闭了导致的，打开就好了，过了一阵子它不知道为何又关闭了，总之，编译之前一定要记得检查那开关打开没有』。后者作为知识，往往几个月后随着Unity版本更新就完全作废，作为程序员要花很多脑力学习这种速朽的所谓知识，这件事情非常缺（offensive）。</p>
<h2 id="3、好信息被噪音淹没。"><a href="#3、好信息被噪音淹没。" class="headerlink" title="3、好信息被噪音淹没。"></a>3、好信息被噪音淹没。</h2><p>症状是谷歌越来越难用，你的问题越复杂，网上搜来搜去看到的答案就越大概率是错的，或者只是浪费你的时间。</p>
<p>Blow认为，显而易见的是，复杂性越高，我们承受灾难，或者体制性腐化（参考上文东罗马帝国），的能力就越差。而现在大家似乎相信，我们能承担的复杂性上限，是无限的。想象现在大公司里那种极少数能够透彻理解整个系统的工程师离退休之后后继无人、且很难把整套知识传递给年轻员工的情况，答案已经很明显了。</p>
<h2 id="这一切和游戏有什么关系呢？"><a href="#这一切和游戏有什么关系呢？" class="headerlink" title="这一切和游戏有什么关系呢？"></a>这一切和游戏有什么关系呢？</h2><p>曾经的游戏，是关于如何榨干性能，将机器的潜力推至极限的。推至极限，要求我们透彻理解机器本身，这就自然导致我们倾向于做出非常鲁棒的程序。</p>
<p>今天整个行业转向Unity和Unreal。自己写引擎的人越来越少。一整代程序员从学习到工作，一直在写支离破碎的C#片段，放在Unity的这里那里，从来没写过系统性的，或者底层的程序。这本身倒没什么，它缩短开发时间，提高个人效率，缩短游戏开发时间。但这意味着放弃，对其他能力的放弃，对整体性知识的放弃。</p>
<p>Blow说，割裂性的分工没问题，但是如果所有人都这样分工，那么没有任何人会做这之外的事情了。Unity和Unreal又是怎么来的呢？它们生长于这样一个环境：所有的游戏公司都在自己写引擎，专门的引擎公司就从这些游戏公司里雇人过来，做出了如今的垄断性引擎。现在没有这样的环境，彻底没有那种人了的话，Unity去哪里雇人？首先的结果，是他们彻底断绝了新引擎作为竞争对手的涌现可能。然后，这几个大引擎怎么继续维护和发展，也成了问题，自身开始衰退，也是很有可能的。</p>
<p>游戏开发者社群的情况很像阿西莫夫的《基地》：我们有一群人知道怎么用电脑编程、也有一群人精通嵌入式系统/高性能计算这些事。当很多程序败坏、丢失、难以维护的时候，我们这群人的知识可以重建它们——但我（Blow）真的不确定，我们是否有足够多的底层人才，以及对底层充分了解的高层人才，能做好系统底层的工作。也许，我们需要一个新的『基地』（foundation，也有基础的意思）。不好意思，剧透了。</p>
<p>说回到青铜时代的文明失落，无数历史显示了一种现象：当只有精英阶层可以读和写的时候，很多能力无法普及，文明变得脆弱——普通人也主观上不想学习那些。今天的我们，几乎没有人能理解自己的程序跑着的时候，CPU里正在发生什么。这就是脆弱。</p>
<p>如果青铜器时代那个程度的知识都会失落，那面对我们现在如此复杂的系统，我们怎么能相信它的存续和发展？各种各样的生存压力随时可能爆发，考验我们的软件世界。比如气候变迁。比如国际争端，比如一些国家切断国际互联网了，比如中国不给我们加工芯片了。别笑，现在有些国家的程序员连上stackoverflow复制粘贴代码都费劲。这些事情单独来看肯定都不至于伤害我们的文明，系统复杂到今天程度，抗折腾能力会很差。</p>
<p>正如Elon Musk所言，技术会自然地退步。我们要警惕，要对抗，就一定要在每一个层级上简化：硬件、操作系统、库、应用层面的代码、网络、编译、debug、内容分发、人机交互。而这一切又完全可以如此简单，因为它们的现状如此荒谬！</p>
<h2 id="我们需要的只是『意愿』（will）和『品位』（taste）而已！"><a href="#我们需要的只是『意愿』（will）和『品位』（taste）而已！" class="headerlink" title="我们需要的只是『意愿』（will）和『品位』（taste）而已！"></a>我们需要的只是『意愿』（will）和『品位』（taste）而已！</h2><p>大家都充分认识到复杂之荒谬，简单之美——简化可以让事情变得更好。</p>
<p>退一万步讲，也许你认为软件不会让文明倒塌。没关系，咱们就只从自身利益出发——所有程序员都每天气呼呼的工作着，因为他们知道自己大量的时间精力用在没有意义的荒唐事上，而不是真正有趣的，创造性的事上。如果我们不改变做事的方式，未来的程序员工作会更加庸俗不堪，就跟没有SpaceX时候的美国航天事业一样。</p>
<p>再退一步，假设你只是独立游戏开发者，你可能觉得，自己无力改变任何事情，只要忍几个月，把游戏做完就好了，毕竟重构、重写需要大量的时间——我想告诉你这种想法永远是错误的，因为我们永远低估了自己做游戏需要的时间，你以为的五个月，大概率实际是几年。糟糕的工作方式让你付出的代价，比你以为的，要大得多，长得多。也许那拖延的几年时间，就是拜复杂系统所赐。反过来，如果你积极应战，简化架构和代码，兴许很值得。听起来像是又基础又无聊的建议，但我要大胆断言——我们大多数人甚至都不太知道怎么做这件事了。</p>
<p>最后Blow给大家提供了三个补充阅读/观看的资料，</p>
<ul>
<li><p>Casey Muratori，『三千万行代码难题』。<a href="https://www.bilibili.com/video/av53844104" target="_blank" rel="noopener">链接在此</a></p>
</li>
<li><p>Samo Burja，『文明：体制、知识与未来』。<a href="https://www.bilibili.com/video/av54613661" target="_blank" rel="noopener">链接在此</a></p>
</li>
<li><p>Eric Cline，『公元前1177：文明倒塌时』<a href="https://www.bilibili.com/video/av54613930" target="_blank" rel="noopener">链接在此</a></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/04/Dynamic-Programming/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/04/Dynamic-Programming/" class="post-title-link" itemprop="url">Dynamic Programming</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-04 14:26:20 / Modified: 14:28:39" itemprop="dateCreated datePublished" datetime="2020-01-04T14:26:20-06:00">2020-01-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><p>建议观看 MIT <a href="http://open.163.com/movie/2010/12/L/4/M6UTT5U0I_M6V2U1HL4.html" target="_blank" rel="noopener">算法导论-动态规划</a>中的课程。</p>
<p>适用于动态规划的问题，需要满足<strong>最优子结构</strong>和<strong>无后效性</strong>，动态规划的求解过程，在于找到<strong>状态转移方程</strong>，进行<strong>自底向上</strong>的求解。</p>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><h4 id="爬楼梯问题-LeetCode-70"><a href="#爬楼梯问题-LeetCode-70" class="headerlink" title="爬楼梯问题 LeetCode 70"></a>爬楼梯问题 <a href="https://leetcode.com/problems/climbing-stairs/" target="_blank" rel="noopener">LeetCode 70</a></h4><p>经典的动态规划问题之一，容易找到其状态转移方程为 <code>dp[i] = dp[i-1] + dp[i-2]</code>，从基础的 1 和 2 个台阶两个状态开始，自底向上求解：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>* dp = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>]();</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        dp[i] = dp[i<span class="number">-1</span>] + dp[i<span class="number">-2</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从上面的代码中看到，<code>dp[i]</code> 只依赖 <code>dp[i-1]</code> 和 <code>dp[i-2]</code>，因此可以将代码简化：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> f0 = <span class="number">1</span>, f1 = <span class="number">1</span>, i, f2;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        f2 = f0 + f1;</span><br><span class="line">        f0 = f1;</span><br><span class="line">        f1 = f2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>容易看出其实结果就是 fibonacci 数列的第 n 项。</p>
<h4 id="连续子数组的最大和-LeetCode-53"><a href="#连续子数组的最大和-LeetCode-53" class="headerlink" title="连续子数组的最大和 LeetCode 53"></a>连续子数组的最大和 <a href="https://leetcode.com/problems/maximum-subarray/" target="_blank" rel="noopener">LeetCode 53</a></h4><p>用 <code>dp[n</code>] 表示元素 n 作为末尾的连续序列的最大和，容易想到状态转移方程为<code>dp[n] = max(dp[n-1] + num[n], num[n])</code>，从第 1 个元素开始，自顶向上求解：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.size()]();</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> result = dp[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">        dp[i] = max(dp[i<span class="number">-1</span>] + nums[i], nums[i]);</span><br><span class="line">        result = max(result, dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类似前一个问题，这个问题当中，求解 <code>dp[i]</code> 只依赖 <code>dp[i-1]</code>，因此可以使用变量来存储，简化代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result = INT_MIN;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        f = max(f + A[i], A[i]);</span><br><span class="line">        result = max(result, f);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="House-Robber-LeetCode-198"><a href="#House-Robber-LeetCode-198" class="headerlink" title="House Robber LeetCode 198"></a>House Robber <a href="https://leetcode.com/problems/house-robber/" target="_blank" rel="noopener">LeetCode 198</a></h4><p>对于一个房子，有抢和不抢两种选择，容易得到状态转移方程 <code>dp[i+1] = max(dp[i-1] + nums[i], dp[i])</code>，示例代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.size();</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">1</span>] = nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = nums[i];</span><br><span class="line">        dp[i+<span class="number">1</span>] = max(dp[i<span class="number">-1</span>] + v, dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样的，可以使用两个变量简化代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.size();</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> prev1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> prev2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = nums[i];</span><br><span class="line">        <span class="keyword">int</span> temp = prev1;</span><br><span class="line">        prev1 = max(prev2 + v, prev1);</span><br><span class="line">        prev2 = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> prev1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="最长回文子串-LeetCode-5"><a href="#最长回文子串-LeetCode-5" class="headerlink" title="最长回文子串 LeetCode 5"></a>最长回文子串 <a href="https://leetcode.com/problems/longest-palindromic-substring/" target="_blank" rel="noopener">LeetCode 5</a></h4><p>用 <code>dp[i][j]</code> 表示子串 i 到 j 是否是回文，使用动态规划求解：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">longestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> m = s.size();</span><br><span class="line">	<span class="keyword">if</span> (m == <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dp(m, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m, <span class="number">0</span>));</span><br><span class="line">	<span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> length = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="comment">// 单个字符属于回文，例如 abcd</span></span><br><span class="line">		dp[i][i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 连续两个字符相同属于回文，例如 abb</span></span><br><span class="line">		<span class="keyword">if</span> (i &lt; m - <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (s[i] == s[i + <span class="number">1</span>]) &#123;</span><br><span class="line">				dp[i][i + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                start = i;</span><br><span class="line">				length = <span class="number">2</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">2</span>; len &lt;= m; len++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m - len; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> j = i + len;</span><br><span class="line">            <span class="comment">// 扩展长度</span></span><br><span class="line">			<span class="keyword">if</span> (dp[i + <span class="number">1</span>][j - <span class="number">1</span>] == <span class="number">1</span> &amp;&amp; s[i] == s[j]) &#123;</span><br><span class="line">				dp[i][j] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (j - i + <span class="number">1</span> &gt; length) &#123;</span><br><span class="line">                    start = i;</span><br><span class="line">					length = j - i + <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> s.substr(start, length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="最小编辑距离-LeetCode-72"><a href="#最小编辑距离-LeetCode-72" class="headerlink" title="最小编辑距离 LeetCode 72"></a>最小编辑距离 <a href="https://leetcode.com/problems/edit-distance/" target="_blank" rel="noopener">LeetCode 72</a></h4><p>用 <code>dp[i][j]</code> 表示从 <code>word[0..i)</code> 转换到 <code>word[0..j)</code> 的最小操作，使用动态规划求解：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(<span class="built_in">string</span> word1, <span class="built_in">string</span> word2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = word1.size();</span><br><span class="line">    <span class="keyword">int</span> n = word2.size();</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dp(m + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 全部删除，操作数量为 i</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; j++) &#123;</span><br><span class="line">        dp[<span class="number">0</span>][j] = j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="comment">// 末尾字符相同，不需要编辑</span></span><br><span class="line">            <span class="keyword">if</span> (word1[i - <span class="number">1</span>] == word2[j - <span class="number">1</span>]) &#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 末尾字符不同，三种编辑情况，取最小值</span></span><br><span class="line">                dp[i][j] = min(dp[i - <span class="number">1</span>][j - <span class="number">1</span>], min(dp[i][j - <span class="number">1</span>], dp[i - <span class="number">1</span>][j])) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/03/Network/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/03/Network/" class="post-title-link" itemprop="url">Computer Network Basics</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-03 14:03:24 / Modified: 14:12:44" itemprop="dateCreated datePublished" datetime="2020-01-03T14:03:24-06:00">2020-01-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="HTTP-的特性"><a href="#HTTP-的特性" class="headerlink" title="HTTP 的特性"></a>HTTP 的特性</h2><ul>
<li>HTTP 协议构建于 TCP/IP 协议之上，是一个应用层协议，默认端口号是 80</li>
<li>HTTP 是<strong>无连接无状态</strong>的</li>
</ul>
<h2 id="HTTP-报文"><a href="#HTTP-报文" class="headerlink" title="HTTP 报文"></a>HTTP 报文</h2><h3 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h3><p>HTTP 协议是以 ASCII 码传输，建立在 TCP/IP 协议之上的应用层规范。规范把 HTTP 请求分为三个部分：状态行、请求头、消息主体。类似于下面这样：</p>
<pre><code>&lt;method&gt; &lt;request-URL&gt; &lt;version&gt;
&lt;headers&gt;

&lt;entity-body&gt;</code></pre><p>HTTP 定义了与服务器交互的不同方法，最基本的方法有4种，分别是<code>GET</code>，<code>POST</code>，<code>PUT</code>，<code>DELETE</code>。<code>URL</code>全称是资源描述符，我们可以这样认为：一个<code>URL</code>地址，它用于描述一个网络上的资源，而 HTTP 中的<code>GET</code>，<code>POST</code>，<code>PUT</code>，<code>DELETE</code>就对应着对这个资源的查，增，改，删4个操作。</p>
<ol>
<li><p>GET 用于信息获取，而且应该是安全的 和 幂等的。</p>
<p>所谓安全的意味着该操作用于获取信息而非修改信息。换句话说，GET 请求一般不应产生副作用。就是说，它仅仅是获取资源信息，就像数据库查询一样，不会修改，增加数据，不会影响资源的状态。</p>
<p>幂等的意味着对同一 URL 的多个请求应该返回同样的结果。</p>
<p>GET 请求报文示例：</p>
<pre><code>GET /books/?sex=man&amp;name=Professional HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)
Gecko/20050225 Firefox/1.0.1
Connection: Keep-Alive</code></pre></li>
<li><p>POST 表示可能修改变服务器上的资源的请求。</p>
</li>
</ol>
<pre><code>POST / HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)
Gecko/20050225 Firefox/1.0.1
Content-Type: application/x-www-form-urlencoded
Content-Length: 40
Connection: Keep-Alive

sex=man&amp;name=Professional  </code></pre><ol start="3">
<li><p>注意:</p>
<ul>
<li>GET 可提交的数据量受到URL长度的限制，HTTP 协议规范没有对 URL 长度进行限制。这个限制是特定的浏览器及服务器对它的限制</li>
<li>理论上讲，POST 是没有大小限制的，HTTP 协议规范也没有进行大小限制，出于安全考虑，服务器软件在实现时会做一定限制</li>
<li>参考上面的报文示例，可以发现 GET 和 POST 数据内容是一模一样的，只是位置不同，一个在 URL 里，一个在 HTTP 包的包体里</li>
</ul>
</li>
</ol>
<h3 id="POST-提交数据的方式"><a href="#POST-提交数据的方式" class="headerlink" title="POST 提交数据的方式"></a>POST 提交数据的方式</h3><p>HTTP 协议中规定 POST 提交的数据必须在 body 部分中，但是协议中没有规定数据使用哪种编码方式或者数据格式。实际上，开发者完全可以自己决定消息主体的格式，只要最后发送的 HTTP 请求满足上面的格式就可以。</p>
<p>但是，数据发送出去，还要服务端解析成功才有意义。一般服务端语言如 PHP、Python 等，以及它们的 framework，都内置了自动解析常见数据格式的功能。服务端通常是根据请求头（headers）中的 Content-Type 字段来获知请求中的消息主体是用何种方式编码，再对主体进行解析。所以说到 POST 提交数据方案，包含了 Content-Type 和消息主体编码方式两部分。下面就正式开始介绍它们：</p>
<ul>
<li><code>application/x-www-form-urlencoded</code></li>
</ul>
<p>这是最常见的 POST 数据提交方式。浏览器的原生 <code>&lt;form&gt;</code> 表单，如果不设置 enctype 属性，那么最终就会以 <code>application/x-www-form-urlencoded</code> 方式提交数据。上个小节当中的例子便是使用了这种提交方式。可以看到 body 当中的内容和 GET 请求是完全相同的。</p>
<ul>
<li><code>multipart/form-data</code></li>
</ul>
<p>这又是一个常见的 POST 数据提交的方式。我们使用表单上传文件时，必须让 <code>&lt;form&gt;</code> 表单的 enctype 等于 <code>multipart/form-data</code>。直接来看一个请求示例：</p>
<pre><code>POST http://www.example.com HTTP/1.1
Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryrGKCBY7qhFd3TrwA

------WebKitFormBoundaryrGKCBY7qhFd3TrwA
Content-Disposition: form-data; name=&quot;text&quot;

title
------WebKitFormBoundaryrGKCBY7qhFd3TrwA
Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;chrome.png&quot;
Content-Type: image/png

PNG ... content of chrome.png ...
------WebKitFormBoundaryrGKCBY7qhFd3TrwA--</code></pre><p>这个例子稍微复杂点。首先生成了一个 boundary 用于分割不同的字段，为了避免与正文内容重复，boundary 很长很复杂。然后 <code>Content-Type</code> 里指明了数据是以 <code>multipart/form-data</code> 来编码，本次请求的 boundary 是什么内容。消息主体里按照字段个数又分为多个结构类似的部分，每部分都是以 –boundary 开始，紧接着是内容描述信息，然后是回车，最后是字段具体内容（文本或二进制）。如果传输的是文件，还要包含文件名和文件类型信息。消息主体最后以 –boundary– 标示结束。关于 <code>multipart/form-data</code> 的详细定义，请前往 <a href="http://www.ietf.org/rfc/rfc1867.txt" target="_blank" rel="noopener">RFC1867</a> 查看（或者相对友好一点的 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition" target="_blank" rel="noopener">MDN 文档</a>）。</p>
<p>这种方式一般用来上传文件，各大服务端语言对它也有着良好的支持。</p>
<p>上面提到的这两种 POST 数据的方式，都是浏览器原生支持的，而且现阶段标准中原生 <code>&lt;form&gt;</code> 表单也只支持这两种方式（通过 <code>&lt;form&gt;</code> 元素的 enctype 属性指定，默认为 <code>application/x-www-form-urlencoded</code>。其实 enctype 还支持 text/plain，不过用得非常少）。</p>
<p>随着越来越多的 Web 站点，尤其是 WebApp，全部使用 Ajax 进行数据交互之后，我们完全可以定义新的数据提交方式，例如 <code>application/json</code>，<code>text/xml</code>，乃至 <code>application/x-protobuf</code> 这种二进制格式，只要服务器可以根据 <code>Content-Type</code> 和 <code>Content-Encoding</code> 正确地解析出请求，都是没有问题的。</p>
<h3 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h3><p>HTTP 响应与 HTTP 请求相似，HTTP响应也由3个部分构成，分别是：</p>
<ul>
<li>状态行</li>
<li>响应头(Response Header)</li>
<li>响应正文</li>
</ul>
<p>状态行由协议版本、数字形式的状态代码、及相应的状态描述，各元素之间以空格分隔。</p>
<p>常见的状态码有如下几种：</p>
<ul>
<li><code>200 OK</code> 客户端请求成功</li>
<li><code>301 Moved Permanently</code> 请求永久重定向</li>
<li><code>302 Moved Temporarily</code> 请求临时重定向</li>
<li><code>304 Not Modified</code> 文件未修改，可以直接使用缓存的文件。</li>
<li><code>400 Bad Request</code> 由于客户端请求有语法错误，不能被服务器所理解。</li>
<li><code>401 Unauthorized</code> 请求未经授权。这个状态代码必须和WWW-Authenticate报头域一起使用</li>
<li><code>403 Forbidden</code> 服务器收到请求，但是拒绝提供服务。服务器通常会在响应正文中给出不提供服务的原因</li>
<li><code>404 Not Found</code> 请求的资源不存在，例如，输入了错误的URL</li>
<li><code>500 Internal Server Error</code> 服务器发生不可预期的错误，导致无法完成客户端的请求。</li>
<li><code>503 Service Unavailable</code> 服务器当前不能够处理客户端的请求，在一段时间之后，服务器可能会恢复正常。</li>
</ul>
<p>下面是一个HTTP响应的例子：</p>
<pre><code>HTTP/1.1 200 OK

Server:Apache Tomcat/5.0.12
Date:Mon,6Oct2003 13:23:42 GMT
Content-Length:112

&lt;html&gt;...</code></pre><h3 id="条件-GET"><a href="#条件-GET" class="headerlink" title="条件 GET"></a>条件 GET</h3><p>HTTP 条件 GET 是 HTTP 协议为了减少不必要的带宽浪费，提出的一种方案。详见 <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html" target="_blank" rel="noopener">RFC2616</a> 。</p>
<ol>
<li><p>HTTP 条件 GET 使用的时机？</p>
<p>客户端之前已经访问过某网站，并打算再次访问该网站。</p>
</li>
<li><p>HTTP 条件 GET 使用的方法？</p>
<p>客户端向服务器发送一个包询问是否在上一次访问网站的时间后是否更改了页面，如果服务器没有更新，显然不需要把整个网页传给客户端，客户端只要使用本地缓存即可，如果服务器对照客户端给出的时间已经更新了客户端请求的网页，则发送这个更新了的网页给用户。</p>
<p>下面是一个具体的发送接受报文示例：</p>
<p>客户端发送请求：</p>
<pre><code>GET / HTTP/1.1  
Host: www.sina.com.cn:80  
If-Modified-Since:Thu, 4 Feb 2010 20:39:13 GMT  
Connection: Close  </code></pre><p>第一次请求时，服务器端返回请求数据，之后的请求，服务器根据请求中的 <code>If-Modified-Since</code> 字段判断响应文件没有更新，如果没有更新，服务器返回一个 <code>304 Not Modified</code>响应，告诉浏览器请求的资源在浏览器上没有更新，可以使用已缓存的上次获取的文件。</p>
<pre><code>HTTP/1.0 304 Not Modified  
Date: Thu, 04 Feb 2010 12:38:41 GMT  
Content-Type: text/html  
Expires: Thu, 04 Feb 2010 12:39:41 GMT  
Last-Modified: Thu, 04 Feb 2010 12:29:04 GMT  
Age: 28  
X-Cache: HIT from sy32-21.sina.com.cn  
Connection: close </code></pre><p>如果服务器端资源已经更新的话，就返回正常的响应。</p>
</li>
</ol>
<h2 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h2><p>我们知道 HTTP 协议采用“请求-应答”模式，当使用普通模式，即非 Keep-Alive 模式时，每个请求/应答客户和服务器都要新建一个连接，完成之后立即断开连接（HTTP 协议为无连接的协议）；当使用 Keep-Alive 模式（又称持久连接、连接重用）时，Keep-Alive 功能使客户端到服务器端的连接持续有效，当出现对服务器的后继请求时，Keep-Alive 功能避免了建立或者重新建立连接。</p>
<p>在 HTTP 1.0 版本中，并没有官方的标准来规定 Keep-Alive 如何工作，因此实际上它是被附加到 HTTP 1.0协议上，如果客户端浏览器支持 Keep-Alive ，那么就在HTTP请求头中添加一个字段 Connection: Keep-Alive，当服务器收到附带有 Connection: Keep-Alive 的请求时，它也会在响应头中添加一个同样的字段来使用 Keep-Alive 。这样一来，客户端和服务器之间的HTTP连接就会被保持，不会断开（超过 Keep-Alive 规定的时间，意外断电等情况除外），当客户端发送另外一个请求时，就使用这条已经建立的连接。</p>
<p>在 HTTP 1.1 版本中，默认情况下所有连接都被保持，如果加入 “Connection: close” 才关闭。目前大部分浏览器都使用 HTTP 1.1 协议，也就是说默认都会发起 Keep-Alive 的连接请求了，所以是否能完成一个完整的 Keep-Alive 连接就看服务器设置情况。</p>
<p>由于 HTTP 1.0 没有官方的 Keep-Alive 规范，并且也已经基本被淘汰，以下讨论均是针对 HTTP 1.1 标准中的 Keep-Alive 展开的。</p>
<p>注意：</p>
<ul>
<li><p>HTTP Keep-Alive 简单说就是保持当前的TCP连接，避免了重新建立连接。</p>
</li>
<li><p>HTTP 长连接不可能一直保持，例如 <code>Keep-Alive: timeout=5, max=100</code>，表示这个TCP通道可以保持5秒，max=100，表示这个长连接最多接收100次请求就断开。</p>
</li>
<li><p>HTTP 是一个无状态协议，这意味着每个请求都是独立的，Keep-Alive 没能改变这个结果。另外，Keep-Alive也不能保证客户端和服务器之间的连接一定是活跃的，在 HTTP1.1 版本中也如此。唯一能保证的就是当连接被关闭时你能得到一个通知，所以不应该让程序依赖于 Keep-Alive 的保持连接特性，否则会有意想不到的后果。</p>
</li>
<li><p>使用长连接之后，客户端、服务端怎么知道本次传输结束呢？两部分：1. 判断传输数据是否达到了Content-Length 指示的大小；2. 动态生成的文件没有 Content-Length ，它是分块传输（chunked），这时候就要根据 chunked 编码来判断，chunked 编码的数据在最后有一个空 chunked 块，表明本次传输数据结束，详见<a href="http://www.cnblogs.com/skynet/archive/2010/12/11/1903347.html" target="_blank" rel="noopener">这里</a>。什么是 chunked 分块传输呢？下面我们就来介绍一下。</p>
</li>
</ul>
<h3 id="Transfer-Encoding"><a href="#Transfer-Encoding" class="headerlink" title="Transfer-Encoding"></a>Transfer-Encoding</h3><p>Transfer-Encoding 是一个用来标示 HTTP 报文传输格式的头部值。尽管这个取值理论上可以有很多，但是当前的 HTTP 规范里实际上只定义了一种传输取值——chunked。</p>
<p>如果一个HTTP消息（请求消息或应答消息）的Transfer-Encoding消息头的值为chunked，那么，消息体由数量未定的块组成，并以最后一个大小为0的块为结束。</p>
<p>每一个非空的块都以该块包含数据的字节数（字节数以十六进制表示）开始，跟随一个CRLF （回车及换行），然后是数据本身，最后块CRLF结束。在一些实现中，块大小和CRLF之间填充有白空格（0x20）。</p>
<p>最后一块是单行，由块大小（0），一些可选的填充白空格，以及CRLF。最后一块不再包含任何数据，但是可以发送可选的尾部，包括消息头字段。消息最后以CRLF结尾。</p>
<p>一个示例响应如下：</p>
<pre><code>HTTP/1.1 200 OK
Content-Type: text/plain
Transfer-Encoding: chunked

25
This is the data in the first chunk

1A
and this is the second one
0</code></pre><p><strong>注意：</strong></p>
<ul>
<li>chunked 和 multipart 两个名词在意义上有类似的地方，不过在 HTTP 协议当中这两个概念则不是一个类别的。multipart 是一种 Content-Type，标示 HTTP 报文内容的类型，而 chunked 是一种传输格式，标示报头将以何种方式进行传输。</li>
<li>chunked 传输不能事先知道内容的长度，只能靠最后的空 chunk 块来判断，因此对于下载请求来说，是没有办法实现进度的。在浏览器和下载工具中，偶尔我们也会看到有些文件是看不到下载进度的，即采用 chunked 方式进行下载。</li>
<li>chunked 的优势在于，服务器端可以边生成内容边发送，无需事先生成全部的内容。HTTP/2 不支持 Transfer-Encoding: chunked，因为 HTTP/2 有自己的 streaming 传输方式（Source：<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Transfer-Encoding" target="_blank" rel="noopener">MDN - Transfer-Encoding</a>）。</li>
</ul>
<h3 id="HTTP-Pipelining（HTTP-管线化）"><a href="#HTTP-Pipelining（HTTP-管线化）" class="headerlink" title="HTTP Pipelining（HTTP 管线化）"></a>HTTP Pipelining（HTTP 管线化）</h3><p>默认情况下 HTTP 协议中每个传输层连接只能承载一个 HTTP 请求和响应，浏览器会在收到上一个请求的响应之后，再发送下一个请求。在使用持久连接的情况下，某个连接上消息的传递类似于<code>请求1 -&gt; 响应1 -&gt; 请求2 -&gt; 响应2 -&gt; 请求3 -&gt; 响应3</code>。</p>
<p>HTTP Pipelining（管线化）是将多个 HTTP 请求整批提交的技术，在传送过程中不需等待服务端的回应。使用 HTTP Pipelining 技术之后，某个连接上的消息变成了类似这样<code>请求1 -&gt; 请求2 -&gt; 请求3 -&gt; 响应1 -&gt; 响应2 -&gt; 响应3</code>。</p>
<p>注意下面几点：</p>
<ul>
<li>管线化机制通过持久连接（persistent connection）完成，仅 HTTP/1.1 支持此技术（HTTP/1.0不支持）</li>
<li>只有 GET 和 HEAD 请求可以进行管线化，而 POST 则有所限制</li>
<li>初次创建连接时不应启动管线机制，因为对方（服务器）不一定支持 HTTP/1.1 版本的协议</li>
<li>管线化不会影响响应到来的顺序，如上面的例子所示，响应返回的顺序并未改变</li>
<li>HTTP /1.1 要求服务器端支持管线化，但并不要求服务器端也对响应进行管线化处理，只是要求对于管线化的请求不失败即可</li>
<li>由于上面提到的服务器端问题，开启管线化很可能并不会带来大幅度的性能提升，而且很多服务器端和代理程序对管线化的支持并不好，因此现代浏览器如 Chrome 和 Firefox 默认并未开启管线化支持</li>
</ul>
<p>更多关于 HTTP Pipelining 的知识可以参考<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Pipelining_FAQ" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="会话跟踪"><a href="#会话跟踪" class="headerlink" title="会话跟踪"></a>会话跟踪</h2><ol>
<li><p>什么是会话？</p>
<p>客户端打开与服务器的连接发出请求到服务器响应客户端请求的全过程称之为会话。</p>
</li>
<li><p>什么是会话跟踪？</p>
<p>会话跟踪指的是对同一个用户对服务器的连续的请求和接受响应的监视。</p>
</li>
<li><p>为什么需要会话跟踪？</p>
<p>浏览器与服务器之间的通信是通过HTTP协议进行通信的，而HTTP协议是”无状态”的协议，它不能保存客户的信息，即一次响应完成之后连接就断开了，下一次的请求需要重新连接，这样就需要判断是否是同一个用户，所以才有会话跟踪技术来实现这种要求。</p>
</li>
<li><p>会话跟踪常用的方法:</p>
<ol>
<li><p>URL 重写</p>
<p>URL(统一资源定位符)是Web上特定页面的地址，URL重写的技术就是在URL结尾添加一个附加数据以标识该会话,把会话ID通过URL的信息传递过去，以便在服务器端进行识别不同的用户。</p>
</li>
<li><p>隐藏表单域</p>
<p>将会话ID添加到HTML表单元素中提交到服务器，此表单元素并不在客户端显示</p>
</li>
<li><p>Cookie</p>
<p>Cookie 是Web 服务器发送给客户端的一小段信息，客户端请求时可以读取该信息发送到服务器端，进而进行用户的识别。对于客户端的每次请求，服务器都会将 Cookie 发送到客户端,在客户端可以进行保存,以便下次使用。</p>
<p>客户端可以采用两种方式来保存这个 Cookie 对象，一种方式是保存在客户端内存中，称为临时 Cookie，浏览器关闭后这个 Cookie 对象将消失。另外一种方式是保存在客户机的磁盘上，称为永久 Cookie。以后客户端只要访问该网站，就会将这个 Cookie 再次发送到服务器上，前提是这个 Cookie 在有效期内，这样就实现了对客户的跟踪。</p>
<p>Cookie 是可以被客户端禁用的。</p>
</li>
<li><p>Session:</p>
<p>每一个用户都有一个不同的 session，各个用户之间是不能共享的，是每个用户所独享的，在 session 中可以存放信息。</p>
<p>在服务器端会创建一个 session 对象，产生一个 sessionID 来标识这个 session 对象，然后将这个 sessionID 放入到 Cookie 中发送到客户端，下一次访问时，sessionID 会发送到服务器，在服务器端进行识别不同的用户。</p>
<p>Session 的实现依赖于 Cookie，如果 Cookie 被禁用，那么 session 也将失效。</p>
</li>
</ol>
</li>
</ol>
<h2 id="跨站攻击"><a href="#跨站攻击" class="headerlink" title="跨站攻击"></a>跨站攻击</h2><ul>
<li><p>CSRF（Cross-site request forgery，跨站请求伪造）</p>
<p>CSRF(XSRF) 顾名思义，是伪造请求，冒充用户在站内的正常操作。</p>
<p>例如，一论坛网站的发贴是通过 GET 请求访问，点击发贴之后 JS 把发贴内容拼接成目标 URL 并访问：</p>
<pre><code>http://example.com/bbs/create_post.php?title=标题&amp;content=内容</code></pre><p>那么，我们只需要在论坛中发一帖，包含一链接：</p>
<pre><code>http://example.com/bbs/create_post.php?title=我是脑残&amp;content=哈哈</code></pre><p>只要有用户点击了这个链接，那么他们的帐户就会在不知情的情况下发布了这一帖子。可能这只是个恶作剧，但是既然发贴的请求可以伪造，那么删帖、转帐、改密码、发邮件全都可以伪造。</p>
<p><strong>如何防范 CSRF 攻击</strong>？可以注意以下几点：</p>
<ul>
<li><p>关键操作只接受 POST 请求</p>
</li>
<li><p>验证码</p>
<p>CSRF 攻击的过程，往往是在用户不知情的情况下构造网络请求。所以如果使用验证码，那么每次操作都需要用户进行互动，从而简单有效的防御了CSRF攻击。</p>
<p>但是如果你在一个网站作出任何举动都要输入验证码会严重影响用户体验，所以验证码一般只出现在特殊操作里面，或者在注册时候使用。</p>
</li>
<li><p>检测 Referer</p>
<p>常见的互联网页面与页面之间是存在联系的，比如你在 <code>www.baidu.com</code> 应该是找不到通往<code>www.google.com</code> 的链接的，再比如你在论坛留言，那么不管你留言后重定向到哪里去了，之前的那个网址一定会包含留言的输入框，这个之前的网址就会保留在新页面头文件的 <code>Referer</code> 中</p>
</li>
</ul>
<p>通过检查 <code>Referer</code> 的值，我们就可以判断这个请求是合法的还是非法的，但是问题出在服务器不是任何时候都能接受到 <code>Referer</code> 的值，所以 Referer Check 一般用于监控 CSRF 攻击的发生，而不用来抵御攻击。</p>
<ul>
<li><p>Token</p>
<p>目前主流的做法是使用 Token 抵御 CSRF 攻击。下面通过分析 CSRF 攻击来理解为什么 Token 能够有效</p>
<p>CSRF 攻击要成功的条件在于攻击者能够预测所有的参数从而构造出合法的请求。所以根据不可预测性原则，我们可以对参数进行加密从而防止 CSRF 攻击。</p>
<p>另一个更通用的做法是保持原有参数不变，另外添加一个参数 Token，其值是随机的。这样攻击者因为不知道 Token 而无法构造出合法的请求进行攻击。</p>
</li>
</ul>
<p>Token 使用原则</p>
<ul>
<li>Token 要足够随机————只有这样才算不可预测</li>
<li>Token 是一次性的，即每次请求成功后要更新Token————这样可以增加攻击难度，增加预测难度</li>
<li>Token 要注意保密性————敏感操作使用 post，防止 Token 出现在 URL 中</li>
</ul>
<p><strong>注意</strong>：过滤用户输入的内容<strong>不能</strong>阻挡 csrf，我们需要做的是过滤请求的<strong>来源</strong>。</p>
</li>
<li><p>XSS（Cross Site Scripting，跨站脚本攻击）</p>
<p>XSS 全称“跨站脚本”，是注入攻击的一种。其特点是不对服务器端造成任何伤害，而是通过一些正常的站内交互途径，例如发布评论，提交含有 JavaScript 的内容文本。这时服务器端如果没有过滤或转义掉这些脚本，作为内容发布到了页面上，其他用户访问这个页面的时候就会运行这些脚本。</p>
<p>运行预期之外的脚本带来的后果有很多中，可能只是简单的恶作剧——一个关不掉的窗口：</p>
<pre><code>while (true) {
    alert(&quot;你关不掉我~&quot;);
}</code></pre><p>也可以是盗号或者其他未授权的操作。</p>
<p>XSS 是实现 CSRF 的诸多途径中的一条，但绝对不是唯一的一条。一般习惯上把通过 XSS 来实现的 CSRF 称为 XSRF。</p>
<p><strong>如何防御 XSS 攻击？</strong></p>
<p>理论上，所有可输入的地方没有对输入数据进行处理的话，都会存在 XSS 漏洞，漏洞的危害取决于攻击代码的威力，攻击代码也不局限于 script。防御 XSS 攻击最简单直接的方法，就是过滤用户的输入。</p>
<p>如果不需要用户输入 HTML，可以直接对用户的输入进行 HTML escape 。下面一小段脚本：</p>
<pre><code>&lt;script&gt;window.location.href=”http://www.baidu.com”;&lt;/script&gt;</code></pre><p>经过 escape 之后就成了：</p>
<pre><code>&amp;lt;script&amp;gt;window.location.href=&amp;quot;http://www.baidu.com&amp;quot;&amp;lt;/script&amp;gt;</code></pre><p>它现在会像普通文本一样显示出来，变得无毒无害，不能执行了。</p>
<p>当我们需要用户输入 HTML 的时候，需要对用户输入的内容做更加小心细致的处理。仅仅粗暴地去掉 script 标签是没有用的，任何一个合法 HTML 标签都可以添加 onclick 一类的事件属性来执行 JavaScript。更好的方法可能是，将用户的输入使用 HTML 解析库进行解析，获取其中的数据。然后根据用户原有的标签属性，重新构建 HTML 元素树。构建的过程中，所有的标签、属性都只从<strong>白名单</strong>中拿取。</p>
</li>
</ul>
<h1 id="HTTP-1"><a href="#HTTP-1" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="HTTPS-基本过程"><a href="#HTTPS-基本过程" class="headerlink" title="HTTPS 基本过程"></a>HTTPS 基本过程</h2><p>HTTPS 即 HTTP over TLS，是一种在加密信道进行 HTTP 内容传输的协议。</p>
<blockquote>
<p>TLS 的早期版本叫做 SSL。SSL 的 1.0, 2.0, 3.0 版本均已经被废弃，出于安全问题考虑广大浏览器也不再对老旧的 SSL 版本进行支持了，因此这里我们就统一使用 TLS 名称了。</p>
</blockquote>
<p>TLS 的基本过程如下（取自 <a href="https://github.com/skyline75489/what-happens-when-zh_CN#tls" target="_blank" rel="noopener">what-happens-when-zh_CN</a>）：</p>
<ul>
<li>客户端发送一个 <code>ClientHello</code> 消息到服务器端，消息中同时包含了它的 Transport Layer Security (TLS) 版本，可用的加密算法和压缩算法。</li>
<li>服务器端向客户端返回一个 <code>ServerHello</code> 消息，消息中包含了服务器端的 TLS 版本，服务器所选择的加密和压缩算法，以及数字证书认证机构（Certificate Authority，缩写 CA）签发的服务器公开证书，证书中包含了公钥。客户端会使用这个公钥加密接下来的握手过程，直到协商生成一个新的对称密钥。证书中还包含了该证书所应用的域名范围（Common Name，简称 CN），用于客户端验证身份。</li>
<li>客户端根据自己的信任 CA 列表，验证服务器端的证书是否可信。如果认为可信（具体的验证过程在下一节讲解），客户端会生成一串伪随机数，使用服务器的公钥加密它。这串随机数会被用于生成新的对称密钥</li>
<li>服务器端使用自己的私钥解密上面提到的随机数，然后使用这串随机数生成自己的对称主密钥</li>
<li>客户端发送一个 <code>Finished</code> 消息给服务器端，使用对称密钥加密这次通讯的一个散列值</li>
<li>服务器端生成自己的 hash 值，然后解密客户端发送来的信息，检查这两个值是否对应。如果对应，就向客户端发送一个 <code>Finished</code> 消息，也使用协商好的对称密钥加密</li>
<li>从现在开始，接下来整个 TLS 会话都使用对称秘钥进行加密，传输应用层（HTTP）内容</li>
</ul>
<p>从上面的过程可以看到，TLS 的完整过程需要三个算法（协议），密钥交互算法，对称加密算法，和消息认证算法（TLS 的传输会使用 MAC(message authentication code) 进行完整性检查）。</p>
<p>我们以 Github 网站使用的 TLS 为例，使用浏览器可以看到它使用的加密为 <code>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>。其中密钥交互算法是 <code>ECDHE_RSA</code>，对称加密算法是 <code>AES_128_GCM</code>，消息认证（MAC）算法为 <code>SHA256</code>。</p>
<h2 id="TLS-证书机制"><a href="#TLS-证书机制" class="headerlink" title="TLS 证书机制"></a>TLS 证书机制</h2><p>HTTPS 过程中很重要的一个步骤，是服务器需要有 CA 颁发的证书，客户端根据自己的信任 CA 列表验证服务器的身份。现代浏览器中，证书验证的过程依赖于证书信任链。</p>
<p>所谓证书信任链，即一个证书要依靠上一级证书来证明自己是可信的，最顶层的证书被称为根证书，拥有根证书的机构被称为根 CA。</p>
<p>还是以 Github 为例，在浏览器中我们可以看到它的证书信任链如下：</p>
<p><code>DigiCert High Assurance EV Root CA</code> -&gt; <code>DigiCert SHA2 Extended Validation Server CA</code> -&gt; <code>Github.com</code></p>
<p>从上到下即 Root CA -&gt; 二级 CA -&gt; 网站。</p>
<p>前面提到，证书当中包括 CN(Common Name)，浏览器在验证证书的同时，也会验证 CN 的正确性。即不光需要验证“这是一个合法的证书”，还需要验证“这是一个用于 Github.com 的证书”。</p>
<p>既然所有的信任，最终要落到根 CA 上，根证书本身又是怎么获得的呢？答案也很简单，根证书一般是操作系统自带的。不管是桌面系统 Windows，macOS 还是移动端系统 Android, iOS 都会内置一系列根证书。随着操作系统本身的升级，根证书也会随着升级进行更新。</p>
<p>对浏览器而已，浏览器当然也有选择信任某个根证书的权利。Chrome 浏览器一般是跟随系统根证书信任的。Firefox 浏览器通常是使用自带的一套证书信任机制，不受系统证书的影响。</p>
<p>在使用 <code>curl</code> 等工具时，我们还可以自行选择证书进行信任。</p>
<blockquote>
<p>有权威的信任，最终都要落到一个单点信任，不管是 Root CA，还是微软，苹果，谷歌等操作系统厂商。</p>
</blockquote>
<h2 id="中间人攻击"><a href="#中间人攻击" class="headerlink" title="中间人攻击"></a>中间人攻击</h2><p>HTTPS 的过程并不是密不透风的，HTTPS 有若干漏洞，给中间人攻击（Man In The Middle Attack，简称 MITM）提供了可能。</p>
<p>所谓中间人攻击，指攻击者与通讯的两端分别建立独立的联系，并交换其所收到的数据，使通讯的两端认为他们正在通过一个私密的连接与对方直接对话，但事实上整个会话都被攻击者完全控制。在中间人攻击中，攻击者可以拦截通讯双方的通话并插入新的内容。</p>
<h3 id="SSL-剥离"><a href="#SSL-剥离" class="headerlink" title="SSL 剥离"></a>SSL 剥离</h3><p>SSL 剥离即阻止用户使用 HTTPS 访问网站。由于并不是所有网站都只支持 HTTPS，大部分网站会同时支持 HTTP 和 HTTPS 两种协议。用户在访问网站时，也可能会在地址栏中输入 <code>http://</code> 的地址，第一次的访问完全是明文的，这就给了攻击者可乘之机。通过攻击 DNS 响应，攻击者可以将自己变成中间人。</p>
<blockquote>
<p>DNS 作为基于 UDP 的协议是相当不安全的，为了保证 DNS 的安全可以使用 DNS over TCP 等机制，这里不赘述了。</p>
</blockquote>
<h3 id="HSTS"><a href="#HSTS" class="headerlink" title="HSTS"></a>HSTS</h3><p>为了防止上面说的这种情况，一种叫做 HSTS 的技术被引入了。HSTS（HTTP Strict Transport Security）是用于强制浏览器使用 HTTPS 访问网站的一种机制。它的基本机制是在服务器返回的响应中，加上一个特殊的头部，指示浏览器对于此网站，强制使用 HTTPS 进行访问：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Strict-Transport-Security: max-age=31536000; includeSubdomains; preload</span><br></pre></td></tr></table></figure>

<p>可以看到如果这个过期时间非常长，就是导致在很长一段时间内，浏览器都会强制使用 HTTPS 访问该网站。</p>
<p>HSTS 有一个很明显的缺点，是需要等待第一个服务器的影响中的头部才能生效，但如果第一次访问该网站就被攻击呢？为了解决这个问题，浏览器中会带上一些网站的域名，被称为 HSTS preload list。对于在这个 list 的网站来说，直接强制使用 HTTPS。</p>
<h3 id="伪造证书攻击"><a href="#伪造证书攻击" class="headerlink" title="伪造证书攻击"></a>伪造证书攻击</h3><p>HSTS 只解决了 SSL 剥离的问题，然而即使在全程使用 HTTPS 的情况下，我们仍然有可能被监听。</p>
<p>假设我们想访问 <code>www.google.com</code>，但我们的 DNS 服务器被攻击了，指向的 IP 地址并非 Google 的服务器，而是攻击者的 IP。当攻击者的服务器也有合法的证书的时候，我们的浏览器就会认为对方是 Google 服务器，从而信任对方。这样，攻击者便可以监听我们和谷歌之前的所有通信了。</p>
<p>可以看到攻击者有两步需要操作，第一步是需要攻击 DNS 服务器。第二步是攻击者自己的证书需要被用户信任，这一步对于用户来说是很难控制的，需要证书颁发机构能够控制自己不滥发证书。</p>
<blockquote>
<p>2015 年 Google 称发现赛门铁克旗下的 Thawte 未经同意签发了众多域名的数千个证书，其中包括 Google 旗下的域名和不存在的域名。当年 12 月，Google 发布公告称 Chrome、Android 及其他 Google 产品将不再信任赛门铁克旗下的”Class 3 Public Primary CA”根证书。</p>
</blockquote>
<blockquote>
<p>2016 年 Mozilla 发现沃通 CA 存在严重的信任问题，例如偷签 <code>github.com</code> 的证书，故意倒填证书日期绕过浏览器对 SHA-1 证书的限制等，将停止信任 WoSign 和 StartCom 签发的新证书。</p>
</blockquote>
<h3 id="HPKP"><a href="#HPKP" class="headerlink" title="HPKP"></a>HPKP</h3><p>HPKP 技术是为了解决伪造证书攻击而诞生的。</p>
<p>HPKP（Public Key Pinning Extension for HTTP）在 HSTS 上更进一步，HPKP 直接在返回头中存储服务器的公钥指纹信息，一旦发现指纹和实际接受到的公钥有差异，浏览器就可以认为正在被攻击：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Public-Key-Pins: pin-sha256="base64=="; max-age=expireTime [; includeSubDomains][; report-uri="reportURI"]</span><br></pre></td></tr></table></figure>

<p>和 HSTS 类似，HPKP 也依赖于服务器的头部返回，不能解决第一次访问的问题，浏览器本身也会内置一些 HPKP 列表。</p>
<blockquote>
<p>HPKP 技术仍然不能阻止第一次访问的攻击问题，部署和配置 HPKP 相当繁琐，一旦网站配置错误，就会导致网站证书验证失败，且在过期时间内无法有效恢复。HPKP 的机制也引来了一些安全性问题。Chrome 67 中废除了对 HPKP 的支持，在 Chrome 72 中 HPKP 被彻底移除。</p>
</blockquote>
<h1 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h1><h2 id="IP-协议简介"><a href="#IP-协议简介" class="headerlink" title="IP 协议简介"></a>IP 协议简介</h2><p>IP 协议位于 TCP/IP 协议的第三层——网络层。与传输层协议相比，网络层的责任是提供点到点(hop by hop)的服务，而传输层（TCP/UDP）则提供端到端(end to end)的服务。</p>
<h2 id="IP-地址的分类"><a href="#IP-地址的分类" class="headerlink" title="IP 地址的分类"></a>IP 地址的分类</h2><h3 id="A类地址"><a href="#A类地址" class="headerlink" title="A类地址"></a>A类地址</h3><h3 id="B类地址"><a href="#B类地址" class="headerlink" title="B类地址"></a>B类地址</h3><h3 id="C类地址"><a href="#C类地址" class="headerlink" title="C类地址"></a>C类地址</h3><h3 id="D-类地址"><a href="#D-类地址" class="headerlink" title="D 类地址"></a>D 类地址</h3><h2 id="广播与多播"><a href="#广播与多播" class="headerlink" title="广播与多播"></a>广播与多播</h2><p>广播和多播仅用于UDP（TCP是面向连接的）。</p>
<ul>
<li><p>广播</p>
<p>一共有四种广播地址：</p>
<ol>
<li><p>受限的广播</p>
<p>受限的广播地址为255.255.255.255。该地址用于主机配置过程中IP数据报的目的地址，在任何情况下，router不转发目的地址为255.255.255.255的数据报，这样的数据报仅出现在本地网络中。</p>
</li>
<li><p>指向网络的广播</p>
<p>指向网络的广播地址是主机号为全1的地址。A类网络广播地址为netid.255.255.255，其中netid为A类网络的网络号。</p>
<p>一个router必须转发指向网络的广播，但它也必须有一个不进行转发的选择。</p>
</li>
<li><p>指向子网的广播</p>
<p>指向子网的广播地址为主机号为全1且有特定子网号的地址。作为子网直接广播地址的IP地址需要了解子网的掩码。例如，router收到128.1.2.255的数据报，当B类网路128.1的子网掩码为255.255.255.0时，该地址就是指向子网的广播地址；但是如果子网掩码为255.255.254.0，该地址就不是指向子网的广播地址。</p>
</li>
<li><p>指向所有子网的广播</p>
<p>指向所有子网的广播也需要了解目的网络的子网掩码，以便与指向网络的广播地址区分开来。指向所有子网的广播地址的子网号和主机号为全1.例如，如果子网掩码为255.255.255.0，那么128.1.255.255就是一个指向所有子网的广播地址。</p>
<p>当前的看法是这种广播是陈旧过时的，更好的方式是使用多播而不是对所有子网的广播。</p>
</li>
</ol>
<p>广播示例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PING 192.168.0.255 (192.168.0.255): 56 data bytes</span><br><span class="line">64 bytes from 192.168.0.107: icmp_seq&#x3D;0 ttl&#x3D;64 time&#x3D;0.199 ms</span><br><span class="line">64 bytes from 192.168.0.106: icmp_seq&#x3D;0 ttl&#x3D;64 time&#x3D;45.357 ms</span><br><span class="line">64 bytes from 192.168.0.107: icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.203 ms</span><br><span class="line">64 bytes from 192.168.0.106: icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;269.475 ms</span><br><span class="line">64 bytes from 192.168.0.107: icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.102 ms</span><br><span class="line">64 bytes from 192.168.0.106: icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;189.881 ms</span><br></pre></td></tr></table></figure>

<p>可以看到的确收到了来自两个主机的答复，其中 192.168.0.107 是本机地址。</p>
</li>
<li><p>多播</p>
<p>多播又叫组播，使用D类地址，D类地址分配的28bit均用作多播组号而不再表示其他。</p>
<p>多播组地址包括1110的最高4bit和多播组号。它们通常可以表示为点分十进制数，范围从224.0.0.0到239.255.255.255。</p>
<p>多播的出现减少了对应用不感兴趣主机的处理负荷。</p>
<p>多播的特点：</p>
<ul>
<li>允许一个或多个发送者（组播源）发送单一的数据包到多个接收者（一次的，同时的）的网络技术</li>
<li>可以大大的节省网络带宽，因为无论有多少个目标地址，在整个网络的任何一条链路上只传送单一的数据包</li>
<li>多播技术的核心就是针对如何节约网络资源的前提下保证服务质量。</li>
</ul>
<p>多播示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PING 224.0.0.1 (224.0.0.1): 56 data bytes</span><br><span class="line">64 bytes from 192.168.0.107: icmp_seq&#x3D;0 ttl&#x3D;64 time&#x3D;0.081 ms</span><br><span class="line">64 bytes from 192.168.0.106: icmp_seq&#x3D;0 ttl&#x3D;64 time&#x3D;123.081 ms</span><br><span class="line">64 bytes from 192.168.0.107: icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.122 ms</span><br><span class="line">64 bytes from 192.168.0.106: icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;67.312 ms</span><br><span class="line">64 bytes from 192.168.0.107: icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.132 ms</span><br><span class="line">64 bytes from 192.168.0.106: icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;447.073 ms</span><br><span class="line">64 bytes from 192.168.0.107: icmp_seq&#x3D;3 ttl&#x3D;64 time&#x3D;0.132 ms</span><br><span class="line">64 bytes from 192.168.0.106: icmp_seq&#x3D;3 ttl&#x3D;64 time&#x3D;188.800 ms</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="BGP"><a href="#BGP" class="headerlink" title="BGP"></a>BGP</h2><ul>
<li><p>边界网关协议（BGP）是运行于 TCP 上的一种自治系统的路由协议</p>
</li>
<li><p>BGP 是唯一一个用来处理像因特网大小的网络的协议，也是唯一能够妥善处理好不相关路由域间的多路连接的协议</p>
</li>
<li><p>BGP是一种外部网关协议（Exterior Gateway Protocol，EGP），与OSPF、RIP等内部网关协议（Interior Gateway Protocol，IGP）不同，BGP不在于发现和计算路由，而在于控制路由的传播和选择最佳路由</p>
</li>
<li><p>BGP使用TCP作为其传输层协议（端口号179），提高了协议的可靠性</p>
</li>
<li><p>BGP既不是纯粹的矢量距离协议，也不是纯粹的链路状态协议</p>
</li>
<li><p>BGP支持CIDR（Classless Inter-Domain Routing，无类别域间路由）</p>
</li>
<li><p>路由更新时，BGP只发送更新的路由，大大减少了BGP传播路由所占用的带宽，适用于在Internet上传播大量的路由信息</p>
</li>
<li><p>BGP路由通过携带AS路径信息彻底解决路由环路问题</p>
</li>
<li><p>BGP提供了丰富的路由策略，能够对路由实现灵活的过滤和选择</p>
</li>
<li><p>BGP易于扩展，能够适应网络新的发展</p>
</li>
</ul>
<h1 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h1><h2 id="TCP-的特性"><a href="#TCP-的特性" class="headerlink" title="TCP 的特性"></a>TCP 的特性</h2><ul>
<li>TCP 提供一种<strong>面向连接的、可靠的</strong>字节流服务</li>
<li>在一个 TCP 连接中，仅有两方进行彼此通信。广播和多播不能用于 TCP</li>
<li>TCP 使用校验和，确认和重传机制来保证可靠传输</li>
<li>TCP 给数据分节进行排序，并使用累积确认保证数据的顺序不变和非重复</li>
<li>TCP 使用滑动窗口机制来实现流量控制，通过动态改变窗口的大小进行拥塞控制</li>
</ul>
<p><strong>注意</strong>：TCP 并不能保证数据一定会被对方接收到，因为这是不可能的。TCP 能够做到的是，如果有可能，就把数据递送到接收方，否则就（通过放弃重传并且中断连接这一手段）通知用户。因此准确说 TCP 也不是 100% 可靠的协议，它所能提供的是数据的可靠递送或故障的可靠通知。</p>
<h2 id="三次握手与四次挥手"><a href="#三次握手与四次挥手" class="headerlink" title="三次握手与四次挥手"></a>三次握手与四次挥手</h2><p>所谓三次握手(Three-way Handshake)，是指建立一个 TCP 连接时，需要客户端和服务器总共发送3个包。</p>
<p>三次握手的目的是连接服务器指定端口，建立 TCP 连接，并同步连接双方的序列号和确认号，交换 TCP 窗口大小信息。在 socket 编程中，客户端执行 <code>connect()</code> 时。将触发三次握手。</p>
<ul>
<li><p>第一次握手(SYN=1, seq=x):</p>
<p>客户端发送一个 TCP 的 SYN 标志位置1的包，指明客户端打算连接的服务器的端口，以及初始序号 X,保存在包头的序列号(Sequence Number)字段里。</p>
<p>发送完毕后，客户端进入 <code>SYN_SEND</code> 状态。</p>
</li>
<li><p>第二次握手(SYN=1, ACK=1, seq=y, ACKnum=x+1):</p>
<p>服务器发回确认包(ACK)应答。即 SYN 标志位和 ACK 标志位均为1。服务器端选择自己 ISN 序列号，放到 Seq 域里，同时将确认序号(Acknowledgement Number)设置为客户的 ISN 加1，即X+1。<br>发送完毕后，服务器端进入 <code>SYN_RCVD</code> 状态。</p>
</li>
<li><p>第三次握手(ACK=1，ACKnum=y+1)</p>
<p>客户端再次发送确认包(ACK)，SYN 标志位为0，ACK 标志位为1，并且把服务器发来 ACK 的序号字段+1，放在确定字段中发送给对方，并且在数据段放写ISN的+1</p>
<p>发送完毕后，客户端进入 <code>ESTABLISHED</code> 状态，当服务器端接收到这个包时，也进入 <code>ESTABLISHED</code> 状态，TCP 握手结束。</p>
</li>
</ul>
<p>三次握手的过程的示意图如下：</p>
<p><img src="../images/tcp-connection-made-three-way-handshake.png" alt="three-way-handshake"></p>
<p>TCP 的连接的拆除需要发送四个包，因此称为四次挥手(Four-way handshake)，也叫做改进的三次握手。客户端或服务器均可主动发起挥手动作，在 socket 编程中，任何一方执行 <code>close()</code> 操作即可产生挥手操作。</p>
<ul>
<li><p>第一次挥手(FIN=1，seq=x)</p>
<p>假设客户端想要关闭连接，客户端发送一个 FIN 标志位置为1的包，表示自己已经没有数据可以发送了，但是仍然可以接受数据。</p>
<p>发送完毕后，客户端进入 <code>FIN_WAIT_1</code> 状态。</p>
</li>
<li><p>第二次挥手(ACK=1，ACKnum=x+1)</p>
<p>服务器端确认客户端的 FIN 包，发送一个确认包，表明自己接受到了客户端关闭连接的请求，但还没有准备好关闭连接。</p>
<p>发送完毕后，服务器端进入 <code>CLOSE_WAIT</code> 状态，客户端接收到这个确认包之后，进入 <code>FIN_WAIT_2</code> 状态，等待服务器端关闭连接。</p>
</li>
<li><p>第三次挥手(FIN=1，seq=y)</p>
<p>服务器端准备好关闭连接时，向客户端发送结束连接请求，FIN 置为1。</p>
<p>发送完毕后，服务器端进入 <code>LAST_ACK</code> 状态，等待来自客户端的最后一个ACK。</p>
</li>
<li><p>第四次挥手(ACK=1，ACKnum=y+1)</p>
<p>客户端接收到来自服务器端的关闭请求，发送一个确认包，并进入 <code>TIME_WAIT</code>状态，等待可能出现的要求重传的 ACK 包。</p>
<p>服务器端接收到这个确认包之后，关闭连接，进入 <code>CLOSED</code> 状态。</p>
<p>客户端等待了某个固定时间（两个最大段生命周期，2MSL，2 Maximum Segment Lifetime）之后，没有收到服务器端的 ACK ，认为服务器端已经正常关闭连接，于是自己也关闭连接，进入 <code>CLOSED</code> 状态。</p>
</li>
</ul>
<p>四次挥手的示意图如下：</p>
<p><img src="../images/tcp-connection-closed-four-way-handshake.png" alt="four-way-handshake"></p>
<h2 id="SYN攻击"><a href="#SYN攻击" class="headerlink" title="SYN攻击"></a>SYN攻击</h2><ul>
<li><p>什么是 SYN 攻击（SYN Flood）？</p>
<p>在三次握手过程中，服务器发送 SYN-ACK 之后，收到客户端的 ACK 之前的 TCP 连接称为半连接(half-open connect)。此时服务器处于 SYN_RCVD 状态。当收到 ACK 后，服务器才能转入 ESTABLISHED 状态.</p>
<p>SYN 攻击指的是，攻击客户端在短时间内伪造大量不存在的IP地址，向服务器不断地发送SYN包，服务器回复确认包，并等待客户的确认。由于源地址是不存在的，服务器需要不断的重发直至超时，这些伪造的SYN包将长时间占用未连接队列，正常的SYN请求被丢弃，导致目标系统运行缓慢，严重者会引起网络堵塞甚至系统瘫痪。</p>
<p>SYN 攻击是一种典型的 DoS/DDoS 攻击。</p>
</li>
<li><p>如何检测 SYN 攻击？</p>
<p>检测 SYN 攻击非常的方便，当你在服务器上看到大量的半连接状态时，特别是源IP地址是随机的，基本上可以断定这是一次SYN攻击。在 Linux/Unix 上可以使用系统自带的 netstats 命令来检测 SYN 攻击。</p>
</li>
<li><p>如何防御 SYN 攻击？</p>
<p>SYN攻击不能完全被阻止，除非将TCP协议重新设计。我们所做的是尽可能的减轻SYN攻击的危害，常见的防御 SYN 攻击的方法有如下几种：</p>
<ul>
<li>缩短超时（SYN Timeout）时间</li>
<li>增加最大半连接数</li>
<li>过滤网关防护</li>
<li>SYN cookies技术</li>
</ul>
</li>
</ul>
<h2 id="TCP-KeepAlive"><a href="#TCP-KeepAlive" class="headerlink" title="TCP KeepAlive"></a>TCP KeepAlive</h2><p>TCP 的连接，实际上是一种纯软件层面的概念，在物理层面并没有“连接”这种概念。TCP 通信双方建立交互的连接，但是并不是一直存在数据交互，有些连接会在数据交互完毕后，主动释放连接，而有些不会。在长时间无数据交互的时间段内，交互双方都有可能出现掉电、死机、异常重启等各种意外，当这些意外发生之后，这些 TCP 连接并未来得及正常释放，在软件层面上，连接的另一方并不知道对端的情况，它会一直维护这个连接，长时间的积累会导致非常多的半打开连接，造成端系统资源的消耗和浪费，为了解决这个问题，在传输层可以利用 TCP 的 KeepAlive 机制实现来实现。主流的操作系统基本都在内核里支持了这个特性。</p>
<p>TCP KeepAlive 的基本原理是，隔一段时间给连接对端发送一个探测包，如果收到对方回应的 ACK，则认为连接还是存活的，在超过一定重试次数之后还是没有收到对方的回应，则丢弃该 TCP 连接。</p>
<p><a href="http://www.tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/" target="_blank" rel="noopener">TCP-Keepalive-HOWTO</a> 有对 TCP KeepAlive 特性的详细介绍，有兴趣的同学可以参考。这里主要说一下，TCP KeepAlive 的局限。首先 TCP KeepAlive 监测的方式是发送一个 probe 包，会给网络带来额外的流量，另外 TCP KeepAlive 只能在内核层级监测连接的存活与否，而连接的存活不一定代表服务的可用。例如当一个服务器 CPU 进程服务器占用达到 100%，已经卡死不能响应请求了，此时 TCP KeepAlive 依然会认为连接是存活的。因此 TCP KeepAlive 对于应用层程序的价值是相对较小的。需要做连接保活的应用层程序，例如 QQ，往往会在应用层实现自己的心跳功能。</p>
<h1 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h1><h2 id="UDP-简介"><a href="#UDP-简介" class="headerlink" title="UDP 简介"></a>UDP 简介</h2><p>UDP 是一个简单的传输层协议。和 TCP 相比，UDP 有下面几个显著特性：</p>
<ul>
<li>UDP 缺乏可靠性。UDP 本身不提供确认，序列号，超时重传等机制。UDP 数据报可能在网络中被复制，被重新排序。即 UDP 不保证数据报会到达其最终目的地，也不保证各个数据报的先后顺序，也不保证每个数据报只到达一次</li>
<li>UDP 数据报是有长度的。每个 UDP 数据报都有长度，如果一个数据报正确地到达目的地，那么该数据报的长度将随数据一起传递给接收方。而 TCP 是一个字节流协议，没有任何（协议上的）记录边界。</li>
<li>UDP 是无连接的。UDP 客户和服务器之前不必存在长期的关系。UDP 发送数据报之前也不需要经过握手创建连接的过程。</li>
<li>UDP 支持多播和广播。</li>
</ul>
<h1 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h1><h2 id="Socket-基本概念"><a href="#Socket-基本概念" class="headerlink" title="Socket 基本概念"></a>Socket 基本概念</h2><p>Socket 是对 TCP/IP 协议族的一种封装，是应用层与TCP/IP协议族通信的中间软件抽象层。从设计模式的角度看来，Socket其实就是一个门面模式，它把复杂的TCP/IP协议族隐藏在Socket接口后面，对用户来说，一组简单的接口就是全部，让Socket去组织数据，以符合指定的协议。</p>
<p>Socket 还可以认为是一种网络间不同计算机上的进程通信的一种方法，利用三元组（ip地址，协议，端口）就可以唯一标识网络中的进程，网络中的进程通信可以利用这个标志与其它进程进行交互。</p>
<p>Socket 起源于 Unix ，Unix/Linux 基本哲学之一就是“一切皆文件”，都可以用“打开(open) –&gt; 读写(write/read) –&gt; 关闭(close)”模式来进行操作。因此 Socket 也被处理为一种特殊的文件。</p>
<h2 id="写一个简易的-WebServer"><a href="#写一个简易的-WebServer" class="headerlink" title="写一个简易的 WebServer"></a>写一个简易的 WebServer</h2><p>一个简易的 Server 的流程如下：</p>
<ul>
<li>1.建立连接，接受一个客户端连接。</li>
<li>2.接受请求，从网络中读取一条 HTTP 请求报文。</li>
<li>3.处理请求，访问资源。</li>
<li>4.构建响应，创建带有 header 的 HTTP 响应报文。</li>
<li>5.发送响应，传给客户端。</li>
</ul>
<p>省略流程 3，大体的程序与调用的函数逻辑如下：</p>
<ul>
<li>socket() 创建套接字</li>
<li>bind() 分配套接字地址</li>
<li>listen() 等待连接请求</li>
<li>accept() 允许连接请求</li>
<li>read()/write() 数据交换</li>
<li>close() 关闭连接</li>
</ul>
<p>代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> port = <span class="number">9090</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> buffer_size = <span class="number">1</span>&lt;&lt;<span class="number">20</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> method_size = <span class="number">1</span>&lt;&lt;<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> filename_size = <span class="number">1</span>&lt;&lt;<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> common_buffer_size = <span class="number">1</span>&lt;&lt;<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">handleError</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;message)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">requestHandling</span><span class="params">(<span class="keyword">int</span> *sock)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendError</span><span class="params">(<span class="keyword">int</span> *sock)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendData</span><span class="params">(<span class="keyword">int</span> *sock, <span class="keyword">char</span> *filename)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendHTML</span><span class="params">(<span class="keyword">int</span> *sock, <span class="keyword">char</span> *filename)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendJPG</span><span class="params">(<span class="keyword">int</span> *sock, <span class="keyword">char</span> *filename)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> server_sock;</span><br><span class="line">	<span class="keyword">int</span> client_sock;</span><br><span class="line">	</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">server_address</span>;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">client_address</span>;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">socklen_t</span> client_address_size;</span><br><span class="line"></span><br><span class="line">    server_sock = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (server_sock == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    	handleError(<span class="string">"socket error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(&amp;server_address,<span class="number">0</span>,<span class="keyword">sizeof</span>(server_address));</span><br><span class="line">    server_address.sin_family = AF_INET;</span><br><span class="line">    server_address.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line">    server_address.sin_port = htons(port);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(bind(server_sock,(struct sockaddr*)&amp;server_address, <span class="keyword">sizeof</span>(server_address)) == <span class="number">-1</span>)&#123;</span><br><span class="line">    	handleError(<span class="string">"bind error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(listen(server_sock, <span class="number">5</span>) == <span class="number">-1</span>) &#123;</span><br><span class="line">    	handleError(<span class="string">"listen error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        client_address_size = <span class="keyword">sizeof</span>(client_address);</span><br><span class="line">        client_sock = accept(server_sock, (struct sockaddr*) &amp;client_address, &amp;client_address_size);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (client_sock == <span class="number">-1</span>) &#123;</span><br><span class="line">            handleError(<span class="string">"accept error"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        requestHandling(&amp;client_sock);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//system("open http://127.0.0.1:9090/index.html");</span></span><br><span class="line">    close(server_sock);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">requestHandling</span><span class="params">(<span class="keyword">int</span> *sock)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> client_sock = *sock;</span><br><span class="line">    <span class="keyword">char</span> buffer[buffer_size];</span><br><span class="line">    <span class="keyword">char</span> method[method_size];</span><br><span class="line">    <span class="keyword">char</span> filename[filename_size];</span><br><span class="line"></span><br><span class="line">    read(client_sock, buffer, <span class="keyword">sizeof</span>(buffer)<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">strstr</span>(buffer, <span class="string">"HTTP/"</span>)) &#123;</span><br><span class="line">        sendError(sock);</span><br><span class="line">        close(client_sock);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">strcpy</span>(method, strtok(buffer,<span class="string">" /"</span>));</span><br><span class="line">    <span class="built_in">strcpy</span>(filename, strtok(<span class="literal">NULL</span>, <span class="string">" /"</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="number">0</span> != <span class="built_in">strcmp</span>(method, <span class="string">"GET"</span>)) &#123;</span><br><span class="line">        sendError(sock);</span><br><span class="line">        close(client_sock);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sendData(sock, filename);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendData</span><span class="params">(<span class="keyword">int</span> *sock, <span class="keyword">char</span> *filename)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> client_sock = *sock;</span><br><span class="line">    <span class="keyword">char</span> buffer[common_buffer_size];</span><br><span class="line">    <span class="keyword">char</span> type[common_buffer_size];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">strcpy</span>(buffer, filename);</span><br><span class="line"></span><br><span class="line">    strtok(buffer, <span class="string">"."</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(type, strtok(<span class="literal">NULL</span>, <span class="string">"."</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="number">0</span> == <span class="built_in">strcmp</span>(type, <span class="string">"html"</span>))&#123;</span><br><span class="line">        sendHTML(sock, filename);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">0</span> == <span class="built_in">strcmp</span>(type, <span class="string">"jpg"</span>))&#123;</span><br><span class="line">        sendJPG(sock, filename);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        sendError(sock);</span><br><span class="line">        close(client_sock);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendHTML</span><span class="params">(<span class="keyword">int</span> *sock, <span class="keyword">char</span> *filename)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> client_sock = *sock;</span><br><span class="line">    <span class="keyword">char</span> buffer[buffer_size];</span><br><span class="line">    FILE *fp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> status[] = <span class="string">"HTTP/1.0 200 OK\r\n"</span>;</span><br><span class="line">    <span class="keyword">char</span> header[] = <span class="string">"Server: A Simple Web Server\r\nContent-Type: text/html\r\n\r\n"</span>;</span><br><span class="line"></span><br><span class="line">    write(client_sock, status, <span class="built_in">strlen</span>(status));</span><br><span class="line">    write(client_sock, header, <span class="built_in">strlen</span>(header));</span><br><span class="line"></span><br><span class="line">    fp = fopen(filename, <span class="string">"r"</span>);</span><br><span class="line">    <span class="keyword">if</span>(!fp)&#123;</span><br><span class="line">        sendError(sock);</span><br><span class="line">        close(client_sock);</span><br><span class="line">        handleError(<span class="string">"failed to open file"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fgets(buffer,<span class="keyword">sizeof</span>(buffer), fp);</span><br><span class="line">    <span class="keyword">while</span>(!feof(fp)) &#123;</span><br><span class="line">        write(client_sock, buffer, <span class="built_in">strlen</span>(buffer));</span><br><span class="line">        fgets(buffer, <span class="keyword">sizeof</span>(buffer), fp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fclose(fp);</span><br><span class="line">    close(client_sock);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendJPG</span><span class="params">(<span class="keyword">int</span> *sock, <span class="keyword">char</span> *filename)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> client_sock = *sock;</span><br><span class="line">    <span class="keyword">char</span> buffer[buffer_size];</span><br><span class="line">    FILE *fp;</span><br><span class="line">    FILE *fw;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> status[] = <span class="string">"HTTP/1.0 200 OK\r\n"</span>;</span><br><span class="line">    <span class="keyword">char</span> header[] = <span class="string">"Server: A Simple Web Server\r\nContent-Type: image/jpeg\r\n\r\n"</span>;</span><br><span class="line"></span><br><span class="line">    write(client_sock, status, <span class="built_in">strlen</span>(status));</span><br><span class="line">    write(client_sock, header, <span class="built_in">strlen</span>(header));</span><br><span class="line"></span><br><span class="line">    fp = fopen(filename, <span class="string">"rb"</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">NULL</span> == fp)&#123;</span><br><span class="line">        sendError(sock);</span><br><span class="line">        close(client_sock);</span><br><span class="line">        handleError(<span class="string">"failed to open file"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fw = fdopen(client_sock, <span class="string">"w"</span>);</span><br><span class="line">    fread(buffer, <span class="number">1</span>, <span class="keyword">sizeof</span>(buffer), fp);</span><br><span class="line">    <span class="keyword">while</span> (!feof(fp))&#123;</span><br><span class="line">        fwrite(buffer, <span class="number">1</span>, <span class="keyword">sizeof</span>(buffer), fw);</span><br><span class="line">        fread(buffer, <span class="number">1</span>, <span class="keyword">sizeof</span>(buffer), fp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fclose(fw);</span><br><span class="line">    fclose(fp);</span><br><span class="line">    close(client_sock);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">handleError</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;message)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;message;</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendError</span><span class="params">(<span class="keyword">int</span> *sock)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> client_sock = *sock;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> status[] = <span class="string">"HTTP/1.0 400 Bad Request\r\n"</span>;</span><br><span class="line">    <span class="keyword">char</span> header[] = <span class="string">"Server: A Simple Web Server\r\nContent-Type: text/html\r\n\r\n"</span>;</span><br><span class="line">    <span class="keyword">char</span> body[] = <span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Bad Request&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;400 Bad Request&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    write(client_sock, status, <span class="keyword">sizeof</span>(status));</span><br><span class="line">    write(client_sock, header, <span class="keyword">sizeof</span>(header));</span><br><span class="line">    write(client_sock, body, <span class="keyword">sizeof</span>(body));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/02/bash-commands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/02/bash-commands/" class="post-title-link" itemprop="url">Bash Commands</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-02 11:59:59 / Modified: 12:01:43" itemprop="dateCreated datePublished" datetime="2020-01-02T11:59:59-06:00">2020-01-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-Basic-Operations"><a href="#1-Basic-Operations" class="headerlink" title="1. Basic Operations"></a>1. Basic Operations</h1><h3 id="a-export"><a href="#a-export" class="headerlink" title="a. export"></a>a. <code>export</code></h3><p>Displays all environment variables. If you want to get details of a specific variable, use <code>echo $VARIABLE_NAME</code>.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span></span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span></span><br><span class="line">LANG=en_US.UTF-8</span><br><span class="line">LC_CTYPE=en_US.UTF-8</span><br><span class="line">LESS=-R</span><br></pre></td></tr></table></figure>

<h3 id="b-whatis"><a href="#b-whatis" class="headerlink" title="b. whatis"></a>b. <code>whatis</code></h3><p>whatis shows description for user commands, system calls, library functions, and others in manual pages</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatis something</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ whatis bash</span><br><span class="line">bash (1)             - GNU Bourne-Again SHell</span><br></pre></td></tr></table></figure>

<h3 id="c-whereis"><a href="#c-whereis" class="headerlink" title="c. whereis"></a>c. <code>whereis</code></h3><p>whereis searches for executables, source files, and manual pages using a database built by system automatically.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis name</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ whereis java</span><br><span class="line">/usr/bin/java</span><br></pre></td></tr></table></figure>

<h3 id="d-which"><a href="#d-which" class="headerlink" title="d. which"></a>d. <code>which</code></h3><p>which searches for executables in the directories specified by the environment variable PATH. This command will print the full path of the executable(s).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> program_name</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> java</span><br><span class="line">/usr/bin/java</span><br></pre></td></tr></table></figure>

<h3 id="e-clear"><a href="#e-clear" class="headerlink" title="e. clear"></a>e. clear</h3><p>Clears content on window.</p>
<h2 id="1-1-File-Operations"><a href="#1-1-File-Operations" class="headerlink" title="1.1. File Operations"></a>1.1. File Operations</h2><table>
   <tr>
      <td><a href="#a-cat">cat</a></td>
      <td><a href="#b-chmod">chmod</a></td>
      <td><a href="#c-chown">chown</a></td>
      <td><a href="#d-cp">cp</a></td>
      <td><a href="#e-diff">diff</a></td>
      <td><a href="#f-file">file</a></td>
      <td><a href="#g-find">find</a></td>
      <td><a href="#h-gunzip">gunzip</a></td>
      <td><a href="#i-gzcat">gzcat</a></td>
      <td><a href="#j-gzip">gzip</a></td>
      <td><a href="#k-head">head</a></td>
   </tr>
   <tr>
      <td><a href="#l-lpq">lpq</a></td>
      <td><a href="#m-lpr">lpr</a></td>
      <td><a href="#n-lprm">lprm</a></td>
      <td><a href="#o-ls">ls</a></td>
      <td><a href="#p-more">more</a></td>
      <td><a href="#q-mv">mv</a></td>
      <td><a href="#r-rm">rm</a></td>
      <td><a href="#s-tail">tail</a></td>
      <td><a href="#t-touch">touch</a></td>
   </tr>
</table>

<h3 id="a-cat"><a href="#a-cat" class="headerlink" title="a. cat"></a>a. <code>cat</code></h3><p>It can be used for the following purposes under UNIX or Linux.  </p>
<ul>
<li>Display text files on screen</li>
<li>Copy text files  </li>
<li>Combine text files  </li>
<li>Create new text files  </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat filename</span><br><span class="line">cat file1 file2 </span><br><span class="line">cat file1 file2 &gt; newcombinedfile</span><br><span class="line">cat &lt; file1 &gt; file2 <span class="comment">#copy file1 to file2</span></span><br></pre></td></tr></table></figure>

<h3 id="b-chmod"><a href="#b-chmod" class="headerlink" title="b. chmod"></a>b. <code>chmod</code></h3><p>The chmod command stands for “change mode” and allows you to change the read, write, and execute permissions on your files and folders. For more information on this command check this <a href="https://ss64.com/bash/chmod.html" target="_blank" rel="noopener">link</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -options filename</span><br></pre></td></tr></table></figure>

<h3 id="c-chown"><a href="#c-chown" class="headerlink" title="c. chown"></a>c. <code>chown</code></h3><p>The chown command stands for “change owner”, and allows you to change the owner of a given file or folder, which can be a user and a group. Basic usage is simple forward first comes the user (owner), and then the group, delimited by a colon.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -options user:group filename</span><br></pre></td></tr></table></figure>

<h3 id="d-cp"><a href="#d-cp" class="headerlink" title="d. cp"></a>d. <code>cp</code></h3><p>Copies a file from one location to other.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp filename1 filename2</span><br></pre></td></tr></table></figure>

<p>Where <code>filename1</code> is the source path to the file and <code>filename2</code> is the destination path to the file.</p>
<h3 id="e-diff"><a href="#e-diff" class="headerlink" title="e. diff"></a>e. <code>diff</code></h3><p>Compares files, and lists their differences.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff filename1 filename2</span><br></pre></td></tr></table></figure>

<h3 id="f-file"><a href="#f-file" class="headerlink" title="f. file"></a>f. <code>file</code></h3><p>Determine file type.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file filename</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ file index.html</span><br><span class="line"> index.html: HTML document, ASCII text</span><br></pre></td></tr></table></figure>

<h3 id="g-find"><a href="#g-find" class="headerlink" title="g. find"></a>g. <code>find</code></h3><p>Find files in directory</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find directory options pattern</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ find . -name README.md</span><br><span class="line">$ find /home/user1 -name <span class="string">'*.png'</span></span><br></pre></td></tr></table></figure>

<h3 id="h-gunzip"><a href="#h-gunzip" class="headerlink" title="h. gunzip"></a>h. <code>gunzip</code></h3><p>Un-compresses files compressed by gzip.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunzip filename</span><br></pre></td></tr></table></figure>

<h3 id="i-gzcat"><a href="#i-gzcat" class="headerlink" title="i. gzcat"></a>i. <code>gzcat</code></h3><p>Lets you look at gzipped file without actually having to gunzip it.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzcat filename</span><br></pre></td></tr></table></figure>

<h3 id="j-gzip"><a href="#j-gzip" class="headerlink" title="j. gzip"></a>j. <code>gzip</code></h3><p>Compresses files.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip filename</span><br></pre></td></tr></table></figure>

<h3 id="k-head"><a href="#k-head" class="headerlink" title="k. head"></a>k. <code>head</code></h3><p>Outputs the first 10 lines of file  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head filename</span><br></pre></td></tr></table></figure>

<h3 id="l-lpq"><a href="#l-lpq" class="headerlink" title="l. lpq"></a>l. <code>lpq</code></h3><p>Check out the printer queue.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpq</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ lpq</span><br><span class="line">Rank    Owner   Job     File(s)                         Total Size</span><br><span class="line">active  adnanad 59      demo                            399360 bytes</span><br><span class="line">1st     adnanad 60      (stdin)                         0 bytes</span><br></pre></td></tr></table></figure>

<h3 id="m-lpr"><a href="#m-lpr" class="headerlink" title="m. lpr"></a>m. <code>lpr</code></h3><p>Print the file.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpr filename</span><br></pre></td></tr></table></figure>

<h3 id="n-lprm"><a href="#n-lprm" class="headerlink" title="n. lprm"></a>n. <code>lprm</code></h3><p>Remove something from the printer queue.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lprm jobnumber</span><br></pre></td></tr></table></figure>

<h3 id="o-ls"><a href="#o-ls" class="headerlink" title="o. ls"></a>o. <code>ls</code></h3><p>Lists your files. <code>ls</code> has many options: <code>-l</code> lists files in ‘long format’, which contains the exact size of the file, who owns the file, who has the right to look at it, and when it was last modified. <code>-a</code> lists all files, including hidden files. For more information on this command check this <a href="https://ss64.com/bash/ls.html" target="_blank" rel="noopener">link</a>.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls option</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<pre>
$ ls -la
rwxr-xr-x   33 adnan  staff    1122 Mar 27 18:44 .
drwxrwxrwx  60 adnan  staff    2040 Mar 21 15:06 ..
-rw-r--r--@  1 adnan  staff   14340 Mar 23 15:05 .DS_Store
-rw-r--r--   1 adnan  staff     157 Mar 25 18:08 .bumpversion.cfg
-rw-r--r--   1 adnan  staff    6515 Mar 25 18:08 .config.ini
-rw-r--r--   1 adnan  staff    5805 Mar 27 18:44 .config.override.ini
drwxr-xr-x  17 adnan  staff     578 Mar 27 23:36 .git
-rwxr-xr-x   1 adnan  staff    2702 Mar 25 18:08 .gitignore
</pre>

<h3 id="p-more"><a href="#p-more" class="headerlink" title="p. more"></a>p. <code>more</code></h3><p>Shows the first part of a file (move with space and type q to quit).  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more filename</span><br></pre></td></tr></table></figure>

<h3 id="q-mv"><a href="#q-mv" class="headerlink" title="q. mv"></a>q. <code>mv</code></h3><p>Moves a file from one location to other.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv filename1 filename2</span><br></pre></td></tr></table></figure>

<p>Where <code>filename1</code> is the source path to the file and <code>filename2</code> is the destination path to the file.</p>
<p>Also it can be used for rename a file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv old_name new_name</span><br></pre></td></tr></table></figure>

<h3 id="r-rm"><a href="#r-rm" class="headerlink" title="r. rm"></a>r. <code>rm</code></h3><p>Removes a file. Using this command on a directory gives you an error.<br><code>rm: directory: is a directory</code><br>To remove a directory you have to pass <code>-r</code> which will remove the content of the directory recursively. Optionally you can use <code>-f</code> flag to force the deletion i.e. without any confirmations etc.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm filename</span><br></pre></td></tr></table></figure>

<h3 id="s-tail"><a href="#s-tail" class="headerlink" title="s. tail"></a>s. <code>tail</code></h3><p>Outputs the last 10 lines of file. Use <code>-f</code> to output appended data as the file grows.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail filename</span><br></pre></td></tr></table></figure>

<h3 id="t-touch"><a href="#t-touch" class="headerlink" title="t. touch"></a>t. <code>touch</code></h3><p>Updates access and modification time stamps of your file. If it doesn’t exists, it’ll be created.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch filename</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch trick.md</span><br></pre></td></tr></table></figure>

<h2 id="1-2-Text-Operations"><a href="#1-2-Text-Operations" class="headerlink" title="1.2. Text Operations"></a>1.2. Text Operations</h2><table>
    <tr>
      <td><a href="#a-awk">awk</a></td>
      <td><a href="#b-cut">cut</a></td>
      <td><a href="#c-echo">echo</a></td>
      <td><a href="#d-egrep">egrep</a></td>
      <td><a href="#e-fgrep">fgrep</a></td>
      <td><a href="#f-fmt">fmt</a></td>
      <td><a href="#g-grep">grep</a></td>
      <td><a href="#h-nl">nl</a></td>
      <td><a href="#i-sed">sed</a></td>
      <td><a href="#j-sort">sort</a></td>
   </tr>
   <tr>
      <td><a href="#k-tr">tr</a></td>
      <td><a href="#l-uniq">uniq</a></td>
      <td><a href="#m-wc">wc</a></td>
   </tr>
</table>

<h3 id="a-awk"><a href="#a-awk" class="headerlink" title="a. awk"></a>a. <code>awk</code></h3><p>awk is the most useful command for handling text files. It operates on an entire file line by line. By default it uses whitespace to separate the fields. The most common syntax for awk command is</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'/search_pattern/ &#123; action_to_take_if_pattern_matches; &#125;'</span> file_to_parse</span><br></pre></td></tr></table></figure>

<p>Lets take following file <code>/etc/passwd</code>. Here’s the sample data that this file contains:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:&#x2F;root:&#x2F;usr&#x2F;bin&#x2F;zsh</span><br><span class="line">daemon:x:1:1:daemon:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">bin:x:2:2:bin:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">sys:x:3:3:sys:&#x2F;dev:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">sync:x:4:65534:sync:&#x2F;bin:&#x2F;bin&#x2F;sync</span><br></pre></td></tr></table></figure>

<p>So now lets get only username from this file. Where <code>-F</code> specifies that on which base we are going to separate the fields. In our case it’s <code>:</code>. <code>{ print $1 }</code> means print out the first matching field.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">':'</span> <span class="string">'&#123; print $1 &#125;'</span> /etc/passwd</span><br></pre></td></tr></table></figure>

<p>After running the above command you will get following output.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root</span><br><span class="line">daemon</span><br><span class="line">bin</span><br><span class="line">sys</span><br><span class="line">sync</span><br></pre></td></tr></table></figure>

<p>For more detail on how to use <code>awk</code>, check following <a href="https://www.cyberciti.biz/faq/bash-scripting-using-awk" target="_blank" rel="noopener">link</a>.</p>
<h3 id="b-cut"><a href="#b-cut" class="headerlink" title="b. cut"></a>b. <code>cut</code></h3><p>Remove sections from each line of files</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">red riding hood went to the park to play</span><br></pre></td></tr></table></figure>

<p><em>show me columns 2 , 7 , and 9 with a space as a separator</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -d <span class="string">" "</span> -f2,7,9 example.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">riding park play</span><br></pre></td></tr></table></figure>

<h3 id="c-echo"><a href="#c-echo" class="headerlink" title="c. echo"></a>c. <code>echo</code></h3><p>Display a line of text</p>
<p><em>display “Hello World”</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> Hello World</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<p><em>display “Hello World” with newlines between words</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -ne <span class="string">"Hello\nWorld\n"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br><span class="line">World</span><br></pre></td></tr></table></figure>

<h3 id="d-egrep"><a href="#d-egrep" class="headerlink" title="d. egrep"></a>d. <code>egrep</code></h3><p>Print lines matching a pattern - Extended Expression (alias for: ‘grep -E’)</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum</span><br><span class="line">dolor sit amet, </span><br><span class="line">consetetur</span><br><span class="line">sadipscing elitr,</span><br><span class="line">sed diam nonumy</span><br><span class="line">eirmod tempor</span><br><span class="line">invidunt ut labore</span><br><span class="line">et dolore magna</span><br><span class="line">aliquyam erat, sed</span><br><span class="line">diam voluptua. At</span><br><span class="line">vero eos et</span><br><span class="line">accusam et justo</span><br><span class="line">duo dolores et ea</span><br><span class="line">rebum. Stet clita</span><br><span class="line">kasd gubergren,</span><br><span class="line">no sea takimata</span><br><span class="line">sanctus est Lorem</span><br><span class="line">ipsum dolor sit</span><br><span class="line">amet.</span><br></pre></td></tr></table></figure>

<p><em>display lines that have either “Lorem” or “dolor” in them.</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">egrep <span class="string">'(Lorem|dolor)'</span> example.txt</span><br><span class="line">or</span><br><span class="line">grep -E <span class="string">'(Lorem|dolor)'</span> example.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum</span><br><span class="line">dolor sit amet,</span><br><span class="line">et dolore magna</span><br><span class="line">duo dolores et ea</span><br><span class="line">sanctus est Lorem</span><br><span class="line">ipsum dolor sit</span><br></pre></td></tr></table></figure>

<h3 id="e-fgrep"><a href="#e-fgrep" class="headerlink" title="e. fgrep"></a>e. <code>fgrep</code></h3><p>Print lines matching a pattern - FIXED pattern matching  (alias for: ‘grep -F’)</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum</span><br><span class="line">dolor sit amet,</span><br><span class="line">consetetur</span><br><span class="line">sadipscing elitr,</span><br><span class="line">sed diam nonumy</span><br><span class="line">eirmod tempor</span><br><span class="line">foo (Lorem|dolor) </span><br><span class="line">invidunt ut labore</span><br><span class="line">et dolore magna</span><br><span class="line">aliquyam erat, sed</span><br><span class="line">diam voluptua. At</span><br><span class="line">vero eos et</span><br><span class="line">accusam et justo</span><br><span class="line">duo dolores et ea</span><br><span class="line">rebum. Stet clita</span><br><span class="line">kasd gubergren,</span><br><span class="line">no sea takimata</span><br><span class="line">sanctus est Lorem</span><br><span class="line">ipsum dolor sit</span><br><span class="line">amet.</span><br></pre></td></tr></table></figure>

<p><em>Find the exact string ‘(Lorem|dolor)’ in example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fgrep <span class="string">'(Lorem|dolor)'</span> example.txt</span><br><span class="line">or</span><br><span class="line">grep -F <span class="string">'(Lorem|dolor)'</span> example.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo (Lorem|dolor)</span><br></pre></td></tr></table></figure>

<h3 id="f-fmt"><a href="#f-fmt" class="headerlink" title="f. fmt"></a>f. <code>fmt</code></h3><p>Simple optimal text formatter</p>
<p><em>example: example.txt (1 line)</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</span><br></pre></td></tr></table></figure>

<p><em>output the lines of example.txt to 20 character width</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat example.txt | fmt -w 20</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum</span><br><span class="line">dolor sit amet,</span><br><span class="line">consetetur</span><br><span class="line">sadipscing elitr,</span><br><span class="line">sed diam nonumy</span><br><span class="line">eirmod tempor</span><br><span class="line">invidunt ut labore</span><br><span class="line">et dolore magna</span><br><span class="line">aliquyam erat, sed</span><br><span class="line">diam voluptua. At</span><br><span class="line">vero eos et</span><br><span class="line">accusam et justo</span><br><span class="line">duo dolores et ea</span><br><span class="line">rebum. Stet clita</span><br><span class="line">kasd gubergren,</span><br><span class="line">no sea takimata</span><br><span class="line">sanctus est Lorem</span><br><span class="line">ipsum dolor sit</span><br><span class="line">amet.</span><br></pre></td></tr></table></figure>

<h3 id="g-grep"><a href="#g-grep" class="headerlink" title="g. grep"></a>g. <code>grep</code></h3><p>Looks for text inside files. You can use grep to search for lines of text that match one or many regular expressions, and outputs only the matching lines.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep pattern filename</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ grep admin /etc/passwd</span><br><span class="line">_kadmin_admin:*:218:-2:Kerberos Admin Service:/var/empty:/usr/bin/<span class="literal">false</span></span><br><span class="line">_kadmin_changepw:*:219:-2:Kerberos Change Password Service:/var/empty:/usr/bin/<span class="literal">false</span></span><br><span class="line">_krb_kadmin:*:231:-2:Open Directory Kerberos Admin Service:/var/empty:/usr/bin/<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>You can also force grep to ignore word case by using <code>-i</code> option. <code>-r</code> can be used to search all files under the specified directory, for example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep -r admin /etc/</span><br></pre></td></tr></table></figure>

<p>And <code>-w</code> to search for words only. For more detail on <code>grep</code>, check following <a href="https://www.cyberciti.biz/faq/grep-in-bash" target="_blank" rel="noopener">link</a>.</p>
<h3 id="h-nl"><a href="#h-nl" class="headerlink" title="h. nl"></a>h. <code>nl</code></h3><p>Number lines of files</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum</span><br><span class="line">dolor sit amet,</span><br><span class="line">consetetur</span><br><span class="line">sadipscing elitr,</span><br><span class="line">sed diam nonumy</span><br><span class="line">eirmod tempor</span><br><span class="line">invidunt ut labore</span><br><span class="line">et dolore magna</span><br><span class="line">aliquyam erat, sed</span><br><span class="line">diam voluptua. At</span><br><span class="line">vero eos et</span><br><span class="line">accusam et justo</span><br><span class="line">duo dolores et ea</span><br><span class="line">rebum. Stet clita</span><br><span class="line">kasd gubergren,</span><br><span class="line">no sea takimata</span><br><span class="line">sanctus est Lorem</span><br><span class="line">ipsum dolor sit</span><br><span class="line">amet.</span><br></pre></td></tr></table></figure>

<p><em>show example.txt with line numbers</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl -s<span class="string">". "</span> example.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> 1. Lorem ipsum</span><br><span class="line"> 2. dolor sit amet,</span><br><span class="line"> 3. consetetur</span><br><span class="line"> 4. sadipscing elitr,</span><br><span class="line"> 5. sed diam nonumy</span><br><span class="line"> 6. eirmod tempor</span><br><span class="line"> 7. invidunt ut labore</span><br><span class="line"> 8. et dolore magna</span><br><span class="line"> 9. aliquyam erat, sed</span><br><span class="line">10. diam voluptua. At</span><br><span class="line">11. vero eos et</span><br><span class="line">12. accusam et justo</span><br><span class="line">13. duo dolores et ea</span><br><span class="line">14. rebum. Stet clita</span><br><span class="line">15. kasd gubergren,</span><br><span class="line">16. no sea takimata</span><br><span class="line">17. sanctus est Lorem</span><br><span class="line">18. ipsum dolor sit</span><br><span class="line">19. amet.</span><br></pre></td></tr></table></figure>

<h3 id="i-sed"><a href="#i-sed" class="headerlink" title="i. sed"></a>i. <code>sed</code></h3><p>Stream editor for filtering and transforming text</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello This is a Test 1 2 3 4</span><br></pre></td></tr></table></figure>

<p><em>replace all spaces with hyphens</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/ /-/g'</span> example.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello-This-is<span class="_">-a</span>-Test-1-2-3-4</span><br></pre></td></tr></table></figure>

<p><em>replace all digits with “d”</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/[0-9]/d/g'</span> example.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello This is a Test d d d d</span><br></pre></td></tr></table></figure>

<h3 id="j-sort"><a href="#j-sort" class="headerlink" title="j. sort"></a>j. <code>sort</code></h3><p>Sort lines of text files</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">g</span><br><span class="line">a</span><br><span class="line">e</span><br><span class="line">d</span><br></pre></td></tr></table></figure>

<p><em>sort example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort example.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">f</span><br><span class="line">g</span><br></pre></td></tr></table></figure>

<p><em>randomize a sorted example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort example.txt | sort -R</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b</span><br><span class="line">f</span><br><span class="line">a</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">g</span><br><span class="line">e</span><br></pre></td></tr></table></figure>

<h3 id="k-tr"><a href="#k-tr" class="headerlink" title="k. tr"></a>k. <code>tr</code></h3><p>Translate or delete characters</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World Foo Bar Baz!</span><br></pre></td></tr></table></figure>

<p><em>take all lower case letters and make them upper case</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat example.txt | tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HELLO WORLD FOO BAR BAZ!</span><br></pre></td></tr></table></figure>

<p><em>take all spaces and make them into newlines</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat example.txt | tr <span class="string">' '</span> <span class="string">'\n'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br><span class="line">World</span><br><span class="line">Foo</span><br><span class="line">Bar</span><br><span class="line">Baz!</span><br></pre></td></tr></table></figure>

<h3 id="l-uniq"><a href="#l-uniq" class="headerlink" title="l. uniq"></a>l. <code>uniq</code></h3><p>Report or omit repeated lines</p>
<p><em>example.txt</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<p><em>show only unique lines of example.txt (first you need to sort it, otherwise it won’t see the overlap)</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort example.txt | uniq</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br></pre></td></tr></table></figure>

<p><em>show the unique items for each line, and tell me how many instances it found</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort example.txt | uniq -c</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 a</span><br><span class="line">2 b</span><br><span class="line">2 c</span><br><span class="line">1 d</span><br></pre></td></tr></table></figure>

<h3 id="m-wc"><a href="#m-wc" class="headerlink" title="m. wc"></a>m. <code>wc</code></h3><p>Tells you how many lines, words and characters there are in a file.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc filename</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wc demo.txt</span><br><span class="line">7459   15915  398400 demo.txt</span><br></pre></td></tr></table></figure>

<p>Where <code>7459</code> is lines, <code>15915</code> is words and <code>398400</code> is characters.</p>
<h2 id="1-3-Directory-Operations"><a href="#1-3-Directory-Operations" class="headerlink" title="1.3. Directory Operations"></a>1.3. Directory Operations</h2><table>
   <tr>
      <td><a href="#a-cd">cd</a></td>
      <td><a href="#b-mkdir">mkdir</a></td>
      <td><a href="#c-pwd">pwd</a></td>
   </tr>
</table>

<h3 id="a-cd"><a href="#a-cd" class="headerlink" title="a. cd"></a>a. <code>cd</code></h3><p>Moves you from one directory to other. Running this  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span></span><br></pre></td></tr></table></figure>

<p>moves you to home directory. This command accepts an optional <code>dirname</code>, which moves you to that directory.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> dirname</span><br></pre></td></tr></table></figure>

<h3 id="b-mkdir"><a href="#b-mkdir" class="headerlink" title="b. mkdir"></a>b. <code>mkdir</code></h3><p>Makes a new directory.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir dirname</span><br></pre></td></tr></table></figure>

<p>You can use this to create multiple directories at once within your current directory.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir 1stDirectory 2ndDirectory 3rdDirectory</span><br></pre></td></tr></table></figure>

<p>You can also use this to create parent directories at the same time. For instance, if you wanted a directory named ‘project1’ in another subdirectory at ‘/samples/bash/projects/‘, you could run:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /samples/bash/projects/project1</span><br></pre></td></tr></table></figure>

<p>If any of these directories did no already exist, they would be created as well.</p>
<h3 id="c-pwd"><a href="#c-pwd" class="headerlink" title="c. pwd"></a>c. <code>pwd</code></h3><p>Tells you which directory you currently are in.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-SSH-System-Info-amp-Network-Operations"><a href="#1-4-SSH-System-Info-amp-Network-Operations" class="headerlink" title="1.4. SSH, System Info &amp; Network Operations"></a>1.4. SSH, System Info &amp; Network Operations</h2><table>
   <tr>
      <td><a href="#a-bg">bg</a></td>
      <td><a href="#b-cal">cal</a></td>
      <td><a href="#c-date">date</a></td>
      <td><a href="#d-df">df</a></td>
      <td><a href="#e-dig">dig</a></td>
      <td><a href="#f-du">du</a></td>
      <td><a href="#g-fg">fg</a></td>
      <td><a href="#h-finger">finger</a></td>   
      <td><a href="#i-jobs">jobs</a></td>
      <td><a href="#j-last">last</a></td>
   </tr>
   <tr>
      <td><a href="#k-man">man</a></td>
      <td><a href="#l-passwd">passwd</a></td>
      <td><a href="#m-ping">ping</a></td>
      <td><a href="#n-ps">ps</a></td>
      <td><a href="#o-quota">quota</a></td>
      <td><a href="#p-scp">scp</a></td>
      <td><a href="#q-ssh">ssh</a></td>
      <td><a href="#r-top">top</a></td>
      <td><a href="#s-uname">uname</a></td>
      <td><a href="#t-uptime">uptime</a></td>
   </tr>
   <tr>
      <td><a href="#u-w">w</a></td>
      <td><a href="#v-wget">wget</a></td>
      <td><a href="#w-whoami">whoami</a></td>
      <td><a href="#x-whois">whois</a></td>
   </tr>
</table>

<h3 id="a-bg"><a href="#a-bg" class="headerlink" title="a. bg"></a>a. <code>bg</code></h3><p>Lists stopped or background jobs; resume a stopped job in the background.</p>
<h3 id="b-cal"><a href="#b-cal" class="headerlink" title="b. cal"></a>b. <code>cal</code></h3><p>Shows the month’s calendar.</p>
<h3 id="c-date"><a href="#c-date" class="headerlink" title="c. date"></a>c. <code>date</code></h3><p>Shows the current date and time.</p>
<h3 id="d-df"><a href="#d-df" class="headerlink" title="d. df"></a>d. <code>df</code></h3><p>Shows disk usage.</p>
<h3 id="e-dig"><a href="#e-dig" class="headerlink" title="e. dig"></a>e. <code>dig</code></h3><p>Gets DNS information for domain.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig domain</span><br></pre></td></tr></table></figure>

<h3 id="f-du"><a href="#f-du" class="headerlink" title="f. du"></a>f. <code>du</code></h3><p>Shows the disk usage of files or directories. For more information on this command check this <a href="http://www.linfo.org/du.html" target="_blank" rel="noopener">link</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du [option] [filename|directory]</span><br></pre></td></tr></table></figure>

<p>Options:</p>
<ul>
<li><code>-h</code> (human readable) Displays output it in kilobytes (K), megabytes (M) and gigabytes (G).</li>
<li><code>-s</code> (supress or summarize) Outputs total disk space of a directory and supresses reports for subdirectories. </li>
</ul>
<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">du -sh pictures</span><br><span class="line">1.4M pictures</span><br></pre></td></tr></table></figure>

<h3 id="g-fg"><a href="#g-fg" class="headerlink" title="g. fg"></a>g. <code>fg</code></h3><p>Brings the most recent job in the foreground.</p>
<h3 id="h-finger"><a href="#h-finger" class="headerlink" title="h. finger"></a>h. <code>finger</code></h3><p>Displays information about user.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">finger username</span><br></pre></td></tr></table></figure>

<h3 id="i-jobs"><a href="#i-jobs" class="headerlink" title="i. jobs"></a>i. <code>jobs</code></h3><p>Lists the jobs running in the background, giving the job number.</p>
<h3 id="j-last"><a href="#j-last" class="headerlink" title="j. last"></a>j. <code>last</code></h3><p>Lists your last logins of specified user.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">last yourUsername</span><br></pre></td></tr></table></figure>

<h3 id="k-man"><a href="#k-man" class="headerlink" title="k. man"></a>k. <code>man</code></h3><p>Shows the manual for specified command.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">command</span></span><br></pre></td></tr></table></figure>

<h3 id="l-passwd"><a href="#l-passwd" class="headerlink" title="l. passwd"></a>l. <code>passwd</code></h3><p>Allows the current logged user to change their password.</p>
<h3 id="m-ping"><a href="#m-ping" class="headerlink" title="m. ping"></a>m. <code>ping</code></h3><p>Pings host and outputs results.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping host</span><br></pre></td></tr></table></figure>

<h3 id="n-ps"><a href="#n-ps" class="headerlink" title="n. ps"></a>n. <code>ps</code></h3><p>Lists your processes.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -u yourusername</span><br></pre></td></tr></table></figure>

<p>Use the flags ef. e for every process and f for full listing. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef</span><br></pre></td></tr></table></figure>

<h3 id="o-quota"><a href="#o-quota" class="headerlink" title="o. quota"></a>o. <code>quota</code></h3><p>Shows what your disk quota is.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quota -v</span><br></pre></td></tr></table></figure>

<h3 id="p-scp"><a href="#p-scp" class="headerlink" title="p. scp"></a>p. <code>scp</code></h3><p>Transfer files between a local host and a remote host or between two remote hosts.</p>
<p><em>copy from local host to remote host</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp source_file user@host:directory/target_file</span><br></pre></td></tr></table></figure>

<p><em>copy from remote host to local host</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp user@host:directory/source_file target_file</span><br><span class="line">scp -r user@host:directory/source_folder target_folder</span><br></pre></td></tr></table></figure>

<p>This command also accepts an option <code>-P</code> that can be used to connect to specific port.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -P port user@host:directory/source_file target_file</span><br></pre></td></tr></table></figure>

<h3 id="q-ssh"><a href="#q-ssh" class="headerlink" title="q. ssh"></a>q. <code>ssh</code></h3><p>ssh (SSH client) is a program for logging into and executing commands on a remote machine.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@host</span><br></pre></td></tr></table></figure>

<p>This command also accepts an option <code>-p</code> that can be used to connect to specific port.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p port user@host</span><br></pre></td></tr></table></figure>

<h3 id="r-top"><a href="#r-top" class="headerlink" title="r. top"></a>r. <code>top</code></h3><p>Displays your currently active processes.</p>
<h3 id="s-uname"><a href="#s-uname" class="headerlink" title="s. uname"></a>s. <code>uname</code></h3><p>Shows kernel information.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure>

<h3 id="t-uptime"><a href="#t-uptime" class="headerlink" title="t. uptime"></a>t. <code>uptime</code></h3><p>Shows current uptime.</p>
<h3 id="u-w"><a href="#u-w" class="headerlink" title="u. w"></a>u. <code>w</code></h3><p>Displays who is online.</p>
<h3 id="v-wget"><a href="#v-wget" class="headerlink" title="v. wget"></a>v. <code>wget</code></h3><p>Downloads file.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget file</span><br></pre></td></tr></table></figure>

<h3 id="w-whoami"><a href="#w-whoami" class="headerlink" title="w. whoami"></a>w. <code>whoami</code></h3><p>Return current logged in username.</p>
<h3 id="x-whois"><a href="#x-whois" class="headerlink" title="x. whois"></a>x. <code>whois</code></h3><p>Gets whois information for domain.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whois domain</span><br></pre></td></tr></table></figure>

<h2 id="1-5-Process-Monitoring-Operations"><a href="#1-5-Process-Monitoring-Operations" class="headerlink" title="1.5. Process Monitoring Operations"></a>1.5. Process Monitoring Operations</h2><table>
   <tr>
      <td><a href="#a-kill">kill</a></td>
      <td><a href="#b-killall">killall</a></td>
      <td><a href="#c-&">&amp;</a></td>
      <td><a href="#d-nohup">nohup</a></td>
   </tr>
</table>

<h3 id="a-kill"><a href="#a-kill" class="headerlink" title="a. kill"></a>a. <code>kill</code></h3><p>Kills (ends) the processes with the ID you gave.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> PID</span><br></pre></td></tr></table></figure>

<h3 id="b-killall"><a href="#b-killall" class="headerlink" title="b. killall"></a>b. <code>killall</code></h3><p>Kill all processes with the name.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall processname</span><br></pre></td></tr></table></figure>

<h3 id="c-amp"><a href="#c-amp" class="headerlink" title="c. &amp;"></a>c. &amp;</h3><p>The <code>&amp;</code> symbol instructs the command to run as a background process in a subshell.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure>

<h3 id="d-nohup"><a href="#d-nohup" class="headerlink" title="d. nohup"></a>d. <code>nohup</code></h3><p>nohup stands for “No Hang Up”. This allows to run command/process or shell script that can continue running in the background after you log out from a shell.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="built_in">command</span></span><br></pre></td></tr></table></figure>

<p>Combine it with <code>&amp;</code> to create background processes </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure>

<h1 id="2-Basic-Shell-Programming"><a href="#2-Basic-Shell-Programming" class="headerlink" title="2. Basic Shell Programming"></a>2. Basic Shell Programming</h1><p>The first line that you will write in bash script files is called <code>shebang</code>. This line in any script determines the script’s ability to be executed like a standalone executable without typing sh, bash, python, php etc beforehand in the terminal.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br></pre></td></tr></table></figure>

<h2 id="2-1-Variables"><a href="#2-1-Variables" class="headerlink" title="2.1. Variables"></a>2.1. Variables</h2><p>Creating variables in bash is similar to other languages. There are no data types. A variable in bash can contain a number, a character, a string of characters, etc. You have no need to declare a variable, just assigning a value to its reference will create it.</p>
<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">"hello world"</span></span><br></pre></td></tr></table></figure>

<p>The above line creates a variable <code>str</code> and assigns “hello world” to it. The value of variable is retrieved by putting the <code>$</code> in the beginning of variable name.</p>
<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span>   <span class="comment"># hello world</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-Array"><a href="#2-2-Array" class="headerlink" title="2.2. Array"></a>2.2. Array</h2><p>Like other languages bash has also arrays. An array is a variable containing multiple values. There’s no maximum limit on the size of array. Arrays in bash are zero based. The first element is indexed with element 0. There are several ways for creating arrays in bash which are given below.</p>
<p>Examples:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">array[0]=val</span><br><span class="line">array[1]=val</span><br><span class="line">array[2]=val</span><br><span class="line">array=([2]=val [0]=val [1]=val)</span><br><span class="line">array=(val val val)</span><br></pre></td></tr></table></figure>

<p>To display a value at specific index use following syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;array[i]&#125;</span>     <span class="comment"># where i is the index</span></span><br></pre></td></tr></table></figure>

<p>If no index is supplied, array element 0 is assumed. To find out how many values there are in the array use the following syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;#array[@]&#125;</span></span><br></pre></td></tr></table></figure>

<p>Bash has also support for the ternary conditions. Check some examples below.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;varname:-word&#125;</span>    <span class="comment"># if varname exists and isn't null, return its value; otherwise return word</span></span><br><span class="line"><span class="variable">$&#123;varname:=word&#125;</span>    <span class="comment"># if varname exists and isn't null, return its value; otherwise set it word and then return its value</span></span><br><span class="line"><span class="variable">$&#123;varname:+word&#125;</span>    <span class="comment"># if varname exists and isn't null, return word; otherwise return null</span></span><br><span class="line"><span class="variable">$&#123;varname:offset:length&#125;</span>    <span class="comment"># performs substring expansion. It returns the substring of $varname starting at offset and up to length characters</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-String-Substitution"><a href="#2-3-String-Substitution" class="headerlink" title="2.3 String Substitution"></a>2.3 String Substitution</h2><p>Check some of the syntax on how to manipulate strings</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;variable#pattern&#125;</span>         <span class="comment"># if the pattern matches the beginning of the variable's value, delete the shortest part that matches and return the rest</span></span><br><span class="line"><span class="variable">$&#123;variable##pattern&#125;</span>        <span class="comment"># if the pattern matches the beginning of the variable's value, delete the longest part that matches and return the rest</span></span><br><span class="line"><span class="variable">$&#123;variable%pattern&#125;</span>         <span class="comment"># if the pattern matches the end of the variable's value, delete the shortest part that matches and return the rest</span></span><br><span class="line"><span class="variable">$&#123;variable%%pattern&#125;</span>        <span class="comment"># if the pattern matches the end of the variable's value, delete the longest part that matches and return the rest</span></span><br><span class="line"><span class="variable">$&#123;variable/pattern/string&#125;</span>  <span class="comment"># the longest match to pattern in variable is replaced by string. Only the first match is replaced</span></span><br><span class="line"><span class="variable">$&#123;variable//pattern/string&#125;</span> <span class="comment"># the longest match to pattern in variable is replaced by string. All matches are replaced</span></span><br><span class="line"><span class="variable">$&#123;#varname&#125;</span>     <span class="comment"># returns the length of the value of the variable as a character string</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-Functions"><a href="#2-4-Functions" class="headerlink" title="2.4. Functions"></a>2.4. Functions</h2><p>As in almost any programming language, you can use functions to group pieces of code in a more logical way or practice the divine art of recursion. Declaring a function is just a matter of writing function my_func { my_code }. Calling a function is just like calling another program, you just write its name.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">name</span></span>() &#123;</span><br><span class="line">    shell commands</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">function</span> hello &#123;</span><br><span class="line">   <span class="built_in">echo</span> world!</span><br><span class="line">&#125;</span><br><span class="line">hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> say &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line">say <span class="string">"hello world!"</span></span><br></pre></td></tr></table></figure>

<p>When you run the above example the <code>hello</code> function will output “world!”. The above two functions <code>hello</code> and <code>say</code> are identical. The main difference is function <code>say</code>. This function, prints the first argument it receives. Arguments, within functions, are treated in the same manner as arguments given to the script.</p>
<h2 id="2-5-Conditionals"><a href="#2-5-Conditionals" class="headerlink" title="2.5. Conditionals"></a>2.5. Conditionals</h2><p>The conditional statement in bash is similar to other programming languages. Conditions have many form like the most basic form is <code>if</code> expression <code>then</code> statement where statement is only executed if expression is true.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ expression ]; <span class="keyword">then</span></span><br><span class="line">    will execute only <span class="keyword">if</span> expression is <span class="literal">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    will execute <span class="keyword">if</span> expression is <span class="literal">false</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>Sometime if conditions becoming confusing so you can write the same condition using the <code>case statements</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> expression <span class="keyword">in</span></span><br><span class="line">    pattern1 )</span><br><span class="line">        statements ;;</span><br><span class="line">    pattern2 )</span><br><span class="line">        statements ;;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p>Expression Examples:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">statement1 &amp;&amp; statement2  <span class="comment"># both statements are true</span></span><br><span class="line">statement1 || statement2  <span class="comment"># at least one of the statements is true</span></span><br><span class="line"></span><br><span class="line">str1=str2       <span class="comment"># str1 matches str2</span></span><br><span class="line">str1!=str2      <span class="comment"># str1 does not match str2</span></span><br><span class="line">str1&lt;str2       <span class="comment"># str1 is less than str2</span></span><br><span class="line">str1&gt;str2       <span class="comment"># str1 is greater than str2</span></span><br><span class="line">-n str1         <span class="comment"># str1 is not null (has length greater than 0)</span></span><br><span class="line">-z str1         <span class="comment"># str1 is null (has length 0)</span></span><br><span class="line"></span><br><span class="line">-a file         <span class="comment"># file exists</span></span><br><span class="line">-d file         <span class="comment"># file exists and is a directory</span></span><br><span class="line">-e file         <span class="comment"># file exists; same -a</span></span><br><span class="line">-f file         <span class="comment"># file exists and is a regular file (i.e., not a directory or other special type of file)</span></span><br><span class="line">-r file         <span class="comment"># you have read permission</span></span><br><span class="line">-s file         <span class="comment"># file exists and is not empty</span></span><br><span class="line">-w file         <span class="comment"># you have write permission</span></span><br><span class="line">-x file         <span class="comment"># you have execute permission on file, or directory search permission if it is a directory</span></span><br><span class="line">-N file         <span class="comment"># file was modified since it was last read</span></span><br><span class="line">-O file         <span class="comment"># you own file</span></span><br><span class="line">-G file         <span class="comment"># file's group ID matches yours (or one of yours, if you are in multiple groups)</span></span><br><span class="line"></span><br><span class="line">file1 -nt file2     <span class="comment"># file1 is newer than file2</span></span><br><span class="line">file1 -ot file2     <span class="comment"># file1 is older than file2</span></span><br><span class="line"></span><br><span class="line">-lt     <span class="comment"># less than</span></span><br><span class="line">-le     <span class="comment"># less than or equal</span></span><br><span class="line">-eq     <span class="comment"># equal</span></span><br><span class="line">-ge     <span class="comment"># greater than or equal</span></span><br><span class="line">-gt     <span class="comment"># greater than</span></span><br><span class="line">-ne     <span class="comment"># not equal</span></span><br></pre></td></tr></table></figure>

<h2 id="2-6-Loops"><a href="#2-6-Loops" class="headerlink" title="2.6. Loops"></a>2.6. Loops</h2><p>There are three types of loops in bash. <code>for</code>, <code>while</code> and <code>until</code>.</p>
<p>Different <code>for</code> Syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x := 1 to 10 <span class="keyword">do</span></span><br><span class="line">begin</span><br><span class="line">  statements</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name [<span class="keyword">in</span> list]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  statements that can use <span class="variable">$name</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( initialisation ; ending condition ; update ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  statements...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><code>while</code> Syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition; <span class="keyword">do</span></span><br><span class="line">  statements</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><code>until</code> Syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">until condition; <span class="keyword">do</span></span><br><span class="line">  statements</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h1 id="3-Tricks"><a href="#3-Tricks" class="headerlink" title="3. Tricks"></a>3. Tricks</h1><h2 id="Set-an-alias"><a href="#Set-an-alias" class="headerlink" title="Set an alias"></a>Set an alias</h2><p>Open <code>bash_profile</code> by running following command <code>vim ~/.bash_profile</code></p>
<blockquote>
<p>alias dockerlogin=’ssh <a href="mailto:www-data@adnan.local">www-data@adnan.local</a> -p2222’  # add your alias in .bash_profile</p>
</blockquote>
<h2 id="To-quickly-go-to-a-specific-directory"><a href="#To-quickly-go-to-a-specific-directory" class="headerlink" title="To quickly go to a specific directory"></a>To quickly go to a specific directory</h2><p>vim ~/.bashrc</p>
<blockquote>
<p>export hotellogs=”/workspace/hotel-api/storage/logs”</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$hotellogs</span></span><br></pre></td></tr></table></figure>

<h2 id="Re-execute-the-previous-command"><a href="#Re-execute-the-previous-command" class="headerlink" title="Re-execute the previous command"></a>Re-execute the previous command</h2><p>This goes back to the days before you could rely on keyboards to have an “up” arrow key, but can still be useful.<br>To run the last command in your history</p>
<blockquote>
<p>!!<br>A common error is to forget to use <code>sudo</code> to prefix a command requiring privileged execution. Instead of typing the whole command again, you can:<br>sudo !!<br>This would change a <code>mkdir somedir</code> into <code>sudo mkdir somedir</code></p>
</blockquote>
<h2 id="Exit-traps"><a href="#Exit-traps" class="headerlink" title="Exit traps"></a>Exit traps</h2><p>Make your bash scripts more robust by reliably performing cleanup.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> finish &#123;</span><br><span class="line">  <span class="comment"># your cleanup here. e.g. kill any forked processes</span></span><br><span class="line">  <span class="built_in">jobs</span> -p | xargs <span class="built_in">kill</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">trap</span> finish EXIT</span><br></pre></td></tr></table></figure>

<h2 id="Saving-your-environment-variables"><a href="#Saving-your-environment-variables" class="headerlink" title="Saving your environment variables"></a>Saving your environment variables</h2><p>When you do <code>export FOO = BAR</code>, your variable is only exported in this current shell and all its children, to persist in the future you can simply append in your <code>~/.bash_profile</code> file the command to export your variable</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="built_in">export</span> FOO=BAR &gt;&gt; ~/.bash_profile</span><br></pre></td></tr></table></figure>

<h2 id="Accessing-your-scripts"><a href="#Accessing-your-scripts" class="headerlink" title="Accessing your scripts"></a>Accessing your scripts</h2><p>You can easily access your scripts by creating a bin folder in your home with <code>mkdir ~/bin</code>, now all the scripts you put in this folder you can access in any directory.</p>
<p>If you can not access, try append the code below in your <code>~/.bash_profile</code> file and after do <code>source ~/.bash_profile</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set PATH so it includes user's private bin if it exists</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$HOME</span>/bin"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    PATH=<span class="string">"<span class="variable">$HOME</span>/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h1 id="4-Debugging"><a href="#4-Debugging" class="headerlink" title="4. Debugging"></a>4. Debugging</h1><p>You can easily debug the bash script by passing different options to <code>bash</code> command. For example <code>-n</code> will not run commands and check for syntax errors only. <code>-v</code> echo commands before running them. <code>-x</code> echo commands after command-line processing.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash -n scriptname</span><br><span class="line">bash -v scriptname</span><br><span class="line">bash -x scriptname</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/01/Amazon_Leadership_Principles/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/01/Amazon_Leadership_Principles/" class="post-title-link" itemprop="url">Amazon Leadership Principles</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-01 19:43:30 / Modified: 19:55:18" itemprop="dateCreated datePublished" datetime="2020-01-01T19:43:30-06:00">2020-01-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Customer-Obsession"><a href="#Customer-Obsession" class="headerlink" title="Customer Obsession"></a>Customer Obsession</h3><blockquote>
<p>Leaders start with the customer and work backwards. They work vigorously to earn and keep customer trust. Although leaders pay attention to competitors, they obsess over customers. </p>
</blockquote>
<h3 id="Ownership"><a href="#Ownership" class="headerlink" title="Ownership"></a>Ownership</h3><blockquote>
<p>Leaders are owners. They think long term and don’t sacrifice long-term value for short-term results. They act on behalf of the entire company, beyond just their own team. They never say “that’s not my job.”</p>
</blockquote>
<h3 id="Invent-and-Simplify"><a href="#Invent-and-Simplify" class="headerlink" title="Invent and Simplify"></a>Invent and Simplify</h3><blockquote>
<p>Leaders expect and require innovation and invention from their teams and always find ways to simplify. They are externally aware, look for new ideas from everywhere, and are not limited by “not invented here.” As we do new things, we accept that we may be misunderstood for long periods of time.</p>
</blockquote>
<h3 id="Are-Right-A-Lot"><a href="#Are-Right-A-Lot" class="headerlink" title="Are Right, A Lot"></a>Are Right, A Lot</h3><blockquote>
<p>Leaders are right a lot. They have strong judgment and good instincts. They seek diverse perspectives and work to disconfirm their beliefs.</p>
</blockquote>
<h3 id="Learn-and-Be-Curious"><a href="#Learn-and-Be-Curious" class="headerlink" title="Learn and Be Curious"></a>Learn and Be Curious</h3><blockquote>
<p>Leaders are never done learning and always seek to improve themselves. They are curious about new possibilities and act to explore them.</p>
</blockquote>
<h3 id="Hire-and-Develop-the-Best"><a href="#Hire-and-Develop-the-Best" class="headerlink" title="Hire and Develop the Best"></a>Hire and Develop the Best</h3><blockquote>
<p>Leaders raise the performance bar with every hire and promotion. They recognize exceptional talent, and willingly move them throughout the organization. Leaders develop leaders and take seriously their role in coaching others. We work on behalf of our people to invent mechanisms for development like Career Choice.</p>
</blockquote>
<h3 id="Insist-on-the-Highest-Standards"><a href="#Insist-on-the-Highest-Standards" class="headerlink" title="Insist on the Highest Standards"></a>Insist on the Highest Standards</h3><blockquote>
<p>Leaders have relentlessly high standards -; many people may think these standards are unreasonably high. Leaders are continually raising the bar and drive their teams to deliver high quality products, services, and processes. Leaders ensure that defects do not get sent down the line and that problems are fixed so they stay fixed.</p>
</blockquote>
<h3 id="Think-Big"><a href="#Think-Big" class="headerlink" title="Think Big"></a>Think Big</h3><blockquote>
<p>Thinking small is a self-fulfilling prophecy. Leaders create and communicate a bold direction that inspires results. They think differently and look around corners for ways to serve customers.</p>
</blockquote>
<h3 id="Bias-for-Action"><a href="#Bias-for-Action" class="headerlink" title="Bias for Action"></a>Bias for Action</h3><blockquote>
<p>Speed matters in business. Many decisions and actions are reversible and do not need extensive study. We value calculated risk taking.</p>
</blockquote>
<h3 id="Frugality"><a href="#Frugality" class="headerlink" title="Frugality"></a>Frugality</h3><blockquote>
<p>Accomplish more with less. Constraints breed resourcefulness, self-sufficiency, and invention. There are no extra points for growing headcount, budget size, or fixed expense.</p>
</blockquote>
<h3 id="Earn-Trust"><a href="#Earn-Trust" class="headerlink" title="Earn Trust"></a>Earn Trust</h3><blockquote>
<p>Leaders listen attentively, speak candidly, and treat others respectfully. They are vocally self-critical, even when doing so is awkward or embarrassing. Leaders do not believe their or their team’s body odor smells of perfume. They benchmark themselves and their teams against the best.</p>
</blockquote>
<h3 id="Dive-Deep"><a href="#Dive-Deep" class="headerlink" title="Dive Deep"></a>Dive Deep</h3><blockquote>
<p>Leaders operate at all levels, stay connected to the details, audit frequently, and are skeptical when metrics and anecdote differ. No task is beneath them.</p>
</blockquote>
<h3 id="Have-Backbond-Disagree-and-Commit"><a href="#Have-Backbond-Disagree-and-Commit" class="headerlink" title="Have Backbond; Disagree and Commit"></a>Have Backbond; Disagree and Commit</h3><blockquote>
<p>Leaders are obligated to respectfully challenge decisions when they disagree, even when doing so is uncomfortable or exhausting. Leaders have conviction and are tenacious. They do not compromise for the sake of social cohesion. Once a decision is determined, they commit wholly.</p>
</blockquote>
<h3 id="Deliver-Results"><a href="#Deliver-Results" class="headerlink" title="Deliver Results"></a>Deliver Results</h3><blockquote>
<p>Leaders focus on the key inputs for their business and deliver them with the right quality and in a timely fashion. Despite setbacks, they rise to the occasion and never settle.</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/30/Java-Development/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/30/Java-Development/" class="post-title-link" itemprop="url">Java Development</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-30 16:13:20 / Modified: 16:26:37" itemprop="dateCreated datePublished" datetime="2019-12-30T16:13:20-06:00">2019-12-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Java-Development-Mind-Map"><a href="#Java-Development-Mind-Map" class="headerlink" title="Java Development Mind Map"></a>Java Development Mind Map</h1><p><img src="../images/Java_Development.png" alt="Java_Development"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/30/how-to-read-source-code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/30/how-to-read-source-code/" class="post-title-link" itemprop="url">how to read source code</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-30 12:15:55 / Modified: 12:16:39" itemprop="dateCreated datePublished" datetime="2019-12-30T12:15:55-06:00">2019-12-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="How-To-Read-Source-Code"><a href="#How-To-Read-Source-Code" class="headerlink" title="How To Read Source Code"></a>How To Read Source Code</h1><h2 id="What-do-we-mean-when-we-say-“reading-source-code”"><a href="#What-do-we-mean-when-we-say-“reading-source-code”" class="headerlink" title="What do we mean when we say “reading source code”?"></a>What do we mean when we say “reading source code”?</h2><p>Reading for comprehension</p>
<p>… to find bugs</p>
<p>… to find interactions</p>
<p>… to review</p>
<p>… to see the interface</p>
<p>… to learn!</p>
<hr>
<h2 id="Reading-isn’t-linear"><a href="#Reading-isn’t-linear" class="headerlink" title="Reading isn’t linear"></a>Reading isn’t linear</h2><p>We skip back and forth from chapter to chapter, module to module. We can read the module straight through but we won’t have the definitions of things from other modules. We can read in execution order, but we won’t know where we’re going more than one call site down.</p>
<hr>
<h2 id="Reading-Order"><a href="#Reading-Order" class="headerlink" title="Reading Order"></a>Reading Order</h2><p>Do you start at the entry point of a package?</p>
<p>How about in a browser?</p>
<p>Maybe find the biggest source code file and read that first.</p>
<p>Try setting a breakpoint early and tracing down through functions in a debugger.</p>
<p>Try setting a breakpoint deep in the code, and reading each function in the call stack.</p>
<hr>
<p>Kinds of source code</p>
<ul>
<li>Javascript</li>
<li>C++</li>
<li>ES6</li>
<li>Coffee Script</li>
<li>Shell Script</li>
</ul>
<hr>
<ul>
<li>SNOBOL</li>
<li>APL</li>
<li>Befunge</li>
<li>Forth</li>
<li>Perl</li>
<li>Other people’s javascript</li>
</ul>
<hr>
<p>Another way to think of kinds of source code</p>
<ul>
<li>Glue</li>
<li>Interface-defining</li>
<li>Implementation</li>
<li>Algorithmic</li>
<li>Configuring</li>
<li>Tasking</li>
</ul>
<p>There’s a lot of study of algorithmic source code out there because that’s what academia produces: algorithms, the little, often mathematical ways of doing things. All the others are a lot more nebulous but I think a lot more interesting. They’re certainly the bulk of what most people write when they’re programming computers.</p>
<p>Of course, sometimes, something does more than one of these things. Many times, in fact. Figuring out what it’s trying to be can be one of the first tasks.</p>
<hr>
<h2 id="What’s-‘Glue’"><a href="#What’s-‘Glue’" class="headerlink" title="What’s ‘Glue’?"></a>What’s ‘Glue’?</h2><p>Not all the interfaces we want to use play nice together. Glue is the plumbing connecting things together. Middleware, promises vs callbacks binding code, inflating arguments into objects or breaking objects apart. All that’s glue.</p>
<hr>
<h2 id="How-do-you-read-glue"><a href="#How-do-you-read-glue" class="headerlink" title="How do you read glue?"></a>How do you read glue?</h2><p>We’re looking for how two interfaces are shaped differently, and what’s common between them.</p>
<hr>
<p>This is from Ben Drucker’s <code>stream-to-promise</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">internals.writable = <span class="function"><span class="keyword">function</span> (<span class="params">stream</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    stream.once(<span class="string">'finish'</span>, resolve);</span><br><span class="line">    stream.once(<span class="string">'error'</span>, reject);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>The two interfaces we’re talking about here are node streams and promises.</p>
<p>The things they have in common are that they do work until they finish, in node with an event, in promises by calling the resolution functions.</p>
<p>Now the thing you can notice while you’re reading is that promises really can only be resolved once, but streams can actually emit the same event multiple times. They don’t usually, but as programmers we usually know the difference between can’t and shouldn’t.</p>
<hr>
<p>More glue!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> record = &#123;</span><br><span class="line">    name: (input.name || <span class="string">''</span>).trim(),</span><br><span class="line">    age: <span class="built_in">isNaN</span>(<span class="built_in">Number</span>(input.age)) ? <span class="literal">null</span> : <span class="built_in">Number</span>(input.age),</span><br><span class="line">    email: validateEmail(input.email.trim())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>More things to think about in glue: How are errors handled?</p>
<p>It’s worth asking if any of these things throw? Do they delete bad values? Maybe they coerce them into being okay-enough values? Are these the right choices for the context they’re operating in? Are conversions lossy?</p>
<hr>
<h2 id="What’s-interface-defining-code"><a href="#What’s-interface-defining-code" class="headerlink" title="What’s interface-defining code?"></a>What’s interface-defining code?</h2><p>You know how you have some modules that are really only used one or two places, they’re kinda internal, and you hope nobody looks at them too hard?</p>
<p>Interface-defining is the opposite of that. It’s the hard boundaries of your module.</p>
<hr>
<p>From node’s <code>events.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">exports.usingDomains = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">EventEmitter</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">exports.EventEmitter = EventEmitter;</span><br><span class="line"></span><br><span class="line">EventEmitter.prototype.setMaxListeners = <span class="function"><span class="keyword">function</span> <span class="title">setMaxListeners</span>(<span class="params">n</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.emit = <span class="function"><span class="keyword">function</span> <span class="title">emit</span>(<span class="params">type</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.addListener = <span class="function"><span class="keyword">function</span> <span class="title">addListener</span>(<span class="params">type, listener</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.on = EventEmitter.prototype.addListener;</span><br><span class="line">EventEmitter.prototype.once = <span class="function"><span class="keyword">function</span> <span class="title">once</span>(<span class="params">type, listener</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.removeListener = <span class="function"><span class="keyword">function</span> <span class="title">removeListener</span>(<span class="params">type, listener</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.prototype.removeAllListeners = <span class="function"><span class="keyword">function</span> <span class="title">removeAllListeners</span>(<span class="params">type</span>) </span>&#123;&#125;;</span><br><span class="line">EventEmitter.prototype.listeners = <span class="function"><span class="keyword">function</span> <span class="title">listeners</span>(<span class="params">type</span>) </span>&#123; &#125;;</span><br><span class="line">EventEmitter.listenerCount = <span class="function"><span class="keyword">function</span>(<span class="params">emitter, type</span>) </span>&#123; &#125;;</span><br></pre></td></tr></table></figure>

<p>We’re defining the interface for <code>EventEmitter</code> here.</p>
<p>Some things to ask here are is this complete?  What guarantees does this make? Are internal details exposed?</p>
<p>If you have strong interface contracts, this is where you should expect to find them.</p>
<p>Like glue code, look for how errors are handled and exposed. Is that consistent? Does it distinguish errors due to internal inconsistency from errors because the user of the interface didn’t understand it?</p>
<hr>
<h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">startRouting: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.router = <span class="keyword">this</span>.router || <span class="keyword">this</span>.constructor.map(K);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="keyword">this</span>.router;</span><br><span class="line"><span class="keyword">var</span> location = <span class="keyword">get</span>(this, 'location');</span><br><span class="line">var container = this.container;</span><br><span class="line">var self = this;</span><br><span class="line">var initialURL = <span class="keyword">get</span>(this, 'initialURL');</span><br><span class="line">var initialTransition;</span><br><span class="line"></span><br><span class="line">// Allow the Location class to cancel the router setup while it refreshes</span><br><span class="line">// the page</span><br><span class="line">if (<span class="keyword">get</span>(location, 'cancelRouterSetup')) &#123;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>._setupRouter(router, location);</span><br><span class="line"></span><br><span class="line">container.register(<span class="string">'view:default'</span>, _MetamorphView);</span><br><span class="line">container.register(<span class="string">'view:toplevel'</span>, EmberView.extend());</span><br><span class="line"></span><br><span class="line">location.onUpdateURL(<span class="function"><span class="keyword">function</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  self.handleURL(url);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> initialURL === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  initialURL = location.getURL();</span><br><span class="line">&#125;</span><br><span class="line">initialTransition = <span class="keyword">this</span>.handleURL(initialURL);</span><br><span class="line"><span class="keyword">if</span> (initialTransition &amp;&amp; initialTransition.error) &#123;</span><br><span class="line">  <span class="keyword">throw</span> initialTransition.error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>From <code>Ember.Router</code></p>
<p>This is what that always needs more documentation about why and not so much about what.</p>
<p>Things to look for when reading here are how it fits into the larger whole.</p>
<p>What’s coming from the public interface to this module? What needs validation? Are these variables going to contain what we think they contain? What other parts does this touch? What’s the risk to changing it when adding new features? What might break? Do we have tests for that?</p>
<p>What’s the lifetime of these variables? (this is an easy one: This looks really well designed and doesn’t store needless state with a long lifetime.) Though maybe we should look at <code>_setupRouter</code>…</p>
<hr>
<h2 id="Process-entailment"><a href="#Process-entailment" class="headerlink" title="Process entailment"></a>Process entailment</h2><p>Or, looking forward: <em>How much is required to use this thing correctly?</em></p>
<p>and backward: <em>If we’re here, what got us to this point?</em></p>
<p>It’s pretty easy to see what functions call what other functions. However, the reverse is more interesting! So one of the things you can look for when reading source code, and in particular the implementation bits is look at what things have to happen to set up the state the process needs to be in to begin.</p>
<p>Is that state explicit, passed in via parameters? Is it assumed to be there, as an instance variable or property? Is there a single path to get there, with an obvious place that state is set up? Or is it diffuse?</p>
<hr>
<h2 id="Algorithms"><a href="#Algorithms" class="headerlink" title="Algorithms"></a>Algorithms</h2><p>So algorithmic code is a kind of special case of implementation code. It’s not so exposed to the outside world, it’s the meat of a program. Quite often it’s business logic or the core processes of the software.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Grammar</span>(<span class="params">rules</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Processing The Grammar</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// Here we begin defining a grammar given the raw rules, terminal</span></span><br><span class="line">  <span class="comment">// symbols, and symbolic references to rules</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// The input is a list of rules.</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// The input grammar is amended with a final rule, the 'accept' rule,</span></span><br><span class="line">  <span class="comment">// which if it spans the parse chart, means the entire grammar was</span></span><br><span class="line">  <span class="comment">// accepted. This is needed in the case of a nulling start symbol.</span></span><br><span class="line">  rules.push(Rule(<span class="string">'_accept'</span>, [Ref(<span class="string">'start'</span>)]));</span><br><span class="line">  rules.acceptRule = rules.length - <span class="number">1</span>;</span><br></pre></td></tr></table></figure>



<p>This bit is from a parser engine I’ve been working on called <code>lotsawa</code>. More on the next slide.</p>
<p>It’s been said a lot that good comments say why something is done or done that way, rather than what it’s doing. Algorithms usually need more explanation of what’s going on since if they were trivial, they’d probably be built into our standard library. Quite often to get good performance out of something, the exactly what-and-how matters a lot.</p>
<p>This is the stuff that those of you with CS degrees get to drool over (or maybe have traumatic memories of).</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Build a list of all the symbols used in the grammar so they can be numbered instead of referred to</span></span><br><span class="line"><span class="comment">// by name, and therefore their presence can be represented by a single bit in a set.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">censusSymbols</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> out = [];</span><br><span class="line">  rules.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">r</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!~out.indexOf(r.name)) out.push(r.name);</span><br></pre></td></tr></table></figure>

<pre><code>  r.symbols.forEach(function(s, i) {
    var symNo = out.indexOf(s.name);
    if (!~out.indexOf(s.name)) {
      symNo = out.length;
      out.push(s.name);
    }

    r.symbols[i] = symNo;
  });

  r.sym = out.indexOf(r.name);
});

return out;
}

rules.symbols = censusSymbols();</code></pre><p>Reads like a math paper, doesn’t it?</p>
<p>One of the things that you usually need to see in algorithmic code is the actual data structures. This one is building a list of symbols and making sure there’s no duplicates.</p>
<p>Look also for hints as to the running time of the algorithm. You can see in this part, I’ve got two loops. In Big-O notation, that’s O(n * m), then you can see that there’s an <code>indexOf</code> inside that. That’s another loop in Javascript, so that actually adds another factor to the running time. (twice – looks like I could make this more optimal by re-using one of the values here) Good thing this isn’t the main part of the algorithm!</p>
<hr>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>The line between source code and configuration file is super thin. There’s a constant tension between having a configuration be expressive and readable and direct.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.configure(<span class="string">'production'</span>, <span class="string">'staging'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  app.enable(<span class="string">'emails'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.configure(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  app.disable(<span class="string">'emails'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>An example using Javascript for configuration.</p>
<p>What we can run into here is combinatorial explosion of options. How many environments do we configure? Then, how many things do we configure for a specific instance of that environment. It’s really easy to go overboard and end up with all the possible permutations, and to have bugs that only show up in one of them. Keeping an eye out for how many degrees of freedom the configuration allows is super useful.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"express"</span>: &#123;</span><br><span class="line">    <span class="string">"env"</span>: <span class="string">""</span>, <span class="comment">// <span class="doctag">NOTE:</span> `env` is managed by the framework. This value will be overwritten.</span></span><br><span class="line">    <span class="string">"x-powered-by"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"views"</span>: <span class="string">"path:./views"</span>,</span><br><span class="line">    <span class="string">"mountpath"</span>: <span class="string">"/"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"middleware"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="string">"compress"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"priority"</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">"module"</span>: <span class="string">"compression"</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">"favicon"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"priority"</span>: <span class="number">30</span>,</span><br><span class="line">        <span class="string">"module"</span>: &#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"serve-favicon"</span>,</span><br><span class="line">            <span class="string">"arguments"</span>: [ <span class="string">"resolve:kraken-js/public/favicon.ico"</span> ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">A bit of &#96;kraken&#96; config file.</span><br><span class="line"></span><br><span class="line">Kraken took a &#39;low power language&#39; approach to configuration and chose JSON. A little more &quot;configuration&quot; and a little less &quot;source code&quot;. One of the goals was keeping that combinatorial explosion under control. There&#39;s a reason a lot of tools use simple key-value pairs or ini-style files for configuration, even though they&#39;re not terribly expressive.</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Configuration source code has some interesting and unique constraints that are worth looking for.</span><br><span class="line"></span><br><span class="line">* Lifetime</span><br><span class="line">* Machine writability</span><br><span class="line">* Responsible people vary a lot more</span><br><span class="line">* Have to fit in weird places like environment variables</span><br><span class="line">* Often store security-sensitive information</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Tasking</span><br><span class="line">-------</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">What do charging 50 credit cards, building a complex piece of software with a compiler and build tools, and sending 100 emails have in common?</span><br><span class="line"></span><br><span class="line">Transactionality. Often, some piece of the system needs to happen exactly once, and not at all if there&#39;s an error. A compiler that leaves bad build products around is a great source of bugs. Double charging customers is bad. Flooding someone&#39;s inbox because of a retry cycle is terrible.</span><br><span class="line"></span><br><span class="line">Resumabilty. A need to continue where they left off given the state of the system.</span><br><span class="line"></span><br><span class="line">Sequentiality. If they&#39;re not strictly linear processes, there&#39;s usually a very directed flow through the code. Loops tend to be big ones, around the whole shebang.</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Reading Messy Code</span><br><span class="line">------------------</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">So how do you deal with this?</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;javascript</span><br><span class="line">      DuplexCombination.prototype.on &#x3D; function(ev, fn) &#123;</span><br><span class="line">    switch (ev) &#123;</span><br><span class="line">  case &#39;data&#39;:</span><br><span class="line">  case &#39;end&#39;:</span><br><span class="line">  case &#39;readable&#39;:</span><br><span class="line">this.reader.on(ev, fn);</span><br><span class="line">return this</span><br><span class="line">  case &#39;drain&#39;:</span><br><span class="line">  case &#39;finish&#39;:</span><br><span class="line">this.writer.on(ev, fn);</span><br><span class="line">return this</span><br><span class="line">  default:</span><br><span class="line">return Duplex.prototype.on.call(this, ev, fn);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>



<p>You are seeing that right. That’s reverse indendation. Blame Isaac.</p>
<hr>
<h2 id="Rose-tinted-glasses"><a href="#Rose-tinted-glasses" class="headerlink" title="Rose tinted glasses!"></a>Rose tinted glasses!</h2><p><code>standard -F dc.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DuplexCombination.prototype.on = <span class="function"><span class="keyword">function</span> (<span class="params">ev, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (ev) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'data'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'end'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'readable'</span>:</span><br><span class="line">      <span class="keyword">this</span>.reader.on(ev, fn)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'drain'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'finish'</span>:</span><br><span class="line">      <span class="keyword">this</span>.writer.on(ev, fn)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> Duplex.prototype.on.call(<span class="keyword">this</span>, ev, fn)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>It’s okay to use tools while reading! </p>
<hr>
<p>How do you read this?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">if</span>(<span class="keyword">typeof</span> define===<span class="string">"function"</span>&amp;&amp;define.amd)&#123;define([<span class="string">"underscore"</span>,<span class="string">"</span></span><br><span class="line"><span class="string">jquery"</span>,<span class="string">"exports"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">i,r,s</span>)</span>&#123;t.Backbone=e(t,s,i,r)&#125;)&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">export</span></span><br><span class="line">s!==<span class="string">"undefined"</span>)&#123;<span class="keyword">var</span> i=<span class="built_in">require</span>(<span class="string">"underscore"</span>);e(t,exports,i)&#125;<span class="keyword">else</span>&#123;t.Backbone=e(t,</span><br><span class="line">&#123;&#125;,t._,t.jQuery||t.Zepto||t.ender||t.$)&#125;&#125;)(<span class="keyword">this</span>,<span class="function"><span class="keyword">function</span>(<span class="params">t,e,i,r</span>)</span>&#123;<span class="keyword">var</span> s=t.Backbo</span><br><span class="line">ne;<span class="keyword">var</span> n=[];<span class="keyword">var</span> a=n.push;<span class="keyword">var</span> o=n.slice;<span class="keyword">var</span> h=n.splice;e.VERSION=<span class="string">"1.1.2"</span>;e.$=r;e.</span><br><span class="line">noConflict=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;t.Backbone=s;<span class="keyword">return</span> <span class="keyword">this</span>&#125;;e.emulateHTTP=<span class="literal">false</span>;e.emulateJSO</span><br><span class="line">N=<span class="literal">false</span>;<span class="keyword">var</span> u=e.Events=&#123;<span class="attr">on</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,i</span>)</span>&#123;<span class="keyword">if</span>(!c(<span class="keyword">this</span>,<span class="string">"on"</span>,t,[e,i])||!e)<span class="keyword">return</span> t</span><br><span class="line">his;<span class="keyword">this</span>._events||(<span class="keyword">this</span>._events=&#123;&#125;);<span class="keyword">var</span> r=<span class="keyword">this</span>._events[t]||(<span class="keyword">this</span>._events[t]=[]);</span><br><span class="line">r.push(&#123;<span class="attr">callback</span>:e,<span class="attr">context</span>:i,<span class="attr">ctx</span>:i||<span class="keyword">this</span>&#125;);<span class="keyword">return</span> <span class="keyword">this</span>&#125;,<span class="attr">once</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,r</span>)</span>&#123;<span class="keyword">if</span>(</span><br><span class="line">!c(<span class="keyword">this</span>,<span class="string">"once"</span>,t,[e,r])||!e)<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> s=<span class="keyword">this</span>;<span class="keyword">var</span> n=i.once(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;s.off</span><br><span class="line">(t,n);e.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)&#125;);n._callback=e;<span class="keyword">return</span> <span class="keyword">this</span>.on(t,n,r)&#125;,<span class="attr">off</span>:functio</span><br><span class="line">n(t,e,r)&#123;<span class="keyword">var</span> s,n,a,o,h,u,l,f;<span class="keyword">if</span>(!<span class="keyword">this</span>._events||!c(<span class="keyword">this</span>,<span class="string">"off"</span>,t,[e,r]))<span class="keyword">return</span> thi</span><br><span class="line">s;<span class="keyword">if</span>(!t&amp;&amp;!e&amp;&amp;!r)&#123;<span class="keyword">this</span>._events=<span class="keyword">void</span> <span class="number">0</span>;<span class="keyword">return</span> <span class="keyword">this</span>&#125;o=t?[t]:i.keys(<span class="keyword">this</span>._events);fo</span><br><span class="line">r(h=<span class="number">0</span>,u=o.length;h&lt;u;h++)&#123;t=o[h];<span class="keyword">if</span>(a=<span class="keyword">this</span>._events[t])&#123;<span class="keyword">this</span>._events[t]=s=[];<span class="keyword">if</span>(e</span><br><span class="line">||r)&#123;<span class="keyword">for</span>(l=<span class="number">0</span>,f=a.length;l&lt;f;l++)&#123;n=a[l];<span class="keyword">if</span>(e&amp;&amp;e!==n.callback&amp;&amp;e!==n.callback._ca</span><br><span class="line">llback||r&amp;&amp;r!==n.context)&#123;s.push(n)&#125;&#125;&#125;<span class="keyword">if</span>(!s.length)<span class="keyword">delete</span> <span class="keyword">this</span>._events[t]&#125;&#125;retur</span><br><span class="line">n <span class="keyword">this</span>&#125;,<span class="attr">trigger</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">if</span>(!<span class="keyword">this</span>._events)<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> e=o.call(<span class="built_in">arguments</span>,</span><br><span class="line"><span class="number">1</span>);<span class="keyword">if</span>(!c(<span class="keyword">this</span>,<span class="string">"trigger"</span>,t,e))<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> i=<span class="keyword">this</span>._events[t];<span class="keyword">var</span> r=<span class="keyword">this</span>._event</span><br><span class="line">s.all;<span class="keyword">if</span>(i)f(i,e);<span class="keyword">if</span>(r)f(r,<span class="built_in">arguments</span>);<span class="keyword">return</span> <span class="keyword">this</span>&#125;,<span class="attr">stopListening</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,r</span>)</span></span><br><span class="line"><span class="function"></span>&#123;<span class="keyword">var</span> s=<span class="keyword">this</span>._listeningTo;<span class="keyword">if</span>(!s)<span class="keyword">return</span> <span class="keyword">this</span>;<span class="keyword">var</span> n=!e&amp;&amp;!r;<span class="keyword">if</span>(!r&amp;&amp;<span class="keyword">typeof</span> e===<span class="string">"objec</span></span><br><span class="line"><span class="string">​</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&#96;uglifyjs -b &lt; backbone-min.js&#96;</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;javascript</span><br><span class="line">(function(t, e) &#123;</span><br><span class="line">    if (typeof define &#x3D;&#x3D;&#x3D; &quot;function&quot; &amp;&amp; define.amd) &#123;</span><br><span class="line">        define([ &quot;underscore&quot;, &quot;jquery&quot;, &quot;exports&quot; ], function(i, r, s) &#123;</span><br><span class="line">            t.Backbone &#x3D; e(t, s, i, r);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else if (typeof exports !&#x3D;&#x3D; &quot;undefined&quot;) &#123;</span><br><span class="line">        var i &#x3D; require(&quot;underscore&quot;);</span><br><span class="line">        e(t, exports, i);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        t.Backbone &#x3D; e(t, &#123;&#125;, t._, t.jQuery || t.Zepto || t.ender || t.$);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(this, function(t, e, i, r) &#123;</span><br><span class="line">    var s &#x3D; t.Backbone;</span><br><span class="line">    var n &#x3D; [];</span><br><span class="line">    var a &#x3D; n.push;</span><br><span class="line">    var o &#x3D; n.slice;</span><br><span class="line">    var h &#x3D; n.splice;</span><br><span class="line">    e.VERSION &#x3D; &quot;1.1.2&quot;;</span><br><span class="line">    e.$ &#x3D; r;</span><br><span class="line">    e.noConflict &#x3D; function() &#123;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="Human-Parts"><a href="#Human-Parts" class="headerlink" title="Human Parts"></a>Human Parts</h2><p>Or: <em>guessing intent is dangerous but you learn so much</em></p>
<hr>
<p>There’s a lot of tricks for figuring out what the author of something meant.</p>
<hr>
<h2 id="Look-for-guards-and-coercions"><a href="#Look-for-guards-and-coercions" class="headerlink" title="Look for guards and coercions"></a>Look for guards and coercions</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> arg != <span class="string">'number'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"arg must be a number"</span>);</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Looks like the domain of whatever function we’re in is ‘numbers’.</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arg = <span class="built_in">Number</span>(arg)</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Coerce things to numeric. Same domain as above, but doesn’t reject errors via exceptions. There might be <code>NaN</code>s though. Probably smart to read and check if there’s comparisons that will be false against those.</p>
<hr>
<h2 id="Look-for-defaults"><a href="#Look-for-defaults" class="headerlink" title="Look for defaults"></a>Look for defaults</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arg = arg || &#123;&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Default to an empty object.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arg = (arg == <span class="literal">null</span> ? <span class="literal">true</span> : arg)</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>Default to true only if a value wasn’t explicitly passed.</p>
<hr>
<h2 id="Look-for-layers"><a href="#Look-for-layers" class="headerlink" title="Look for layers"></a>Look for layers</h2><p><code>req</code> and <code>res</code> from Express are tied to the web; how deep do they go?</p>
<p>Is there an interface boundary you can find?</p>
<hr>
<h2 id="Look-for-tracing"><a href="#Look-for-tracing" class="headerlink" title="Look for tracing"></a>Look for tracing</h2><p>Are there inspection points?</p>
<p>Debug logs?</p>
<p>Do those form a complete narrative? Or are they ad-hoc leftovers from the last few bugs?</p>
<hr>
<h2 id="Look-for-reflexivity"><a href="#Look-for-reflexivity" class="headerlink" title="Look for reflexivity"></a>Look for reflexivity</h2><p>Are identifiers being dynamically generated?</p>
<p>Is there <code>eval</code>? Metaprogramming? New function creation?</p>
<p><code>func.toString()</code> is your friend!</p>
<hr>
<h2 id="Look-at-lifetimes"><a href="#Look-at-lifetimes" class="headerlink" title="Look at lifetimes"></a>Look at lifetimes</h2><ul>
<li>Who initializes this?</li>
<li>When does it change?</li>
<li>Who changes it?</li>
<li>Is this information somewhere else in the mean time?</li>
<li>Is it ever inconsistent?</li>
</ul>
<p>^ Somewhere, someone typed the value you see into a keyboard, generated it from a random number generator, or computed it and saved it.</p>
<p>^ Somewhere else, some time else, that value will affect some human or humans. Who are these people?</p>
<p>^ What or who chooses who they are?</p>
<p>^ Is that value ever going to change?</p>
<p>^ Who changes it?</p>
<hr>
<h2 id="Look-for-hidden-state-machines"><a href="#Look-for-hidden-state-machines" class="headerlink" title="Look for hidden state machines"></a>Look for hidden state machines</h2><p>^ Sometimes boolean variables get used together as a decomposed state machine</p>
<p>^ For example, the variables <code>isReadied</code> and <code>isFinished</code> might show a state machine like so:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isReadied = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> isFinished = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>Or</p>
<p><code>START -&gt; READY -&gt; FINISHED</code></p>
<hr>
<h2 id="Look-for-hidden-state-machines-1"><a href="#Look-for-hidden-state-machines-1" class="headerlink" title="Look for hidden state machines"></a>Look for hidden state machines</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">| isReadied | isFinished | state    |</span><br><span class="line">| --------- | ---------- | -------- |</span><br><span class="line">| false     | false      | START    |</span><br><span class="line">| false     | true       | invalid  |</span><br><span class="line">| true      | false      | READY    |</span><br><span class="line">| true      | true       | FINISHED |</span><br></pre></td></tr></table></figure>

<p>^ Note that they can also express the state <code>!isReadied &amp;&amp; isFinished</code> – which might be an interesting source of bugs, if something can end up at the finished state without first being ready.</p>
<hr>
<h2 id="Look-for-composition-and-inheritance"><a href="#Look-for-composition-and-inheritance" class="headerlink" title="Look for composition and inheritance"></a>Look for composition and inheritance</h2><p>Is this made of parts I can recognize? Do those parts have names?</p>
<hr>
<h2 id="Look-for-common-operations"><a href="#Look-for-common-operations" class="headerlink" title="Look for common operations"></a>Look for common operations</h2><p><code>map</code>.</p>
<p><code>reduce</code>.</p>
<p>cross-join.</p>
<hr>
<p>It’s time to go read some source code.</p>
<p>Enjoy!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/30/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/30/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-12-30 00:02:28 / Modified: 12:15:30" itemprop="dateCreated datePublished" datetime="2019-12-30T00:02:28-06:00">2019-12-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/05/DataBase-Review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/05/DataBase-Review/" class="post-title-link" itemprop="url">DataBase Review</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-05 14:00:56" itemprop="dateCreated datePublished" datetime="2019-12-05T14:00:56-06:00">2019-12-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-06 20:37:11" itemprop="dateModified" datetime="2019-12-06T20:37:11-06:00">2019-12-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>整理学习到的databse知识。</p>
<h3 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h3><h6 id="Hierachy-speed-fast-to-slow"><a href="#Hierachy-speed-fast-to-slow" class="headerlink" title="Hierachy (speed fast to slow):"></a>Hierachy (speed fast to slow):</h6><p>​    CPU Register -&gt; Cache -&gt; Main Memory -&gt; Disk -&gt; Tapes</p>
<h6 id="Disk-Capacity"><a href="#Disk-Capacity" class="headerlink" title="Disk Capacity"></a>Disk Capacity</h6><p>​    Disk Capacity = #tracks per surface x (2 x #platter) x #sector per track x     byte per sector.</p>
<ul>
<li><p><strong>Access time = seek time + rotational delay + transfer time + other delay</strong></p>
<ul>
<li>Seek time: time to move the arm to position disk head on the right track.</li>
<li>Rotational delay: time to wait for sector to rotate under the disk head.</li>
<li>Average rotational delay: time for 1/2 revolution.</li>
<li>transfer time: block size / transfer rate.</li>
</ul>
<h6 id="Buffer-Management"><a href="#Buffer-Management" class="headerlink" title="Buffer Management"></a>Buffer Management</h6></li>
</ul>
<p>​    Pages in memory is like blocks in hard disk.</p>
<h6 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Given a total revolution of 7200 RPM.</span><br><span class="line">One rotation &#x3D; 1&#x2F;(7200&#x2F;60s)*1000ms &#x3D; 8.33ms</span><br><span class="line">Average rotational latency &#x3D; 4.16ms</span><br></pre></td></tr></table></figure>

<h6 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">3600 RPM &#x3D; 60 revolutions&#x2F;s -&gt; 1 rev &#x3D; 16.66 ms</span><br><span class="line">128 cylinders &#x3D; 2^7</span><br><span class="line">10% overhead between blocks</span><br><span class="line">time over useful data &#x3D; 16.66 x 0.9 &#x3D; 14.99ms</span><br><span class="line">time over gaps &#x3D; 16.66 x 0.1 &#x3D; 1.66ms</span><br><span class="line"></span><br><span class="line">T1 &#x3D; time to read one random block</span><br><span class="line">T1 &#x3D; seek + rotational delay + transfer time </span><br><span class="line">T1 &#x3D; 25 + 16.66&#x2F;2 + 0.117 &#x3D; 33.45ms</span><br></pre></td></tr></table></figure>



<h3 id="Record-Layout"><a href="#Record-Layout" class="headerlink" title="Record Layout"></a>Record Layout</h3><h4 id="Conventional-Indexes"><a href="#Conventional-Indexes" class="headerlink" title="Conventional Indexes"></a>Conventional Indexes</h4><h6 id="Types"><a href="#Types" class="headerlink" title="Types:"></a>Types:</h6><ol>
<li>Dense index: index record appears for every search-key value</li>
<li>Sparse index: contains index records for only some search-key value</li>
<li>Multilevel index: if primary index does not fit in memory, access becomes expensive.<ol>
<li>Outer index: a sparse index of primary index.</li>
<li>Inner index: the primary index file</li>
</ol>
</li>
<li>Duplicate keys:<ol>
<li>Dense index: only keep record in index for first data record with each search key value.</li>
<li>Sparse index: has key-pointer pairs corresponding to the first search key on each block of the data file.</li>
</ol>
</li>
</ol>
<h4 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B+ Tree"></a>B+ Tree</h4><h6 id="Characteristics"><a href="#Characteristics" class="headerlink" title="Characteristics:"></a>Characteristics:</h6><p>​    full(packed) and balanced(almost uniform height).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Consider a DBMS has following characteristics: Pointers:4 bytes. Keys: 4 bytes. Blocks:100 bytes.</span><br><span class="line">Compute the maximum number of records we can index with:</span><br><span class="line">a).2-level B Tree</span><br><span class="line">b).2-level B+ Tree</span><br><span class="line"></span><br><span class="line">a).2-level B Tree</span><br><span class="line">Find largest integer value of n such that 4n+4(2n+1)&lt;100. n&#x3D;8.</span><br><span class="line">Root has 8 keys + 8 record pointers + 9 children pointers </span><br><span class="line">&#x3D; 8 x 4 + 8 x 4 + 9 x 4 &#x3D; 100bytes.</span><br><span class="line">Each of 9 children has 12 records pointers</span><br><span class="line">&#x3D; 12 x (4 + 4) + 4 &#x3D; 100bytes.</span><br><span class="line">So maximum # of records &#x3D; 12 x 9 + 8 &#x3D; 116.</span><br><span class="line"></span><br><span class="line">b).2-level B+ Tree</span><br><span class="line">Find largest integer value of n such that 4n+(4n+1)&lt;100. n&#x3D;12.</span><br><span class="line">Root has 12 keys + 13 children pointers</span><br><span class="line">&#x3D; 12 x 4 + 13 x 4 &#x3D; 100 bytes.</span><br><span class="line">Each of 13 children has 12 record pointers</span><br><span class="line">&#x3D; 12 x (4 + 4) + 4 &#x3D; 100 bytes.</span><br><span class="line">So maximum # of records &#x3D; 13 x 12 &#x3D; 156.</span><br></pre></td></tr></table></figure>



<h4 id="B-Tree-1"><a href="#B-Tree-1" class="headerlink" title="B Tree"></a>B Tree</h4><h4 id="Hashing"><a href="#Hashing" class="headerlink" title="Hashing"></a>Hashing</h4><h6 id="Characteristics-1"><a href="#Characteristics-1" class="headerlink" title="Characteristics:"></a>Characteristics:</h6><p>$$<br>Avg\ occupancy = \frac{r}{n\times\gamma}<br>$$</p>
<p>n: The number of buckets that is currently in use.</p>
<p>r: current number of search keys stored in the buckets.</p>
<p>$\gamma$: block size(# search keys that can be stored in 1 block).</p>
<h3 id="Relational-Algebra"><a href="#Relational-Algebra" class="headerlink" title="Relational Algebra"></a>Relational Algebra</h3><h4 id="Algebra-expressions-Translate-SQL-into-relational-algebra-Equivlaence"><a href="#Algebra-expressions-Translate-SQL-into-relational-algebra-Equivlaence" class="headerlink" title="Algebra expressions / Translate SQL into relational algebra / Equivlaence."></a>Algebra expressions / Translate SQL into relational algebra / Equivlaence.</h4><h6 id="Query-Process"><a href="#Query-Process" class="headerlink" title="Query Process"></a>Query Process</h6><ul>
<li>parsing: translating the query into a parsing tree.</li>
<li>query rewrite: the parse tree is transformed into an expression tree of relational algebra (logical query plan)</li>
<li>physical plan generation: translate the logical plan into a physical plan<ul>
<li>select algorithms to implement each operator</li>
<li>choose order of operations.</li>
</ul>
</li>
</ul>
<h6 id="Physical-Query-Plan"><a href="#Physical-Query-Plan" class="headerlink" title="Physical Query Plan"></a>Physical Query Plan</h6><ul>
<li>Sequential-Scan<ul>
<li>Read tuples from the relation R by reading data blocks - one block at a time from disk to memory.</li>
</ul>
</li>
<li>Index-Scan<ul>
<li>The relation R must have an index</li>
<li>The index is scanned to find blocks that contain the desired tuples.</li>
<li>All the blocks containing desired tuples are then read into the memory - one block at a time.</li>
</ul>
</li>
</ul>
<h6 id="Clustered-and-unclustered-files-relations-indexes"><a href="#Clustered-and-unclustered-files-relations-indexes" class="headerlink" title="Clustered and unclustered files/relations/indexes"></a>Clustered and unclustered files/relations/indexes</h6><ul>
<li>Clustered file: A file that stores records of one relation.</li>
<li>Unclustered file: A file that stores records of multiple relations.</li>
<li>Clustered index: Index that allows tuples to be read in an order that corresponds to physical order.</li>
<li>Relation R is clustered.</li>
</ul>
<table>
<thead>
<tr>
<th>Operator</th>
<th>I/O cost</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Sequential-Scan</td>
<td>B(R)</td>
<td>Read all blocks, and there are B(R) blocks.</td>
</tr>
<tr>
<td>Index-Scan</td>
<td>≤B(R)</td>
<td>Depends on number of values in the index is scanned.</td>
</tr>
</tbody></table>
<ul>
<li>Relation R is unclustered.</li>
</ul>
<table>
<thead>
<tr>
<th>Operator</th>
<th>I/O cost</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td>Sequential-Scan</td>
<td>~T(R)</td>
<td>Assuming next tuple is not found in the current block. We will read 1 block per tuple</td>
</tr>
<tr>
<td>Index-Scan</td>
<td>≤T(R)</td>
<td>Depends on number of values in the index is scanned.</td>
</tr>
</tbody></table>
<h6 id="SQL-grammer"><a href="#SQL-grammer" class="headerlink" title="SQL grammer"></a>SQL grammer</h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Query&gt; ::= SELECT &lt;SelList&gt;</span><br><span class="line">						FROM   &lt;From List&gt;</span><br><span class="line">						WHERE  &lt;Condition&gt;</span><br><span class="line">						</span><br><span class="line">&lt;SelList&gt; ::= &lt;Attribute&gt; | &lt;Attribute&gt; , &lt;SelList&gt;</span><br><span class="line"></span><br><span class="line">&lt;FromList&gt; ::= &lt;Relation&gt; | &lt;Relation&gt; , &lt;FromList&gt;</span><br><span class="line"></span><br><span class="line">&lt;Condition&gt; ::= &lt;Condition&gt; AND &lt;Condition&gt;  |</span><br><span class="line">								&lt;Attribute&gt; IN (&lt;Query&gt;)     |</span><br><span class="line">								&lt;Attribute&gt; = &lt;Attribute&gt;</span><br><span class="line">								&lt;Attribute&gt; LIKE &lt;Pattern&gt;</span><br></pre></td></tr></table></figure>

<h6 id="Example-of-parse-trees"><a href="#Example-of-parse-trees" class="headerlink" title="Example of parse trees"></a>Example of parse trees</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> movieTitle</span><br><span class="line"><span class="keyword">FROM</span>   StarsIn, MovieStar</span><br><span class="line"><span class="keyword">WHERE</span>  starName = <span class="keyword">name</span></span><br><span class="line">       <span class="keyword">AND</span> birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/exampleOfParseTrees.png" alt=""></p>
<h6 id="Example-2-of-parse-trees"><a href="#Example-2-of-parse-trees" class="headerlink" title="Example 2 of parse trees"></a>Example 2 of parse trees</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> movieTitle</span><br><span class="line"><span class="keyword">FROM</span>   StarsIn</span><br><span class="line"><span class="keyword">WHERE</span>  starName <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">name</span></span><br><span class="line">                    <span class="keyword">FROM</span>   MovieStar</span><br><span class="line">                    <span class="keyword">WHERE</span>  birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="../images/example2OfParseTrees.png" alt="example2OfParseTrees"></p>
<h6 id="Virtual-Relation-Pre-Processing"><a href="#Virtual-Relation-Pre-Processing" class="headerlink" title="Virtual Relation Pre-Processing"></a>Virtual Relation Pre-Processing</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> Paramount_Movies <span class="keyword">AS</span></span><br><span class="line">	(<span class="keyword">SELECT</span> title, <span class="keyword">year</span></span><br><span class="line">	<span class="keyword">FROM</span>   Movies</span><br><span class="line">	<span class="keyword">WHERE</span>  StudioName = <span class="string">'Paramount'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021435872.png" alt="image-20191206021435872"></p>
<h6 id="Consider-the-following-query-on-the-virtual-table-Paramount-Movies"><a href="#Consider-the-following-query-on-the-virtual-table-Paramount-Movies" class="headerlink" title="Consider the following query on the virtual table Paramount_Movies:"></a>Consider the following query on the virtual table Paramount_Movies:</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>	title</span><br><span class="line"><span class="keyword">FROM</span>		Paramount_Movies</span><br><span class="line"><span class="keyword">WHERE</span>		<span class="keyword">year</span> = <span class="number">1979</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021508616.png" alt="image-20191206021508616"></p>
<h6 id="Then-the-virtual-table-is-replaced-by-the-corresponding-logical-query-plan"><a href="#Then-the-virtual-table-is-replaced-by-the-corresponding-logical-query-plan" class="headerlink" title="Then, the virtual table is replaced by the corresponding logical query plan"></a>Then, the virtual table is replaced by the corresponding logical query plan</h6><p><img src="../images/image-20191206021527531.png" alt="image-20191206021527531"></p>
<h4 id="Convert-Parse-Tree-into-initial-L-Q-P"><a href="#Convert-Parse-Tree-into-initial-L-Q-P" class="headerlink" title="Convert Parse Tree into initial L.Q.P"></a>Convert Parse Tree into initial L.Q.P</h4><p><img src="../images/convertParseTreeIntoInitialLQP.png" alt="convertParseTreeIntoInitialLQP"></p>
<h6 id="Set-vs-Bag-semantics"><a href="#Set-vs-Bag-semantics" class="headerlink" title="Set vs Bag semantics"></a>Set vs Bag semantics</h6><ul>
<li>Set semantics: No duplicate entries.</li>
<li>Bag semantics: Allow duplicate entries.</li>
</ul>
<h6 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h6><ul>
<li>Selection<ul>
<li>Syntax: σ c (R)</li>
<li>Set: { t | t ∈ R AND t fulfills c} </li>
<li>Bag: { $t^n$ | $t^n$ ∈ R AND t fulfills c}</li>
</ul>
</li>
<li>Renaming<ul>
<li>Syntax: ρ A (R)</li>
<li>Set: { t.A | t∈R} </li>
<li>Bag: { $(t.A)^n$ | $t^n$ ∈R}</li>
<li>Example: $ρ_c$←a(R)</li>
</ul>
</li>
<li>Projection<ul>
<li>Syntax: π A (R)</li>
<li>Set: { t.A | t∈R} </li>
<li>Bag: { $(t.A)^n$ | $t^n$ ∈R}</li>
</ul>
</li>
<li>Joins<ul>
<li>Theta, natural, cross-product, outer, anti</li>
<li>Cross Product<ul>
<li>Syntax: R × S</li>
<li>Set: { (t,s) | t∈R AND s∈S} </li>
<li>Bag: { (t,s)^n×m | t^n ∈R AND s^m ∈S}</li>
</ul>
</li>
<li>Join<ul>
<li>Syntax: $R\bowtie_{c}S$</li>
<li>Set: { (t,s) | t∈R AND s∈S AND (t,s) matches c} </li>
<li>Bag: { $(t,s)^{n×m}$ |$t^n$ ∈R AND $s^m$ ∈S AND (t,s) matches c}</li>
</ul>
</li>
<li>Natural Join<ul>
<li>Syntax: $R\bowtie S$</li>
<li>All combinations of tuples from R and S that match on common attributes</li>
<li>A = common attributes of R and S</li>
<li>C = exclusive attributes of S</li>
<li>Set: {(t,s.C) | t∈R AND s∈S AND t.A=s.A}</li>
<li>Bag: {$(t,s.C)^{n×m}$ | $t^n$ ∈R AND $s^m$ ∈S AND t.A=s.A}</li>
</ul>
</li>
<li>Left-outer Join<ul>
<li>Syntax:$R=\bowtie{c} S$</li>
<li>Contains all tuples in R join S</li>
<li>Also includes every tuple in R that is not joined with a tuple in S, after padding a NULL</li>
<li>$R=\bowtie _{a=d}S$</li>
<li><img src="../images/left_outer_join_example.png" alt="left_outer_join_example"></li>
</ul>
</li>
<li>Right-outer Join<ul>
<li>Syntax:$R\bowtie =S$</li>
<li>s∈S without match, ﬁll R attributes with NULLrigh</li>
<li>$R\bowtie =_{a=d}S$</li>
<li><img src="../images/right_outer_join_example.png" alt="right_outer_join_example"></li>
</ul>
</li>
<li>Full-outer Join<ul>
<li>Syntax: $R=\bowtie =_{c}S$</li>
<li>$R=\bowtie=_{a=d}S$</li>
<li><img src="../images/full_outer_join_example.png" alt="full_outer_join_example"></li>
</ul>
</li>
</ul>
</li>
<li>Aggregation<ul>
<li>All operators treat a relation as a bag of tuples.</li>
<li>SUM: computes the sum of a column with numerical values.</li>
<li>AVG: computes the average of a column with numerical values.</li>
<li>MIN and MAX: Natural Order</li>
<li>COUNT: computes the number of non-NULL tuples in a column.</li>
<li>Grouping and aggregation generally need to be implemented and optimized together</li>
<li>Syntax: $G\gamma A(R)$<ul>
<li>A is list of aggregation functions </li>
<li>G is list of group by attributes</li>
</ul>
</li>
<li>Build groups of tuples according G and compute the aggregation functions from each group</li>
<li>$b\gamma sum(a)(R)$</li>
<li><img src="../images/aggregation_example.png" alt="aggregation_example"></li>
</ul>
</li>
<li>Duplicate removal<ul>
<li>Syntax: $\delta(R)$: is the relation containing exactly one copy of each tuple in R.</li>
<li>$\delta(R)$</li>
<li><img src="../images/duplicate_removal.png" alt="duplicate_removal"></li>
</ul>
</li>
<li>Set operations.</li>
<li>Union, Intersection and Difference<ul>
<li>Union<ul>
<li>Syntax: $R\cup S$</li>
<li><img src="../images/unionExample.png" alt="unionExample"></li>
</ul>
</li>
<li>Intersection<ul>
<li>Syntax: $R\cap S$</li>
<li><img src="../images/intersectionExample.png" alt="intersectionExample"></li>
</ul>
</li>
<li>Set Difference<ul>
<li>Syntax: $R-S$</li>
<li><img src="../images/setExample.png" alt="setExample"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Canonical-Translation-to-Relational-Algebra"><a href="#Canonical-Translation-to-Relational-Algebra" class="headerlink" title="Canonical Translation to Relational Algebra"></a>Canonical Translation to Relational Algebra</h4><ul>
<li><strong>FROM</strong> clause into joins and crossproducts </li>
<li><strong>WHERE</strong> clause into selection </li>
<li><strong>SELECT</strong> clause into projection and renaming<ul>
<li>If it has aggregation functions use aggregation </li>
<li><strong>DISTINCT</strong> into duplicate removal</li>
</ul>
</li>
<li><strong>GROUP BY</strong> clause into aggregation </li>
<li><strong>HAVING</strong> clause into selection </li>
<li><strong>ORDER BY</strong> - no counter-part</li>
</ul>
<h4 id="Set-Operations"><a href="#Set-Operations" class="headerlink" title="Set Operations"></a>Set Operations</h4><ul>
<li><strong>UNION ALL</strong> into union </li>
<li><strong>UNION</strong> duplicate removal over union </li>
<li><strong>INTERSECT ALL</strong> into intersection </li>
<li><strong>INTERSECT</strong> add duplicate removal </li>
<li><strong>EXCEPT ALL</strong> into set diﬀerence </li>
<li><strong>EXCEPT</strong> apply duplicate removal to inputs and then apply set diﬀerence</li>
</ul>
<h4 id="Conversion-into-Relational-Algebra"><a href="#Conversion-into-Relational-Algebra" class="headerlink" title="Conversion into Relational Algebra"></a>Conversion into Relational Algebra</h4><h5 id="Example-1-1"><a href="#Example-1-1" class="headerlink" title="Example 1"></a>Example 1</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> MovieStar <span class="keyword">WHERE</span> birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span>;</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021614275.png" alt="image-20191206021614275"></p>
<h5 id="Example-2-1"><a href="#Example-2-1" class="headerlink" title="Example 2"></a>Example 2</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> movieTitle</span><br><span class="line"><span class="keyword">FROM</span>   StarsIn, MovieStar</span><br><span class="line"><span class="keyword">WHERE</span>  starName = <span class="keyword">name</span> <span class="keyword">AND</span> birthdate <span class="keyword">LIKE</span> <span class="string">'%1960'</span>;</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021630157.png" alt="image-20191206021630157"></p>
<h5 id="Example-3"><a href="#Example-3" class="headerlink" title="Example 3"></a>Example 3</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sum</span>(a)</span><br><span class="line"><span class="keyword">FROM</span> R</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> b</span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021643102.png" alt="image-20191206021643102"></p>
<h5 id="Example-4"><a href="#Example-4" class="headerlink" title="Example 4"></a>Example 4</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> dep, headcnt</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">AS</span> headcnt, dep</span><br><span class="line">     <span class="keyword">FROM</span> Employee</span><br><span class="line">     <span class="keyword">GROUP</span> <span class="keyword">BY</span> dep)</span><br><span class="line"><span class="keyword">WHERE</span> headcnt &gt; <span class="number">100</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/image-20191206021656629.png" alt="image-20191206021656629"></p>
<h5 id="Example-5"><a href="#Example-5" class="headerlink" title="Example 5"></a>Example 5</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> title <span class="keyword">FROM</span> StarsIn <span class="keyword">WHERE</span> starName <span class="keyword">IN</span> (&lt;<span class="keyword">Query</span>&gt;);</span><br></pre></td></tr></table></figure>

<p><img src="../images/conversion_into_relationExample5.png" alt="conversion_into_relationExample5"></p>
<h3 id="Query-Processing-and-Optimization"><a href="#Query-Processing-and-Optimization" class="headerlink" title="Query Processing and Optimization"></a>Query Processing and Optimization</h3><h4 id="Query-Optimization"><a href="#Query-Optimization" class="headerlink" title="Query Optimization"></a>Query Optimization</h4><p><img src="../images/image-20191206022236925.png" alt="image-20191206022236925"></p>
<h5 id="Relational-Algebra-Optimization"><a href="#Relational-Algebra-Optimization" class="headerlink" title="Relational Algebra Optimization"></a>Relational Algebra Optimization</h5><h6 id="Algebraic-Laws"><a href="#Algebraic-Laws" class="headerlink" title="Algebraic Laws:"></a>Algebraic Laws:</h6><ul>
<li>Joins and Products<ul>
<li>Natural joins and product are both associative and commutative</li>
<li>theta-join is commutative but not always associative.</li>
</ul>
</li>
<li>Union and Intersect<ul>
<li>Union and intersection are both associative and commutative</li>
</ul>
</li>
<li>Laws for Bags and Sets can differ<ul>
<li>Holds for sets, but guarentee for bags</li>
</ul>
</li>
<li>Select<ul>
<li>reduces the number of tuples (size of relation)</li>
<li>an important general rule in optimization is to push selects as far down the tree as possible</li>
<li>commutative</li>
<li>must be pushed through both arguments for union:<ul>
<li>Union: σ p (R ∪ S) = σ p (R) ∪ σ p (S)</li>
</ul>
</li>
<li>must be pushed through ﬁrst arguments, optionally second for diﬀerence:<ul>
<li>Diﬀerence: σ p (R - S) = σ p (R) - S</li>
</ul>
</li>
<li>For the other operators it is only required that the selection be pushed to one argument.<ul>
<li>σ p (R × S) = σ p (R) × S, if p contains only attributes from R</li>
</ul>
</li>
<li>Derivation<ul>
<li><img src="../images/image-20191206024632637.png" alt="image-20191206024632637"></li>
</ul>
</li>
<li>Amendment to the simple push down the select<ul>
<li>Use this algebraic law in the reverse order: $\sigma _p(R\bowtie S) = \sigma _p(R)\bowtie S$ to push the σ year=1996 operation up the tree</li>
<li><img src="../images/image-20191206025216352.png" alt="image-20191206025216352"></li>
<li>Then use the algebraic law in the forward order: $\sigma _p(R\bowtie S) = \sigma _p(R)\bowtie \sigma _p(S)$ push the $\sigma _{year=1996}$ operation down the tree.</li>
<li><img src="../images/image-20191206025413264.png" alt="image-20191206025413264"></li>
</ul>
</li>
</ul>
</li>
<li>Projection<ul>
<li><img src="../images/image-20191206025519667.png" alt="image-20191206025519667"></li>
</ul>
</li>
<li>Example<ul>
<li><img src="../images/image-20191206030745130.png" alt="image-20191206030745130"></li>
<li><img src="../images/image-20191206030801787.png" alt="image-20191206030801787"></li>
<li><img src="../images/image-20191206030815185.png" alt="image-20191206030815185"></li>
<li><img src="../images/image-20191206030824074.png" alt="image-20191206030824074"></li>
<li><img src="../images/image-20191206030838597.png" alt="image-20191206030838597"></li>
</ul>
</li>
<li>Summary<ul>
<li>Selections<ul>
<li>push down tree as far as possible </li>
<li>if condition is an AND, split and push separately </li>
<li>sometimes need to push up before pushing down</li>
</ul>
</li>
<li>Projections<ul>
<li>can be pushed down</li>
<li>new ones can be added (but be careful)</li>
</ul>
</li>
<li>duplicate eliminations can sometimes be removed (e.g., if one key)</li>
<li>Selection/product combinations<ul>
<li>can sometimes be replaced with join</li>
</ul>
</li>
<li>Many transformations lead to “promising” plans</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=298 height=52 src="//music.163.com/outchain/player?type=2&id=536937691&auto=1&height=32"></iframe>
      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Yuanchen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuanchen</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
