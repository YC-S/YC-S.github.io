<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="1ã€ä»€ä¹ˆæ˜¯reactReact.js æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ æ„å»ºé¡µé¢ UI çš„åº“ã€‚ React.js å°†å¸®åŠ©æˆ‘ä»¬å°†ç•Œé¢åˆ†æˆäº†å„ä¸ªç‹¬ç«‹çš„å°å—ï¼Œæ¯ä¸€ä¸ªå—å°±æ˜¯ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œå°±æˆäº†æˆ‘ä»¬çš„é¡µé¢ã€‚ React.js ä¸­ä¸€åˆ‡çš†ç»„ä»¶ï¼Œç”¨ React.js å†™çš„å…¶å®å°±æ˜¯ React.js ç»„ä»¶ã€‚ React.js ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªåº“ã€‚å®ƒåªæä¾› UI ï¼ˆviewï¼‰å±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å®é™…çš„é¡¹ç›®å½“ä¸­ï¼Œå®ƒ">
<meta property="og:type" content="article">
<meta property="og:title" content="Reactæ€»ç»“">
<meta property="og:url" content="http://yoursite.com/2020/03/14/React%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="Yuanchen&#39;s Blog">
<meta property="og:description" content="1ã€ä»€ä¹ˆæ˜¯reactReact.js æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ æ„å»ºé¡µé¢ UI çš„åº“ã€‚ React.js å°†å¸®åŠ©æˆ‘ä»¬å°†ç•Œé¢åˆ†æˆäº†å„ä¸ªç‹¬ç«‹çš„å°å—ï¼Œæ¯ä¸€ä¸ªå—å°±æ˜¯ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œå°±æˆäº†æˆ‘ä»¬çš„é¡µé¢ã€‚ React.js ä¸­ä¸€åˆ‡çš†ç»„ä»¶ï¼Œç”¨ React.js å†™çš„å…¶å®å°±æ˜¯ React.js ç»„ä»¶ã€‚ React.js ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªåº“ã€‚å®ƒåªæä¾› UI ï¼ˆviewï¼‰å±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å®é™…çš„é¡¹ç›®å½“ä¸­ï¼Œå®ƒ">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314143949254.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314144040294.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314144503017.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314144605558.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314145149375.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314145348052.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314145413595.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314145616845.png">
<meta property="og:image" content="http://yoursite.com/2020/03/14/images/image-20200314145828931.png">
<meta property="article:published_time" content="2020-03-14T18:38:17.000Z">
<meta property="article:modified_time" content="2020-03-14T20:10:53.261Z">
<meta property="article:author" content="Yuanchen">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/03/14/images/image-20200314143949254.png">

<link rel="canonical" href="http://yoursite.com/2020/03/14/React%E6%80%BB%E7%BB%93/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Reactæ€»ç»“ | Yuanchen's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yuanchen's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/14/React%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yuanchen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuanchen's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Reactæ€»ç»“
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-14 14:38:17 / Modified: 16:10:53" itemprop="dateCreated datePublished" datetime="2020-03-14T14:38:17-04:00">2020-03-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1ã€ä»€ä¹ˆæ˜¯react"><a href="#1ã€ä»€ä¹ˆæ˜¯react" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯react"></a>1ã€ä»€ä¹ˆæ˜¯react</h2><p>React.js æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ æ„å»ºé¡µé¢ UI çš„åº“ã€‚<br> React.js å°†å¸®åŠ©æˆ‘ä»¬å°†ç•Œé¢åˆ†æˆäº†å„ä¸ªç‹¬ç«‹çš„å°å—ï¼Œæ¯ä¸€ä¸ªå—å°±æ˜¯ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œå°±æˆäº†æˆ‘ä»¬çš„é¡µé¢ã€‚<br> <strong>React.js ä¸­ä¸€åˆ‡çš†ç»„ä»¶ï¼Œç”¨ React.js å†™çš„å…¶å®å°±æ˜¯ React.js ç»„ä»¶ã€‚</strong><br> React.js ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªåº“ã€‚å®ƒåªæä¾› UI ï¼ˆviewï¼‰å±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å®é™…çš„é¡¹ç›®å½“ä¸­ï¼Œå®ƒå¹¶ä¸èƒ½è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„é—®é¢˜ï¼Œéœ€è¦ç»“åˆå…¶å®ƒçš„åº“ï¼Œä¾‹å¦‚ Reduxã€React-router ç­‰æ¥ååŠ©æä¾›å®Œæ•´çš„è§£å†³æ–¹æ³•ã€‚</p>
<h2 id="2ã€ç†è§£JSX"><a href="#2ã€ç†è§£JSX" class="headerlink" title="2ã€ç†è§£JSX"></a>2ã€ç†è§£JSX</h2><p>React.js å°±æŠŠ JavaScript çš„è¯­æ³•æ‰©å±•äº†ä¸€ä¸‹ï¼Œè®© JavaScript è¯­è¨€èƒ½å¤Ÿæ”¯æŒè¿™ç§ç›´æ¥åœ¨ JavaScript ä»£ç é‡Œé¢ç¼–å†™ç±»ä¼¼ HTML æ ‡ç­¾ç»“æ„çš„è¯­æ³•ï¼Œè¿™æ ·å†™èµ·æ¥å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚ç¼–è¯‘çš„è¿‡ç¨‹ä¼šæŠŠç±»ä¼¼ HTML çš„ JSX ç»“æ„è½¬æ¢æˆ JavaScript çš„å¯¹è±¡ç»“æ„ã€‚<br> <strong>æ‰€è°“çš„ JSX å…¶å®å°±æ˜¯ JavaScript å¯¹è±¡ã€‚</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">     React.createElement(</span><br><span class="line">        <span class="string">"div"</span>,</span><br><span class="line">        <span class="literal">null</span>,</span><br><span class="line">        React.createElement(</span><br><span class="line">          <span class="string">"h1"</span>,</span><br><span class="line">          &#123; <span class="attr">className</span>: <span class="string">'title'</span> &#125;,</span><br><span class="line">          <span class="string">"React å°ä¹¦"</span></span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="../images/image-20200314143949254.png" alt="image-20200314143949254" style="zoom:200%;" />

<p>æœ‰äº›åŒå­¦å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä» JSX ç›´æ¥æ¸²æŸ“æ„é€  DOM ç»“æ„ï¼Œè€Œæ˜¯è¦ç»è¿‡ä¸­é—´è¿™ä¹ˆä¸€å±‚å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€ä¸ªåŸå› æ˜¯ï¼Œå½“æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªè¡¨ç¤º UI çš„ç»“æ„å’Œä¿¡æ¯çš„å¯¹è±¡ä»¥åï¼Œä¸ä¸€å®šä¼šæŠŠå…ƒç´ æ¸²æŸ“åˆ°æµè§ˆå™¨çš„æ™®é€šé¡µé¢ä¸Šï¼Œæˆ‘ä»¬æœ‰å¯èƒ½æŠŠè¿™ä¸ªç»“æ„æ¸²æŸ“åˆ° canvas ä¸Šï¼Œæˆ–è€…æ˜¯æ‰‹æœº App ä¸Šã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¼šè¦æŠŠ react-dom å•ç‹¬æŠ½ç¦»å‡ºæ¥çš„åŸå› ï¼Œå¯ä»¥æƒ³è±¡æœ‰ä¸€ä¸ªå« react-canvas å¯ä»¥å¸®æˆ‘ä»¬æŠŠ UI æ¸²æŸ“åˆ° canvas ä¸Šï¼Œæˆ–è€…æ˜¯æœ‰ä¸€ä¸ªå« react-app å¯ä»¥å¸®æˆ‘ä»¬æŠŠå®ƒè½¬æ¢æˆåŸç”Ÿçš„ Appï¼ˆå®é™…ä¸Šè¿™ç©æ„å« ReactNativeï¼‰ã€‚</p>
<p>ç¬¬äºŒä¸ªåŸå› æ˜¯ï¼Œæœ‰äº†è¿™æ ·ä¸€ä¸ªå¯¹è±¡ã€‚å½“æ•°æ®å˜åŒ–ï¼Œéœ€è¦æ›´æ–°ç»„ä»¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨æ¯”è¾ƒå¿«çš„ç®—æ³•æ“ä½œè¿™ä¸ª JavaScript å¯¹è±¡ï¼Œè€Œä¸ç”¨ç›´æ¥æ“ä½œé¡µé¢ä¸Šçš„ DOMï¼Œè¿™æ ·å¯ä»¥å°½é‡å°‘çš„å‡å°‘æµè§ˆå™¨é‡æ’ï¼Œæå¤§åœ°ä¼˜åŒ–æ€§èƒ½ã€‚è¿™ä¸ªåœ¨ä»¥åçš„ç« èŠ‚ä¸­æˆ‘ä»¬ä¼šæåˆ°ã€‚</p>
<p><strong>æ€»ç»“</strong></p>
<p>è¦è®°ä½å‡ ä¸ªç‚¹ï¼š</p>
<ul>
<li>JSX æ˜¯ JavaScript è¯­è¨€çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œé•¿å¾—åƒ HTMLï¼Œä½†å¹¶ä¸æ˜¯ HTMLã€‚</li>
<li>React.js å¯ä»¥ç”¨ JSX æ¥æè¿°ä½ çš„ç»„ä»¶é•¿ä»€ä¹ˆæ ·çš„ã€‚</li>
<li>JSX åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå˜æˆç›¸åº”çš„ JavaScript å¯¹è±¡æè¿°ã€‚</li>
<li>react-dom è´Ÿè´£æŠŠè¿™ä¸ªç”¨æ¥æè¿° UI ä¿¡æ¯çš„ JavaScript å¯¹è±¡å˜æˆ DOM å…ƒç´ ï¼Œå¹¶ä¸”æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</li>
</ul>
<h2 id="3ã€ç»„ä»¶çš„ç»„åˆã€åµŒå¥—å’Œç»„ä»¶æ ‘"><a href="#3ã€ç»„ä»¶çš„ç»„åˆã€åµŒå¥—å’Œç»„ä»¶æ ‘" class="headerlink" title="3ã€ç»„ä»¶çš„ç»„åˆã€åµŒå¥—å’Œç»„ä»¶æ ‘"></a>3ã€ç»„ä»¶çš„ç»„åˆã€åµŒå¥—å’Œç»„ä»¶æ ‘</h2><p>ç»„ä»¶å¯ä»¥å’Œç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œç»„ä»¶å†…éƒ¨å¯ä»¥ä½¿ç”¨åˆ«çš„ç»„ä»¶ã€‚å°±åƒæ™®é€šçš„ HTML æ ‡ç­¾ä¸€æ ·ä½¿ç”¨å°±å¯ä»¥ã€‚è¿™æ ·çš„ç»„åˆåµŒå¥—ï¼Œæœ€åæ„æˆä¸€ä¸ªæ‰€è°“çš„ç»„ä»¶æ ‘ï¼Œå°±æ­£å¦‚ä¸Šé¢çš„ä¾‹å­é‚£æ ·ï¼ŒIndex ç”¨äº† Headerã€Mainã€Footerï¼ŒHeader åˆä½¿ç”¨äº† Title ã€‚è¿™æ ·ç”¨è¿™æ ·çš„æ ‘çŠ¶ç»“æ„è¡¨ç¤ºå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="../images/image-20200314144040294.png" alt="image-20200314144040294"></p>
<p>å½“é¡µé¢ç»“æ„å¤æ‚èµ·æ¥ï¼Œæœ‰è®¸å¤šä¸åŒçš„ç»„ä»¶åµŒå¥—ç»„åˆçš„è¯ï¼Œç»„ä»¶æ ‘ä¼šç›¸å½“çš„å¤æ‚å’Œåºå¤§ã€‚<strong>ç†è§£ç»„ä»¶æ ‘çš„æ¦‚å¿µå¯¹åé¢ç†è§£æ•°æ®æ˜¯å¦‚ä½•åœ¨ç»„ä»¶æ ‘å†…è‡ªä¸Šå¾€ä¸‹æµåŠ¨è¿‡ç¨‹å¾ˆé‡è¦ã€‚</strong></p>
<h2 id="4ã€äº‹ä»¶ç›‘å¬"><a href="#4ã€äº‹ä»¶ç›‘å¬" class="headerlink" title="4ã€äº‹ä»¶ç›‘å¬"></a>4ã€äº‹ä»¶ç›‘å¬</h2><p><strong>å…³äºäº‹ä»¶ä¸­çš„ this</strong><br> ä¸€èˆ¬åœ¨æŸä¸ªç±»çš„å®ä¾‹æ–¹æ³•é‡Œé¢çš„ this æŒ‡çš„æ˜¯è¿™ä¸ªå®ä¾‹æœ¬èº«ã€‚<br> ä½†æ˜¯ React.js è°ƒç”¨ä½ æ‰€ä¼ ç»™å®ƒçš„æ–¹æ³•çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯é€šè¿‡å¯¹è±¡æ–¹æ³•çš„æ–¹å¼è°ƒç”¨ï¼ˆthis.handleClickOnTitleï¼‰ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡å‡½æ•°è°ƒç”¨ ï¼ˆhandleClickOnTitleï¼‰ï¼Œ<strong>æ‰€ä»¥äº‹ä»¶ç›‘å¬å‡½æ•°å†…å¹¶ä¸èƒ½é€šè¿‡ this è·å–åˆ°å®ä¾‹ã€‚</strong><br> å¦‚æœä½ æƒ³åœ¨äº‹ä»¶å‡½æ•°å½“ä¸­ä½¿ç”¨å½“å‰çš„å®ä¾‹ï¼Œä½ éœ€è¦æ‰‹åŠ¨åœ°å°†å®ä¾‹æ–¹æ³• bind åˆ°å½“å‰å®ä¾‹ä¸Šå†ä¼ å…¥ç»™ React.jsã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Title</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  handleClickOnTitle (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;h1 onClick=&#123;<span class="keyword">this</span>.handleClickOnTitle.bind(<span class="keyword">this</span>)&#125;&gt;React å°ä¹¦&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€»ç»“</strong></p>
<ul>
<li>ä¸º React çš„ç»„ä»¶æ·»åŠ äº‹ä»¶ç›‘å¬æ˜¯å¾ˆç®€å•çš„äº‹æƒ…ï¼Œä½ åªéœ€è¦ä½¿ç”¨ React.js æä¾›äº†ä¸€ç³»åˆ—çš„ on* æ–¹æ³•å³å¯ã€‚</li>
<li>React.js ä¼šç»™æ¯ä¸ªäº‹ä»¶ç›‘å¬ä¼ å…¥ä¸€ä¸ª event å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æä¾›çš„åŠŸèƒ½å’Œæµè§ˆå™¨æä¾›çš„åŠŸèƒ½ä¸€è‡´ï¼Œè€Œä¸”å®ƒæ˜¯å…¼å®¹æ‰€æœ‰æµè§ˆå™¨çš„ã€‚</li>
<li>React.js çš„äº‹ä»¶ç›‘å¬æ–¹æ³•éœ€è¦æ‰‹åŠ¨ bind åˆ°å½“å‰å®ä¾‹ï¼Œè¿™ç§æ¨¡å¼åœ¨ React.js ä¸­éå¸¸å¸¸ç”¨ã€‚</li>
</ul>
<h2 id="5ã€ç»„ä»¶çš„-state-å’Œ-setState"><a href="#5ã€ç»„ä»¶çš„-state-å’Œ-setState" class="headerlink" title="5ã€ç»„ä»¶çš„ state å’Œ setState"></a>5ã€ç»„ä»¶çš„ state å’Œ setState</h2><p>setState æ¥å—å‡½æ•°å‚æ•°:<br> è¿™é‡Œè¿˜æœ‰è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½ è°ƒç”¨ setState çš„æ—¶å€™ï¼Œ<strong>React.js å¹¶ä¸ä¼šé©¬ä¸Šä¿®æ”¹ stateã€‚è€Œæ˜¯æŠŠè¿™ä¸ªå¯¹è±¡æ”¾åˆ°ä¸€ä¸ªæ›´æ–°é˜Ÿåˆ—é‡Œé¢ï¼Œç¨åæ‰ä¼šä»é˜Ÿåˆ—å½“ä¸­æŠŠæ–°çš„çŠ¶æ€æå–å‡ºæ¥åˆå¹¶åˆ° state å½“ä¸­ï¼Œç„¶åå†è§¦å‘ç»„ä»¶æ›´æ–°ã€‚</strong>è¿™ä¸€ç‚¹è¦å¥½å¥½æ³¨æ„ã€‚å¯ä»¥ä½“ä¼šä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">handleClickOnLikeButton () &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.isLiked)</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    isLiked: !<span class="keyword">this</span>.state.isLiked</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.isLiked)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šå‘ç°ä¸¤æ¬¡æ‰“å°çš„éƒ½æ˜¯ falseï¼Œå³ä½¿æˆ‘ä»¬ä¸­é—´å·²ç» setState è¿‡ä¸€æ¬¡äº†ã€‚è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆ bugï¼Œåªæ˜¯ React.js çš„ setState æŠŠä½ çš„ä¼ è¿›æ¥çš„çŠ¶æ€ç¼“å­˜èµ·æ¥ï¼Œç¨åæ‰ä¼šå¸®ä½ æ›´æ–°åˆ° state ä¸Šï¼Œæ‰€ä»¥ä½ è·å–åˆ°çš„è¿˜æ˜¯åŸæ¥çš„ isLikedã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ æƒ³åœ¨ setState ä¹‹åä½¿ç”¨æ–°çš„ state æ¥åšåç»­è¿ç®—å°±åšä¸åˆ°äº†ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">handleClickOnLikeButton () &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;) <span class="comment">// =&gt; this.state.count è¿˜æ˜¯ undefined</span></span><br><span class="line">  <span class="keyword">this</span>.setState(&#123; <span class="attr">count</span>: <span class="keyword">this</span>.state.count + <span class="number">1</span>&#125;) <span class="comment">// =&gt; undefined + 1 = NaN</span></span><br><span class="line">  <span class="keyword">this</span>.setState(&#123; <span class="attr">count</span>: <span class="keyword">this</span>.state.count + <span class="number">2</span>&#125;) <span class="comment">// =&gt; NaN + 2 = NaN</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç çš„è¿è¡Œç»“æœå¹¶ä¸èƒ½è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸï¼Œæˆ‘ä»¬å¸Œæœ› count è¿è¡Œç»“æœæ˜¯ 3 ï¼Œå¯æ˜¯æœ€åå¾—åˆ°çš„æ˜¯ NaNã€‚ä½†æ˜¯è¿™ç§åç»­æ“ä½œä¾èµ–å‰ä¸€ä¸ª setState çš„ç»“æœçš„æƒ…å†µå¹¶ä¸ç½•è§ã€‚</p>
<p>è¿™é‡Œå°±è‡ªç„¶åœ°å¼•å‡ºäº†<strong>setState çš„ç¬¬äºŒç§ä½¿ç”¨æ–¹å¼:å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</strong>ï¼Œã€‚React.js ä¼šæŠŠä¸Šä¸€ä¸ª setState çš„ç»“æœä¼ å…¥è¿™ä¸ªå‡½æ•°ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨è¯¥ç»“æœè¿›è¡Œè¿ç®—ã€æ“ä½œï¼Œç„¶åè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ›´æ–° state çš„å¯¹è±¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">handleClickOnLikeButton () &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: prevState.count + <span class="number">1</span> &#125; <span class="comment">// ä¸Šä¸€ä¸ª setState çš„è¿”å›æ˜¯ count ä¸º 0ï¼Œå½“å‰è¿”å› 1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: prevState.count + <span class="number">2</span> &#125; <span class="comment">// ä¸Šä¸€ä¸ª setState çš„è¿”å›æ˜¯ count ä¸º 1ï¼Œå½“å‰è¿”å› 3</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// æœ€åçš„ç»“æœæ˜¯ this.state.count ä¸º 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å¯ä»¥è¾¾åˆ°ä¸Šè¿°çš„åˆ©ç”¨ä¸Šä¸€æ¬¡ setState ç»“æœè¿›è¡Œè¿ç®—çš„æ•ˆæœã€‚</p>
<hr>
<p><strong>setState åˆå¹¶</strong><br> ä¸Šé¢æˆ‘ä»¬è¿›è¡Œäº†ä¸‰æ¬¡ setStateï¼Œä½†æ˜¯å®é™…ä¸Šç»„ä»¶åªä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡ï¼Œè€Œä¸æ˜¯ä¸‰æ¬¡ï¼›è¿™æ˜¯å› ä¸ºåœ¨ React.js å†…éƒ¨ä¼šæŠŠ JavaScript äº‹ä»¶å¾ªç¯ä¸­çš„æ¶ˆæ¯é˜Ÿåˆ—çš„åŒä¸€ä¸ªæ¶ˆæ¯ä¸­çš„ setState éƒ½è¿›è¡Œåˆå¹¶ä»¥åå†é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>
<p>æ·±å±‚çš„åŸç†å¹¶ä¸éœ€è¦è¿‡å¤šçº ç»“ï¼Œä½ åªéœ€è¦è®°ä½çš„æ˜¯ï¼šåœ¨ä½¿ç”¨ React.js çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦æ‹…å¿ƒå¤šæ¬¡è¿›è¡Œ setState ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ã€‚</p>
<h2 id="6ã€é…ç½®ç»„ä»¶çš„-props"><a href="#6ã€é…ç½®ç»„ä»¶çš„-props" class="headerlink" title="6ã€é…ç½®ç»„ä»¶çš„ props"></a>6ã€é…ç½®ç»„ä»¶çš„ props</h2><p>åœ¨ä½¿ç”¨ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨æ ‡ç­¾çš„å±æ€§å½“ä¸­ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä½œä¸º props å¯¹è±¡çš„é”®å€¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LikeButton</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickOnLikeButton () &#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> wordings = <span class="keyword">this</span>.props.wordings || &#123; <span class="comment">//è·å–props</span></span><br><span class="line">      likedText: <span class="string">'å–æ¶ˆ'</span>,</span><br><span class="line">      unlikedText: <span class="string">'ç‚¹èµ'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;<span class="keyword">this</span>.handleClickOnLikeButton.bind(<span class="keyword">this</span>)&#125;&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.isLiked ? wordings.likedText : wordings.unlikedText&#125; ğŸ‘</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">---------</span></span><br><span class="line"><span class="regexp">class Index extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render () &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;LikeButton likedText='å·²èµ' unlikedText='èµ' /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>props ä¸å¯å˜</strong><br>props ä¸€æ—¦ä¼ å…¥è¿›æ¥å°±ä¸èƒ½æ”¹å˜ã€‚ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ä¸­çš„ handleClickOnLikeButton:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">handleClickOnLikeButton () &#123;</span><br><span class="line">  <span class="keyword">this</span>.props.likedText = <span class="string">'å–æ¶ˆ'</span></span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    isLiked: !<span class="keyword">this</span>.state.isLiked</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°è¯•åœ¨ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™æ”¹å˜ <code>this.props.likedText</code> ï¼Œç„¶åä½ ä¼šçœ‹åˆ°æ§åˆ¶å°æŠ¥é”™äº†ã€‚<br> <strong>ä½ ä¸èƒ½æ”¹å˜ä¸€ä¸ªç»„ä»¶è¢«æ¸²æŸ“çš„æ—¶å€™ä¼ è¿›æ¥çš„ props</strong>ã€‚React.js å¸Œæœ›ä¸€ä¸ªç»„ä»¶åœ¨è¾“å…¥ç¡®å®šçš„ props çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè¾“å‡ºç¡®å®šçš„ UI æ˜¾ç¤ºå½¢æ€ã€‚<strong>å¦‚æœ props æ¸²æŸ“è¿‡ç¨‹ä¸­å¯ä»¥è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´è¿™ä¸ªç»„ä»¶æ˜¾ç¤ºå½¢æ€å’Œè¡Œä¸ºå˜å¾—ä¸å¯é¢„æµ‹ï¼Œè¿™æ ·ä¼šå¯èƒ½ä¼šç»™ç»„ä»¶ä½¿ç”¨è€…å¸¦æ¥å›°æƒ‘ã€‚</strong></p>
<p>ä½†è¿™å¹¶ä¸æ„å‘³ç€ç”± props å†³å®šçš„æ˜¾ç¤ºå½¢æ€ä¸èƒ½è¢«ä¿®æ”¹ã€‚<strong>ç»„ä»¶çš„ä½¿ç”¨è€…å¯ä»¥ä¸»åŠ¨åœ°é€šè¿‡é‡æ–°æ¸²æŸ“çš„æ–¹å¼æŠŠæ–°çš„ props ä¼ å…¥ç»„ä»¶å½“ä¸­</strong>ï¼Œè¿™æ ·è¿™ä¸ªç»„ä»¶ä¸­ç”± props å†³å®šçš„æ˜¾ç¤ºå½¢æ€ä¹Ÿä¼šå¾—åˆ°ç›¸åº”çš„æ”¹å˜ã€‚</p>
<hr>
<p><strong>æ€»ç»“</strong></p>
<ul>
<li>ä¸ºäº†ä½¿å¾—ç»„ä»¶çš„å¯å®šåˆ¶æ€§æ›´å¼ºï¼Œåœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨æ ‡ç­¾ä¸ŠåŠ å±æ€§æ¥ä¼ å…¥é…ç½®å‚æ•°ã€‚</li>
<li>ç»„ä»¶å¯ä»¥åœ¨å†…éƒ¨é€šè¿‡ this.props è·å–åˆ°é…ç½®å‚æ•°ï¼Œç»„ä»¶å¯ä»¥æ ¹æ® props çš„ä¸åŒæ¥ç¡®å®šè‡ªå·±çš„æ˜¾ç¤ºå½¢æ€ï¼Œè¾¾åˆ°å¯é…ç½®çš„æ•ˆæœã€‚</li>
<li>å¯ä»¥é€šè¿‡ç»™ç»„ä»¶æ·»åŠ ç±»å±æ€§ defaultProps æ¥é…ç½®é»˜è®¤å‚æ•°ã€‚<br> props ä¸€æ—¦ä¼ å…¥ï¼Œä½ å°±ä¸å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨å¯¹å®ƒè¿›è¡Œä¿®æ”¹ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡çˆ¶ç»„ä»¶ä¸»åŠ¨é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„ propsï¼Œä»è€Œè¾¾åˆ°æ›´æ–°çš„æ•ˆæœã€‚</li>
</ul>
<h2 id="7ã€state-vs-props"><a href="#7ã€state-vs-props" class="headerlink" title="7ã€state vs props"></a>7ã€state vs props</h2><p>æˆ‘ä»¬æ¥ä¸€ä¸ªå…³äº state å’Œ props çš„æ€»ç»“ã€‚</p>
<p><strong>state</strong>:ä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»„ä»¶ä¿å­˜ã€æ§åˆ¶ã€ä¿®æ”¹<strong>è‡ªå·±</strong>çš„å¯å˜çŠ¶æ€ã€‚state åœ¨ç»„ä»¶å†…éƒ¨åˆå§‹åŒ–ï¼Œå¯ä»¥è¢«ç»„ä»¶è‡ªèº«ä¿®æ”¹ï¼Œè€Œå¤–éƒ¨ä¸èƒ½è®¿é—®ä¹Ÿä¸èƒ½ä¿®æ”¹ã€‚ä½ å¯ä»¥è®¤ä¸º state æ˜¯ä¸€ä¸ªå±€éƒ¨çš„ã€åªèƒ½è¢«ç»„ä»¶è‡ªèº«æ§åˆ¶çš„æ•°æ®æºã€‚state ä¸­çŠ¶æ€å¯ä»¥é€šè¿‡ this.setState æ–¹æ³•è¿›è¡Œæ›´æ–°ï¼ŒsetState ä¼šå¯¼è‡´ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<p><strong>props</strong>: çš„ä¸»è¦ä½œç”¨æ˜¯è®©ä½¿ç”¨è¯¥ç»„ä»¶çš„çˆ¶ç»„ä»¶å¯ä»¥ä¼ å…¥å‚æ•°æ¥é…ç½®è¯¥ç»„ä»¶ã€‚å®ƒæ˜¯å¤–éƒ¨ä¼ è¿›æ¥çš„é…ç½®å‚æ•°ï¼Œç»„ä»¶å†…éƒ¨æ— æ³•æ§åˆ¶ä¹Ÿæ— æ³•ä¿®æ”¹ã€‚é™¤éå¤–éƒ¨ç»„ä»¶ä¸»åŠ¨ä¼ å…¥æ–°çš„ propsï¼Œå¦åˆ™ç»„ä»¶çš„ props æ°¸è¿œä¿æŒä¸å˜ã€‚</p>
<p>state å’Œ props æœ‰ç€åƒä¸ä¸‡ç¼•çš„å…³ç³»ã€‚å®ƒä»¬éƒ½å¯ä»¥å†³å®šç»„ä»¶çš„è¡Œä¸ºå’Œæ˜¾ç¤ºå½¢æ€ã€‚ä¸€ä¸ªç»„ä»¶çš„ state ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡ props ä¼ ç»™å­ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥ä½¿ç”¨å¤–éƒ¨ä¼ å…¥çš„ props æ¥åˆå§‹åŒ–è‡ªå·±çš„ stateã€‚ä½†æ˜¯å®ƒä»¬çš„èŒè´£å…¶å®éå¸¸æ˜æ™°åˆ†æ˜ï¼š<strong>state æ˜¯è®©ç»„ä»¶æ§åˆ¶è‡ªå·±çš„çŠ¶æ€ï¼Œprops æ˜¯è®©å¤–éƒ¨å¯¹ç»„ä»¶è‡ªå·±è¿›è¡Œé…ç½®ã€‚</strong></p>
<p><strong>å¦‚æœä½ è§‰å¾—è¿˜æ˜¯æä¸æ¸… state å’Œ props çš„ä½¿ç”¨åœºæ™¯ï¼Œé‚£ä¹ˆè¯·è®°ä½ä¸€ä¸ªç®€å•çš„è§„åˆ™ï¼šå°½é‡å°‘åœ°ç”¨ stateï¼Œå°½é‡å¤šåœ°ç”¨ propsã€‚</strong></p>
<p><strong>æ²¡æœ‰ state çš„ç»„ä»¶å«æ— çŠ¶æ€ç»„ä»¶ï¼ˆstateless componentï¼‰ï¼Œè®¾ç½®äº† state çš„å«åšæœ‰çŠ¶æ€ç»„ä»¶ï¼ˆstateful componentï¼‰</strong>ã€‚</p>
<blockquote>
<p>å› ä¸ºçŠ¶æ€ä¼šå¸¦æ¥ç®¡ç†çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬å°½é‡å¤šåœ°å†™æ— çŠ¶æ€ç»„ä»¶ï¼Œå°½é‡å°‘åœ°å†™æœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚è¿™æ ·ä¼šé™ä½ä»£ç ç»´æŠ¤çš„éš¾åº¦ï¼Œä¹Ÿä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢å¼ºç»„ä»¶çš„å¯å¤ç”¨æ€§ã€‚å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç†æ˜¯ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ï¼Œæˆ‘ä»¬åç»­ä¼šç»§ç»­è®¨è®ºã€‚</p>
</blockquote>
<p>React.js éå¸¸é¼“åŠ±æ— çŠ¶æ€ç»„ä»¶ï¼Œåœ¨ 0.14 ç‰ˆæœ¬å¼•å…¥äº†å‡½æ•°å¼ç»„ä»¶â€”â€”ä¸€ç§å®šä¹‰ä¸èƒ½ä½¿ç”¨ state ç»„ä»¶ï¼Œä¾‹å¦‚ä¸€ä¸ªåŸæ¥è¿™æ ·å†™çš„ç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayHi () &#123;</span><br><span class="line">    alert(<span class="string">'Hello World'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div onClick=&#123;<span class="keyword">this</span>.sayHi.bind(<span class="keyword">this</span>)&#125;&gt;Hello World&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç”¨å‡½æ•°å¼ç»„ä»¶çš„ç¼–å†™æ–¹å¼å°±æ˜¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HelloWorld = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> sayHi = <span class="function">(<span class="params">event</span>) =&gt;</span> alert(<span class="string">'Hello World'</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div onClick=&#123;sayHi&#125;&gt;Hello World&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥å‰ä¸€ä¸ªç»„ä»¶æ˜¯é€šè¿‡ç»§æ‰¿ Component æ¥æ„å»ºï¼Œä¸€ä¸ªå­ç±»å°±æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚è€Œç”¨å‡½æ•°å¼çš„ç»„ä»¶ç¼–å†™æ–¹å¼æ˜¯ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œä½ å¯ä»¥å’Œä»¥å‰ä¸€æ ·é€šè¿‡ <HellWorld /> ä½¿ç”¨è¯¥ç»„ä»¶ã€‚ä¸åŒçš„æ˜¯ï¼Œå‡½æ•°å¼ç»„ä»¶åªèƒ½æ¥å— props è€Œæ— æ³•åƒè·Ÿç±»ç»„ä»¶ä¸€æ ·å¯ä»¥åœ¨ constructor é‡Œé¢åˆå§‹åŒ– stateã€‚ä½ å¯ä»¥ç†è§£å‡½æ•°å¼ç»„ä»¶å°±æ˜¯ä¸€ç§åªèƒ½æ¥å— props å’Œæä¾› render æ–¹æ³•çš„ç±»ç»„ä»¶ã€‚</p>
<h2 id="8ã€æ¸²æŸ“åˆ—è¡¨æ•°æ®"><a href="#8ã€æ¸²æŸ“åˆ—è¡¨æ•°æ®" class="headerlink" title="8ã€æ¸²æŸ“åˆ—è¡¨æ•°æ®"></a>8ã€æ¸²æŸ“åˆ—è¡¨æ•°æ®</h2><p>åˆ—è¡¨æ•°æ®åœ¨å‰ç«¯éå¸¸å¸¸è§ï¼Œæˆ‘ä»¬ç»å¸¸è¦å¤„ç†è¿™ç§ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚æ–‡ç« åˆ—è¡¨ã€è¯„è®ºåˆ—è¡¨ã€ç”¨æˆ·åˆ—è¡¨â€¦ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆå‡ ä¹æ¯å¤©éƒ½éœ€è¦è·Ÿåˆ—è¡¨æ•°æ®æ‰“äº¤é“ã€‚</p>
<p>React.js å½“ç„¶ä¹Ÿå…è®¸æˆ‘ä»¬å¤„ç†åˆ—è¡¨æ•°æ®ï¼Œä½†åœ¨ä½¿ç”¨ React.js å¤„ç†åˆ—è¡¨æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŒæ¡ä¸€äº›è§„åˆ™ã€‚æˆ‘ä»¬è¿™ä¸€èŠ‚ä¼šä¸“é—¨è®¨è®ºè¿™æ–¹é¢çš„çŸ¥è¯†ã€‚</p>
<h3 id="æ¸²æŸ“å­˜æ”¾-JSX-å…ƒç´ çš„æ•°ç»„"><a href="#æ¸²æŸ“å­˜æ”¾-JSX-å…ƒç´ çš„æ•°ç»„" class="headerlink" title="æ¸²æŸ“å­˜æ”¾ JSX å…ƒç´ çš„æ•°ç»„"></a>æ¸²æŸ“å­˜æ”¾ JSX å…ƒç´ çš„æ•°ç»„</h3><p>å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªç”¨æˆ·åˆ—è¡¨æ•°æ®ï¼Œå­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„å½“ä¸­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Jerry'</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">gender</span>: <span class="string">'male'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Tomy'</span>, <span class="attr">age</span>: <span class="number">22</span>, <span class="attr">gender</span>: <span class="string">'male'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Lily'</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">gender</span>: <span class="string">'female'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Lucy'</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">'female'</span> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç°åœ¨è¦æŠŠè¿™ä¸ªæ•°ç»„é‡Œé¢çš„æ•°æ®æ¸²æŸ“é¡µé¢ä¸Šè¦æ€ä¹ˆåšï¼Ÿå¼€å§‹ä¹‹å‰è¦è¡¥å……ä¸€ä¸ªçŸ¥è¯†ã€‚ä¹‹å‰è¯´è¿‡ JSX çš„è¡¨è¾¾å¼æ’å…¥ <code>{}</code> é‡Œé¢å¯ä»¥æ”¾ä»»ä½•æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬å¾€ <code>{}</code> é‡Œé¢æ”¾ä¸€ä¸ªå­˜æ”¾ JSX å…ƒç´ çš„æ•°ç»„ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;[</span><br><span class="line">          &lt;span&gt;React.js &lt;<span class="regexp">/span&gt;,</span></span><br><span class="line"><span class="regexp">          &lt;span&gt;is &lt;/</span>span&gt;,</span><br><span class="line">          &lt;span&gt;good&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        ]&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Index /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¾€ JSX é‡Œé¢å¡äº†ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„é‡Œé¢æ”¾äº†ä¸€äº› JSX å…ƒç´ ï¼ˆå…¶å®å°±æ˜¯ JavaScript å¯¹è±¡ï¼‰ã€‚</p>
<p>React.js æŠŠæ’å…¥è¡¨è¾¾å¼æ•°ç»„é‡Œé¢çš„æ¯ä¸€ä¸ª JSX å…ƒç´ ä¸€ä¸ªä¸ªç½—åˆ—ä¸‹æ¥ï¼Œæ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚æ‰€ä»¥è¿™é‡Œæœ‰ä¸ªå…³é”®ç‚¹ï¼š<em>å¦‚æœä½ å¾€ <code>{}</code> æ”¾ä¸€ä¸ªæ•°ç»„ï¼ŒReact.js ä¼šå¸®ä½ æŠŠæ•°ç»„é‡Œé¢ä¸€ä¸ªä¸ªå…ƒç´ ç½—åˆ—å¹¶ä¸”æ¸²æŸ“å‡ºæ¥</em>ã€‚</p>
<h3 id="ä½¿ç”¨-map-æ¸²æŸ“åˆ—è¡¨æ•°æ®"><a href="#ä½¿ç”¨-map-æ¸²æŸ“åˆ—è¡¨æ•°æ®" class="headerlink" title="ä½¿ç”¨ map æ¸²æŸ“åˆ—è¡¨æ•°æ®"></a>ä½¿ç”¨ map æ¸²æŸ“åˆ—è¡¨æ•°æ®</h3><p>çŸ¥é“è¿™ä¸€ç‚¹ä»¥åä½ å°±å¯ä»¥çŸ¥é“æ€ä¹ˆç”¨å¾ªç¯æŠŠå…ƒç´ æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼šå¾ªç¯ä¸Šé¢ç”¨æˆ·æ•°ç»„é‡Œé¢çš„æ¯ä¸€ä¸ªç”¨æˆ·ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·æ•°æ®æ„å»ºä¸€ä¸ª JSXï¼Œç„¶åæŠŠ JSX æ”¾åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„é‡Œé¢ï¼Œå†æŠŠæ–°çš„æ•°ç»„æ’å…¥ <code>render</code> æ–¹æ³•çš„ JSX é‡Œé¢ã€‚çœ‹çœ‹ä»£ç æ€ä¹ˆå†™ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Jerry'</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">gender</span>: <span class="string">'male'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Tomy'</span>, <span class="attr">age</span>: <span class="number">22</span>, <span class="attr">gender</span>: <span class="string">'male'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Lily'</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">gender</span>: <span class="string">'female'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Lucy'</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">'female'</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> usersElements = [] <span class="comment">// ä¿å­˜æ¯ä¸ªç”¨æˆ·æ¸²æŸ“ä»¥å JSX çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> user <span class="keyword">of</span> users) &#123;</span><br><span class="line">      usersElements.push( <span class="comment">// å¾ªç¯æ¯ä¸ªç”¨æˆ·ï¼Œæ„å»º JSXï¼Œpush åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div&gt;å§“åï¼š&#123;user.username&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div&gt;å¹´é¾„ï¼š&#123;user.age&#125;&lt;/</span>div&gt;</span><br><span class="line">          &lt;div&gt;æ€§åˆ«ï¼š&#123;user.gender&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">          &lt;hr /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;&#123;usersElements&#125;&lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Index /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œç”¨äº†ä¸€ä¸ªæ–°çš„æ•°ç»„ <code>usersElements</code>ï¼Œç„¶åå¾ªç¯ <code>users</code> æ•°ç»„ï¼Œä¸ºæ¯ä¸ª <code>user</code> æ„å»ºä¸€ä¸ª JSX ç»“æ„ï¼Œç„¶å push åˆ° <code>usersElements</code> ä¸­ã€‚ç„¶åç›´æ¥ç”¨è¡¨è¾¾å¼æ’å…¥ï¼ŒæŠŠè¿™ä¸ª <code>userElements</code> æ’åˆ° return çš„ JSX å½“ä¸­ã€‚å› ä¸º React.js ä¼šè‡ªåŠ¨åŒ–å¸®æˆ‘ä»¬æŠŠæ•°ç»„å½“ä¸­çš„ JSX ç½—åˆ—æ¸²æŸ“å‡ºæ¥ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šæ˜¾ç¤ºï¼š</p>
<img src="../images/image-20200314144503017.png" alt="image-20200314144503017" style="zoom:200%;" />

<p>ä½†æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šæ‰‹åŠ¨å†™å¾ªç¯æ¥æ„å»ºåˆ—è¡¨çš„ JSX ç»“æ„ï¼Œå¯ä»¥ç›´æ¥ç”¨ ES6 è‡ªå¸¦çš„ <code>map</code>ï¼ˆä¸äº†è§£ <code>map</code> å‡½æ•°çš„åŒå­¦å¯ä»¥å…ˆäº†è§£ç›¸å…³çš„çŸ¥è¯†å†æ¥å›é¡¾è¿™é‡Œï¼‰ï¼Œä»£ç å¯ä»¥ç®€åŒ–æˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;users.map(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;div&gt;å§“åï¼š&#123;user.username&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">              &lt;div&gt;å¹´é¾„ï¼š&#123;user.age&#125;&lt;/</span>div&gt;</span><br><span class="line">              &lt;div&gt;æ€§åˆ«ï¼š&#123;user.gender&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">              &lt;hr /</span>&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">          )</span></span><br><span class="line"><span class="regexp">        &#125;)&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„æ¨¡å¼åœ¨ JavaScript ä¸­éå¸¸å¸¸è§ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ React.js å¤„ç†åˆ—è¡¨å°±æ˜¯ç”¨ <code>map</code> æ¥å¤„ç†ã€æ¸²æŸ“çš„ã€‚ç°åœ¨è¿›ä¸€æ­¥æŠŠæ¸²æŸ“å•ç‹¬ä¸€ä¸ªç”¨æˆ·çš„ç»“æ„æŠ½ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªç»„ä»¶ï¼Œç»§ç»­ä¼˜åŒ–ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Jerry'</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">gender</span>: <span class="string">'male'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Tomy'</span>, <span class="attr">age</span>: <span class="number">22</span>, <span class="attr">gender</span>: <span class="string">'male'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Lily'</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">gender</span>: <span class="string">'female'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">'Lucy'</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">'female'</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; user &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div&gt;å§“åï¼š&#123;user.username&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;å¹´é¾„ï¼š&#123;user.age&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;div&gt;æ€§åˆ«ï¼š&#123;user.gender&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;hr /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Index extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render () &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &#123;users.map((user) =&gt; &lt;User user=&#123;user&#125; /</span>&gt;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;Index /</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¿™é‡ŒæŠŠè´Ÿè´£å±•ç¤ºç”¨æˆ·æ•°æ®çš„ JSX ç»“æ„æŠ½ç¦»æˆä¸€ä¸ªç»„ä»¶ <code>User</code> ï¼Œå¹¶ä¸”é€šè¿‡ <code>props</code> æŠŠ <code>user</code> æ•°æ®ä½œä¸ºç»„ä»¶çš„é…ç½®å‚æ•°ä¼ è¿›å»ï¼›è¿™æ ·æ”¹å†™ <code>Index</code> å°±éå¸¸æ¸…æ™°äº†ï¼Œçœ‹ä¸€çœ¼å°±çŸ¥é“è´Ÿè´£æ¸²æŸ“ <code>users</code> åˆ—è¡¨ï¼Œè€Œç”¨çš„ç»„ä»¶æ˜¯ <code>User</code>ã€‚</p>
<h3 id="key-key-key"><a href="#key-key-key" class="headerlink" title="key! key! key!"></a>key! key! key!</h3><p>ç°åœ¨ä»£ç è¿ä½œæ­£å¸¸ï¼Œå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ã€‚æ‰“å¼€æ§åˆ¶å°çœ‹çœ‹ï¼š</p>
<img src="../images/image-20200314144605558.png" alt="image-20200314144605558" style="zoom:200%;" />

<p>React.js æŠ¥é”™äº†ã€‚å¦‚æœéœ€è¦è¯¦ç»†è§£é‡Šè¿™é‡ŒæŠ¥é”™çš„åŸå› ï¼Œä¼°è®¡è¦å•ç‹¬å†™åŠæœ¬ä¹¦ã€‚ä½†å¯ä»¥ç®€å•è§£é‡Šä¸€ä¸‹ã€‚</p>
<p>React.js çš„æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œå®ƒé«˜æ•ˆä¾èµ–äºæ‰€è°“çš„ Virtual-DOM ç­–ç•¥ã€‚ç®€å•æ¥è¯´ï¼Œèƒ½å¤ç”¨çš„è¯ React.js å°±ä¼šå°½é‡å¤ç”¨ï¼Œæ²¡æœ‰å¿…è¦çš„è¯ç»å¯¹ä¸ç¢° DOMã€‚å¯¹äºåˆ—è¡¨å…ƒç´ æ¥è¯´ä¹Ÿæ˜¯è¿™æ ·ï¼Œä½†æ˜¯å¤„ç†åˆ—è¡¨å…ƒç´ çš„å¤ç”¨æ€§ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå…ƒç´ å¯èƒ½ä¼šåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ”¹å˜ä½ç½®ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;a&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div&gt;b&lt;/</span>div&gt;</span><br><span class="line">&lt;div&gt;c&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>å‡è®¾é¡µé¢ä¸Šæœ‰è¿™ä¹ˆ3ä¸ªåˆ—è¡¨å…ƒç´ ï¼Œç°åœ¨æ”¹å˜ä¸€ä¸‹ä½ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;a&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div&gt;c&lt;/</span>div&gt;</span><br><span class="line">&lt;div&gt;b&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>c</code> å’Œ <code>b</code> çš„ä½ç½®äº’æ¢äº†ã€‚ä½†å…¶å® React.js åªéœ€è¦äº¤æ¢ä¸€ä¸‹ DOM ä½ç½®å°±è¡Œäº†ï¼Œä½†æ˜¯å®ƒå¹¶ä¸çŸ¥é“å…¶å®æˆ‘ä»¬åªæ˜¯æ”¹å˜äº†å…ƒç´ çš„ä½ç½®ï¼Œæ‰€ä»¥å®ƒä¼šé‡æ–°æ¸²æŸ“åé¢ä¸¤ä¸ªå…ƒç´ ï¼ˆå†æ‰§è¡Œ Virtual-DOM ç­–ç•¥ï¼‰ï¼Œè¿™æ ·ä¼šå¤§å¤§å¢åŠ  DOM æ“ä½œã€‚ä½†å¦‚æœç»™æ¯ä¸ªå…ƒç´ åŠ ä¸Šå”¯ä¸€çš„æ ‡è¯†ï¼ŒReact.js å°±å¯ä»¥çŸ¥é“è¿™ä¸¤ä¸ªå…ƒç´ åªæ˜¯äº¤æ¢äº†ä½ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div key=<span class="string">'a'</span>&gt;a&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div key='b'&gt;b&lt;/</span>div&gt;</span><br><span class="line">&lt;div key=<span class="string">'c'</span>&gt;c&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ · React.js å°±ç®€å•çš„é€šè¿‡ <code>key</code> æ¥åˆ¤æ–­å‡ºæ¥ï¼Œè¿™ä¸¤ä¸ªåˆ—è¡¨å…ƒç´ åªæ˜¯äº¤æ¢äº†ä½ç½®ï¼Œå¯ä»¥å°½é‡å¤ç”¨å…ƒç´ å†…éƒ¨çš„ç»“æ„ã€‚</p>
<p>è¿™é‡Œæ²¡å¬æ‡‚æ²¡æœ‰å…³ç³»ï¼Œåé¢æœ‰æœºä¼šä¼šç»§ç»­è®²è§£è¿™éƒ¨åˆ†å†…å®¹ã€‚ç°åœ¨åªéœ€è¦è®°ä½ä¸€ä¸ªç®€å•çš„è§„åˆ™ï¼š<em>å¯¹äºç”¨è¡¨è¾¾å¼å¥—æ•°ç»„ç½—åˆ—åˆ°é¡µé¢ä¸Šçš„å…ƒç´ ï¼Œéƒ½è¦ä¸ºæ¯ä¸ªå…ƒç´ åŠ ä¸Š <code>key</code> å±æ€§ï¼Œè¿™ä¸ª <code>key</code> å¿…é¡»æ˜¯æ¯ä¸ªå…ƒç´ å”¯ä¸€çš„æ ‡è¯†</em>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ<code>key</code> çš„å€¼å¯ä»¥ç›´æ¥åå°æ•°æ®è¿”å›çš„ <code>id</code>ï¼Œå› ä¸ºåå°çš„ <code>id</code> éƒ½æ˜¯å”¯ä¸€çš„ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­å½“ä¸­ï¼Œæ¯ä¸ª <code>user</code> æ²¡æœ‰ <code>id</code> å¯ä»¥ç”¨ï¼Œå¯ä»¥ç›´æ¥ç”¨å¾ªç¯è®¡æ•°å™¨ <code>i</code> ä½œä¸º <code>key</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;users.map(<span class="function">(<span class="params">user, i</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">User</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span> <span class="attr">user</span>=<span class="string">&#123;user&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">...</span></span><br></pre></td></tr></table></figure>

<p>å†çœ‹çœ‹ï¼Œæ§åˆ¶å°å·²ç»æ²¡æœ‰é”™è¯¯ä¿¡æ¯äº†ã€‚ä½†è¿™æ˜¯ä¸å¥½çš„åšæ³•ï¼Œè¿™åªæ˜¯æ©è€³ç›—é“ƒï¼ˆå…·ä½“åŸå› å¤§å®¶å¯ä»¥è‡ªå·±æ€è€ƒä¸€ä¸‹ï¼‰ã€‚è®°ä½ä¸€ç‚¹ï¼šåœ¨å®é™…é¡¹ç›®å½“ä¸­ï¼Œå¦‚æœä½ çš„æ•°æ®é¡ºåºå¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œæ ‡å‡†åšæ³•æ˜¯æœ€å¥½æ˜¯åå°æ•°æ®è¿”å›çš„ <code>id</code> ä½œä¸ºåˆ—è¡¨å…ƒç´ çš„ <code>key</code>ã€‚</p>
<h2 id="9ã€å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç†-â€”â€”-çŠ¶æ€æå‡"><a href="#9ã€å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç†-â€”â€”-çŠ¶æ€æå‡" class="headerlink" title="9ã€å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç† â€”â€” çŠ¶æ€æå‡"></a>9ã€å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç† â€”â€” çŠ¶æ€æå‡</h2><p>æˆ‘ä»¬åœ¨è®²è§£ JSX çš„ç« èŠ‚ä¸­æåˆ°ï¼Œä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line"> &lt;Header /&gt;, </span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ä¼šç¼–è¯‘æˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  React.createElement(Header, <span class="literal">null</span>), </span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>å…¶å®æˆ‘ä»¬æŠŠ <code>Header</code> ç»„ä»¶ä¼ ç»™äº† <code>React.createElement</code> å‡½æ•°ï¼ŒåˆæŠŠå‡½æ•°è¿”å›ç»“æœä¼ ç»™äº† <code>ReactDOM.render</code>ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•çŒœæƒ³ä¸€ä¸‹å®ƒä»¬ä¼šå¹²ä»€ä¹ˆäº‹æƒ…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// React.createElement ä¸­å®ä¾‹åŒ–ä¸€ä¸ª Header</span></span><br><span class="line"><span class="keyword">const</span> header = <span class="keyword">new</span> Header(props, children)</span><br><span class="line"><span class="comment">// React.createElement ä¸­è°ƒç”¨ header.render æ–¹æ³•æ¸²æŸ“ç»„ä»¶çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">const</span> headerJsxObject = header.render()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReactDOM ç”¨æ¸²æŸ“åçš„ JavaScript å¯¹è±¡æ¥æ¥æ„å»ºçœŸæ­£çš„ DOM å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> headerDOM = createDOMFromObject(headerJsxObject)</span><br><span class="line"><span class="comment">// ReactDOM æŠŠ DOM å…ƒç´ å¡åˆ°é¡µé¢ä¸Š</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'root'</span>).appendChild(headerDOM)</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¿‡ç¨‹å…¶å®å¾ˆç®€å•ï¼Œçœ‹ä»£ç å°±èƒ½ç†è§£ã€‚</p>
<p>æˆ‘ä»¬æŠŠ <em>React.js å°†ç»„ä»¶æ¸²æŸ“ï¼Œå¹¶ä¸”æ„é€  DOM å…ƒç´ ç„¶åå¡å…¥é¡µé¢çš„è¿‡ç¨‹ç§°ä¸ºç»„ä»¶çš„æŒ‚è½½</em>ï¼ˆè¿™ä¸ªå®šä¹‰è¯·å¥½å¥½è®°ä½ï¼‰ã€‚å…¶å® React.js å†…éƒ¨å¯¹å¾…æ¯ä¸ªç»„ä»¶éƒ½æœ‰è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–ç»„ä»¶ -&gt; æŒ‚è½½åˆ°é¡µé¢ä¸Šçš„è¿‡ç¨‹ã€‚æ‰€ä»¥ä½ å¯ä»¥ç†è§£ä¸€ä¸ªç»„ä»¶çš„æ–¹æ³•è°ƒç”¨æ˜¯è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-&gt; <span class="keyword">constructor</span>()</span><br><span class="line">-&gt; render()</span><br><span class="line">// ç„¶åæ„é€  DOM å…ƒç´ æ’å…¥é¡µé¢</span><br></pre></td></tr></table></figure>

<p>è¿™å½“ç„¶æ˜¯å¾ˆå¥½ç†è§£çš„ã€‚React.js ä¸ºäº†è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½çš„æŒæ§ç»„ä»¶çš„æŒ‚è½½è¿‡ç¨‹ï¼Œå¾€ä¸Šé¢æ’å…¥äº†ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-&gt; <span class="keyword">constructor</span>()</span><br><span class="line">-&gt; componentWillMount()</span><br><span class="line">-&gt; render()</span><br><span class="line">// ç„¶åæ„é€  DOM å…ƒç´ æ’å…¥é¡µé¢</span><br><span class="line">-&gt; componentDidMount()</span><br></pre></td></tr></table></figure>

<p><code>componentWillMount</code> å’Œ <code>componentDidMount</code> éƒ½æ˜¯å¯ä»¥åƒ <code>render</code> æ–¹æ³•ä¸€æ ·è‡ªå®šä¹‰åœ¨ç»„ä»¶çš„å†…éƒ¨ã€‚æŒ‚è½½çš„æ—¶å€™ï¼ŒReact.js ä¼šåœ¨ç»„ä»¶çš„ <code>render</code> ä¹‹å‰è°ƒç”¨ <code>componentWillMount</code>ï¼Œåœ¨ DOM å…ƒç´ å¡å…¥é¡µé¢ä»¥åè°ƒç”¨ <code>componentDidMount</code>ã€‚</p>
<p>æˆ‘ä»¬ç»™ <code>Header</code> ç»„ä»¶åŠ ä¸Šè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”æ‰“ä¸€äº› Logï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'construct'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillMount () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'component will mount'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'component did mount'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'render'</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1 className=<span class="string">'title'</span>&gt;React å°ä¹¦&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ§åˆ¶å°ä½ å¯ä»¥çœ‹åˆ°ä¾æ¬¡è¾“å‡ºï¼š</p>
<img src="../images/image-20200314145149375.png" alt="image-20200314145149375" style="zoom:200%;" />

<p>å¯ä»¥çœ‹åˆ°ï¼ŒReact.js ç¡®å®æŒ‰ç…§æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„é‚£æ ·è°ƒç”¨äº†å®šä¹‰çš„ä¸¤ä¸ªæ–¹æ³• <code>componentWillMount</code> å’Œ <code>componentDidMount</code>ã€‚</p>
<p>æœºçµçš„åŒå­¦å¯ä»¥æƒ³åˆ°ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ’å…¥é¡µé¢ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»é¡µé¢ä¸­åˆ é™¤ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-&gt; <span class="keyword">constructor</span>()</span><br><span class="line">-&gt; componentWillMount()</span><br><span class="line">-&gt; render()</span><br><span class="line">// ç„¶åæ„é€  DOM å…ƒç´ æ’å…¥é¡µé¢</span><br><span class="line">-&gt; componentDidMount()</span><br><span class="line">// ...</span><br><span class="line">// ä»é¡µé¢ä¸­åˆ é™¤</span><br></pre></td></tr></table></figure>

<p>React.js ä¹Ÿæ§åˆ¶äº†è¿™ä¸ªç»„ä»¶çš„åˆ é™¤è¿‡ç¨‹ã€‚åœ¨ç»„ä»¶åˆ é™¤ä¹‹å‰ React.js ä¼šè°ƒç”¨ç»„ä»¶å®šä¹‰çš„ <code>componentWillUnmount</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-&gt; <span class="keyword">constructor</span>()</span><br><span class="line">-&gt; componentWillMount()</span><br><span class="line">-&gt; render()</span><br><span class="line">// ç„¶åæ„é€  DOM å…ƒç´ æ’å…¥é¡µé¢</span><br><span class="line">-&gt; componentDidMount()</span><br><span class="line">// ...</span><br><span class="line">// å³å°†ä»é¡µé¢ä¸­åˆ é™¤</span><br><span class="line">-&gt; componentWillUnmount()</span><br><span class="line">// ä»é¡µé¢ä¸­åˆ é™¤</span><br></pre></td></tr></table></figure>

<p>çœ‹çœ‹ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŠŠç»„ä»¶ä»é¡µé¢ä¸­åˆ é™¤ï¼Œç»§ç»­ä½¿ç”¨ä¸Šé¢ä¾‹å­çš„ä»£ç ï¼Œæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ª <code>Index</code> ç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      isShowHeader: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleShowOrHide () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      isShowHeader: !<span class="keyword">this</span>.state.isShowHeader</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.isShowHeader ? <span class="xml"><span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span> : <span class="literal">null</span>&#125;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.handleShowOrHide.bind(<span class="keyword">this</span>)&#125;&gt;</span><br><span class="line">          æ˜¾ç¤ºæˆ–è€…éšè—æ ‡é¢˜</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Index /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><code>Index</code> ç»„ä»¶ä½¿ç”¨äº† <code>Header</code> ç»„ä»¶ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå¯ä»¥æ§åˆ¶ <code>Header</code> çš„æ˜¾ç¤ºæˆ–è€…éšè—ã€‚ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...a</span><br><span class="line">&#123;<span class="keyword">this</span>.state.isShowHeader ? <span class="xml"><span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span> : <span class="literal">null</span>&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ç›¸å½“äº <code>state.isShowHeader</code> ä¸º <code>true</code> çš„æ—¶å€™æŠŠ <code>Header</code> æ’å…¥é¡µé¢ï¼Œ<code>false</code> çš„æ—¶å€™æŠŠ <code>Header</code> ä»é¡µé¢ä¸Šåˆ é™¤ã€‚è¿™æ—¶å€™æˆ‘ä»¬ç»™ <code>Header</code> æ·»åŠ  <code>componentWillUnmount</code> æ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'component will unmount'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™ç‚¹å‡»é¡µé¢ä¸Šçš„æŒ‰é’®ï¼Œä½ ä¼šçœ‹åˆ°é¡µé¢çš„æ ‡é¢˜éšè—äº†ï¼Œå¹¶ä¸”æ§åˆ¶å°æ‰“å°å‡ºæ¥ä¸‹å›¾çš„æœ€åä¸€è¡Œï¼Œè¯´æ˜ <code>componentWillUnmount</code> ç¡®å®è¢« React.js æ‰€è°ƒç”¨äº†ï¼š</p>
<img src="../images/image-20200314145348052.png" alt="image-20200314145348052" style="zoom:200%;" />

<p>ä½ å¯ä»¥å¤šæ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œéšç€æŒ‰é’®çš„æ˜¾ç¤ºå’Œéšè—ï¼Œä¸Šé¢çš„å†…å®¹ä¼šæŒ‰é¡ºåºé‡å¤åœ°æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥ä½“ä¼šä¸€ä¸‹è¿™å‡ ä¸ªæ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹å’Œé¡ºåºã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>React.js å°†ç»„ä»¶æ¸²æŸ“ï¼Œå¹¶ä¸”æ„é€  DOM å…ƒç´ ç„¶åå¡å…¥é¡µé¢çš„è¿‡ç¨‹ç§°ä¸ºç»„ä»¶çš„æŒ‚è½½ã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬å­¦ä¹ äº† React.js æ§åˆ¶ç»„ä»¶åœ¨é¡µé¢ä¸ŠæŒ‚è½½å’Œåˆ é™¤è¿‡ç¨‹é‡Œé¢å‡ ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>componentWillMount</code>ï¼šç»„ä»¶æŒ‚è½½å¼€å§‹ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯åœ¨ç»„ä»¶è°ƒç”¨ <code>render</code> æ–¹æ³•ä¹‹å‰è°ƒç”¨ã€‚</li>
<li><code>componentDidMount</code>ï¼šç»„ä»¶æŒ‚è½½å®Œæˆä»¥åï¼Œä¹Ÿå°±æ˜¯ DOM å…ƒç´ å·²ç»æ’å…¥é¡µé¢åè°ƒç”¨ã€‚</li>
<li><code>componentWillUnmount</code>ï¼šç»„ä»¶å¯¹åº”çš„ DOM å…ƒç´ ä»é¡µé¢ä¸­åˆ é™¤ä¹‹å‰è°ƒç”¨ã€‚</li>
</ul>
<p>ä½†è¿™ä¸€èŠ‚å¹¶æ²¡æœ‰è®²è¿™å‡ ä¸ªæ–¹æ³•åˆ°åº•åœ¨å®é™…é¡¹ç›®å½“ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬é€šè¿‡ä¾‹å­æ¥è®²è§£ä¸€ä¸‹è¿™å‡ ä¸ªæ–¹æ³•çš„ç”¨é€”ã€‚</p>
<h2 id="10ã€æŒ‚è½½é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#10ã€æŒ‚è½½é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="10ã€æŒ‚è½½é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>10ã€æŒ‚è½½é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h2><p>è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹å¯¹äºä¸€ä¸ªç»„ä»¶æ¥è¯´ï¼Œ<code>constructor</code> ã€<code>componentWillMount</code>ã€<code>componentDidMount</code>ã€<code>componentWillUnmount</code> è¿™å‡ ä¸ªæ–¹æ³•åœ¨ä¸€ä¸ªç»„ä»¶çš„å‡ºç”Ÿåˆ°æ­»äº¡çš„è¿‡ç¨‹é‡Œé¢èµ·äº†ä»€ä¹ˆæ ·çš„ä½œç”¨ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ‰€æœ‰å…³äºç»„ä»¶è‡ªèº«çš„çŠ¶æ€çš„åˆå§‹åŒ–å·¥ä½œéƒ½ä¼šæ”¾åœ¨ <code>constructor</code> é‡Œé¢å»åšã€‚ä½ ä¼šå‘ç°æœ¬ä¹¦æ‰€æœ‰ç»„ä»¶çš„ <code>state</code> çš„åˆå§‹åŒ–å·¥ä½œéƒ½æ˜¯æ”¾åœ¨ <code>constructor</code> é‡Œé¢çš„ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨åœ¨åšä¸€ä¸ªæ—¶é’Ÿåº”ç”¨ï¼š</p>
<img src="../images/image-20200314145413595.png" alt="image-20200314145413595" style="zoom:200%;" />

<p>æˆ‘ä»¬ä¼šåœ¨ <code>constructor</code> é‡Œé¢åˆå§‹åŒ– <code>state.date</code>ï¼Œå½“ç„¶ç°åœ¨é¡µé¢è¿˜æ˜¯é™æ€çš„ï¼Œç­‰ä¸‹ä¸€ä¼šè®©æ—¶é—´åŠ¨èµ·æ¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      date: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;</span><br><span class="line">          &lt;p&gt;ç°åœ¨çš„æ—¶é—´æ˜¯&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">          &#123;this.state.date.toLocaleTimeString()&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>h1&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€äº›ç»„ä»¶å¯åŠ¨çš„åŠ¨ä½œï¼ŒåŒ…æ‹¬åƒ Ajax æ•°æ®çš„æ‹‰å–æ“ä½œã€ä¸€äº›å®šæ—¶å™¨çš„å¯åŠ¨ç­‰ï¼Œå°±å¯ä»¥æ”¾åœ¨ <code>componentWillMount</code> é‡Œé¢è¿›è¡Œï¼Œä¾‹å¦‚ Ajaxï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  componentWillMount () &#123;</span><br><span class="line">    ajax.get(<span class="string">'http://json-api.com/user'</span>, (userData) =&gt; &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; userData &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œé¢æ˜¯å®šæ—¶å™¨çš„å¯åŠ¨ï¼Œæˆ‘ä»¬ç»™ <code>Clock</code> å¯åŠ¨å®šæ—¶å™¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      date: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillMount () &#123;</span><br><span class="line">    <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; <span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>() &#125;)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨ <code>componentWillMount</code> ä¸­ç”¨ <code>setInterval</code> å¯åŠ¨äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼šæ¯éš” 1 ç§’æ›´æ–°ä¸­çš„ <code>state.date</code>ï¼Œè¿™æ ·é¡µé¢å°±å¯ä»¥åŠ¨èµ·æ¥äº†ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ª <code>Index</code> æŠŠå®ƒç”¨èµ·æ¥ï¼Œå¹¶ä¸”æ’å…¥é¡µé¢ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Clock /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;Index /</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>åƒä¸Šä¸€èŠ‚é‚£æ ·ï¼Œæˆ‘ä»¬ä¿®æ”¹è¿™ä¸ª <code>Index</code> è®©è¿™ä¸ªæ—¶é’Ÿå¯ä»¥éšè—æˆ–è€…æ˜¾ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">isShowClock</span>: <span class="literal">true</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleShowOrHide () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      isShowClock: !<span class="keyword">this</span>.state.isShowClock</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.isShowClock ? <span class="xml"><span class="tag">&lt;<span class="name">Clock</span> /&gt;</span></span> : <span class="literal">null</span> &#125;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.handleShowOrHide.bind(<span class="keyword">this</span>)&#125;&gt;</span><br><span class="line">          æ˜¾ç¤ºæˆ–éšè—æ—¶é’Ÿ</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨é¡µé¢ä¸Šæœ‰ä¸ªæŒ‰é’®å¯ä»¥æ˜¾ç¤ºæˆ–è€…éšè—æ—¶é’Ÿã€‚ä½ è¯•ä¸€ä¸‹æ˜¾ç¤ºæˆ–è€…éšè—æ—¶é’Ÿï¼Œè™½ç„¶é¡µé¢ä¸Šçœ‹èµ·æ¥åŠŸèƒ½éƒ½æ­£å¸¸ï¼Œåœ¨æ§åˆ¶å°ä½ ä¼šå‘ç°æŠ¥é”™äº†ï¼š</p>
<img src="../images/image-20200314145616845.png" alt="image-20200314145616845" style="zoom:200%;" />

<p>è¿™æ˜¯å› ä¸ºï¼Œ<em>å½“æ—¶é’Ÿéšè—çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ¸…é™¤å®šæ—¶å™¨</em>ã€‚æ—¶é’Ÿéšè—çš„æ—¶å€™ï¼Œå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°è¿˜åœ¨ä¸åœåœ°å°è¯• <code>setState</code>ï¼Œç”±äº <code>setState</code> åªèƒ½åœ¨å·²ç»æŒ‚è½½æˆ–è€…æ­£åœ¨æŒ‚è½½çš„ç»„ä»¶ä¸Šè°ƒç”¨ï¼Œæ‰€ä»¥ React.js å¼€å§‹ç–¯ç‹‚æŠ¥é”™ã€‚</p>
<p>å¤šæ¬¡çš„éšè—å’Œæ˜¾ç¤ºä¼šè®© React.js é‡æ–°æ„é€ å’Œé”€æ¯ <code>Clock</code> ç»„ä»¶ï¼Œæ¯æ¬¡æ„é€ éƒ½ä¼šé‡æ–°æ„å»ºä¸€ä¸ªå®šæ—¶å™¨ã€‚è€Œé”€æ¯ç»„ä»¶çš„æ—¶å€™æ²¡æœ‰æ¸…é™¤å®šæ—¶å™¨ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°æŠ¥é”™ä¼šè¶Šæ¥è¶Šå¤šã€‚è€Œä¸”å› ä¸º JavaScript çš„é—­åŒ…ç‰¹æ€§ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä¸¥é‡çš„å†…å­˜æ³„æ¼ã€‚</p>
<p>è¿™æ—¶å€™<code>componentWillUnmount</code> å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™ï¼Œåšè¿™ç§æ¸…åœºçš„å·¥ä½œã€‚ä¾‹å¦‚æ¸…é™¤è¯¥ç»„ä»¶çš„å®šæ—¶å™¨å’Œå…¶ä»–çš„æ•°æ®æ¸…ç†å·¥ä½œã€‚æˆ‘ä»¬ç»™ <code>Clock</code>æ·»åŠ  <code>componentWillUnmount</code>ï¼Œåœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™æ¸…é™¤è¯¥ç»„ä»¶çš„å®šæ—¶å™¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  componentWillUnmount () &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>.timer)</span><br><span class="line">  &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™å°±æ²¡æœ‰é”™è¯¯äº†ã€‚</p>
<h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠç»„ä»¶çš„ <code>state</code> çš„åˆå§‹åŒ–å·¥ä½œæ”¾åœ¨ <code>constructor</code> é‡Œé¢å»åšï¼›åœ¨ <code>componentWillMount</code> è¿›è¡Œç»„ä»¶çš„å¯åŠ¨å·¥ä½œï¼Œä¾‹å¦‚ Ajax æ•°æ®æ‹‰å–ã€å®šæ—¶å™¨çš„å¯åŠ¨ï¼›ç»„ä»¶ä»é¡µé¢ä¸Šé”€æ¯çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™éœ€è¦ä¸€äº›æ•°æ®çš„æ¸…ç†ï¼Œä¾‹å¦‚å®šæ—¶å™¨çš„æ¸…ç†ï¼Œå°±ä¼šæ”¾åœ¨ <code>componentWillUnmount</code> é‡Œé¢å»åšã€‚</p>
<p>è¯´ä¸€ä¸‹æœ¬èŠ‚æ²¡æœ‰æåˆ°çš„ <code>componentDidMount</code> ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰äº›ç»„ä»¶çš„å¯åŠ¨å·¥ä½œæ˜¯ä¾èµ– DOM çš„ï¼Œä¾‹å¦‚åŠ¨ç”»çš„å¯åŠ¨ï¼Œè€Œ <code>componentWillMount</code> çš„æ—¶å€™ç»„ä»¶è¿˜æ²¡æŒ‚è½½å®Œæˆï¼Œæ‰€ä»¥æ²¡æ³•è¿›è¡Œè¿™äº›å¯åŠ¨å·¥ä½œï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠè¿™äº›æ“ä½œæ”¾åœ¨ <code>componentDidMount</code> å½“ä¸­ã€‚<code>componentDidMount</code> çš„å…·ä½“ä½¿ç”¨æˆ‘ä»¬ä¼šåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚å½“ä¸­ç»“åˆ DOM æ¥è®²ã€‚</p>
<h2 id="11ã€æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#11ã€æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="11ã€æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>11ã€æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h2><p>ä»ä¹‹å‰çš„ç« èŠ‚æˆ‘ä»¬äº†è§£åˆ°ï¼Œç»„ä»¶çš„æŒ‚è½½æŒ‡çš„æ˜¯å°†ç»„ä»¶æ¸²æŸ“å¹¶ä¸”æ„é€  DOM å…ƒç´ ç„¶åæ’å…¥é¡µé¢çš„è¿‡ç¨‹ã€‚<em>è¿™æ˜¯ä¸€ä¸ªä»æ— åˆ°æœ‰çš„è¿‡ç¨‹</em>ï¼ŒReact.js æä¾›ä¸€äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯ä»¥ç»™æˆ‘ä»¬åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åšä¸€äº›æ“ä½œã€‚</p>
<p>é™¤äº†æŒ‚è½½é˜¶æ®µï¼Œè¿˜æœ‰ä¸€ç§â€œæ›´æ–°é˜¶æ®µâ€ã€‚è¯´ç™½äº†å°±æ˜¯ <code>setState</code> å¯¼è‡´ React.js é‡æ–°æ¸²æŸ“ç»„ä»¶å¹¶ä¸”æŠŠç»„ä»¶çš„å˜åŒ–åº”ç”¨åˆ° DOM å…ƒç´ ä¸Šçš„è¿‡ç¨‹ï¼Œ<em>è¿™æ˜¯ä¸€ä¸ªç»„ä»¶çš„å˜åŒ–è¿‡ç¨‹</em>ã€‚è€Œ React.js ä¹Ÿæä¾›äº†ä¸€ç³»åˆ—çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯ä»¥è®©æˆ‘ä»¬åœ¨è¿™ä¸ªç»„ä»¶æ›´æ–°çš„è¿‡ç¨‹æ‰§è¡Œä¸€äº›æ“ä½œã€‚</p>
<p>è¿™äº›ç”Ÿå‘½å‘¨æœŸåœ¨æ·±å…¥é¡¹ç›®å¼€å‘é˜¶æ®µæ˜¯éå¸¸é‡è¦çš„ã€‚è€Œè¦å®Œå…¨ç†è§£æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ä¸ªéœ€è¦ç»éªŒå’ŒçŸ¥è¯†ç§¯ç´¯çš„è¿‡ç¨‹ï¼Œä½ éœ€è¦å¯¹ Virtual-DOM ç­–ç•¥æœ‰æ¯”è¾ƒæ·±å…¥ç†è§£æ‰èƒ½å®Œå…¨æŒæ¡ï¼Œä½†è¿™è¶…å‡ºäº†æœ¬ä¹¦çš„ç›®çš„ã€‚<em>æœ¬ä¹¦çš„ç›®çš„æ˜¯ä¸ºäº†è®©å¤§å®¶å¿«é€ŸæŒæ¡ React.js æ ¸å¿ƒçš„æ¦‚å¿µï¼Œå¿«é€Ÿä¸Šæ‰‹é¡¹ç›®è¿›è¡Œå®æˆ˜</em>ã€‚æ‰€ä»¥å¯¹äºç»„ä»¶æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬ç®€å•æåŠå¹¶ä¸”æä¾›ä¸€äº›èµ„æ–™ç»™å¤§å®¶ã€‚</p>
<p>è¿™é‡Œä¸ºäº†çŸ¥è¯†çš„å®Œæ•´ï¼Œè¡¥å……å…³äºæ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼š</p>
<ol>
<li><code>shouldComponentUpdate(nextProps, nextState)</code>ï¼šä½ å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•æ§åˆ¶ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚å¦‚æœè¿”å› <code>false</code> ç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚è¿™ä¸ªç”Ÿå‘½å‘¨æœŸåœ¨ React.js æ€§èƒ½ä¼˜åŒ–ä¸Šéå¸¸æœ‰ç”¨ã€‚</li>
<li><code>componentWillReceiveProps(nextProps)</code>ï¼šç»„ä»¶ä»çˆ¶ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ <code>props</code> ä¹‹å‰è°ƒç”¨ã€‚</li>
<li><code>componentWillUpdate()</code>ï¼šç»„ä»¶å¼€å§‹é‡æ–°æ¸²æŸ“ä¹‹å‰è°ƒç”¨ã€‚</li>
<li><code>componentDidUpdate()</code>ï¼šç»„ä»¶é‡æ–°æ¸²æŸ“å¹¶ä¸”æŠŠæ›´æ”¹å˜æ›´åˆ°çœŸå®çš„ DOM ä»¥åè°ƒç”¨ã€‚</li>
</ol>
<p>å¤§å®¶å¯¹è¿™æ›´æ–°é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒæ„Ÿå…´è¶£çš„è¯å¯ä»¥æŸ¥çœ‹<a href="https://facebook.github.io/react/docs/react-component.html" target="_blank" rel="noopener">å®˜ç½‘æ–‡æ¡£</a>ã€‚</p>
<p><em>ä½†è¿™é‡Œå»ºè®®å¤§å®¶å¯ä»¥å…ˆç®€å•äº†è§£ React.js ç»„ä»¶æ˜¯æœ‰æ›´æ–°é˜¶æ®µçš„ï¼Œå¹¶ä¸”æœ‰è¿™ä¹ˆå‡ ä¸ªæ›´æ–°é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå³å¯</em>ã€‚ç„¶ååœ¨æ·±å…¥é¡¹ç›®å®æˆ˜çš„æ—¶å€™é€æ¸åœ°æŒæ¡ç†è§£ä»–ä»¬ï¼Œç°åœ¨å¹¶ä¸éœ€è¦å¯¹ä»–ä»¬æ”¾è¿‡å¤šçš„ç²¾åŠ›ã€‚</p>
<h2 id="12ã€ref-å’Œ-React-js-ä¸­çš„-DOM-æ“ä½œ"><a href="#12ã€ref-å’Œ-React-js-ä¸­çš„-DOM-æ“ä½œ" class="headerlink" title="12ã€ref å’Œ React.js ä¸­çš„ DOM æ“ä½œ"></a>12ã€ref å’Œ React.js ä¸­çš„ DOM æ“ä½œ</h2><p>åœ¨ React.js å½“ä¸­ä½ åŸºæœ¬ä¸éœ€è¦å’Œ DOM ç›´æ¥æ‰“äº¤é“ã€‚React.js æä¾›äº†ä¸€ç³»åˆ—çš„ on* æ–¹æ³•å¸®åŠ©æˆ‘ä»¬è¿›è¡Œäº‹ä»¶ç›‘å¬ï¼Œæ‰€ä»¥ React.js å½“ä¸­ä¸éœ€è¦ç›´æ¥è°ƒç”¨ addEventListener çš„ DOM APIï¼›ä»¥å‰æˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨ DOM æ“ä½œè¿›è¡Œé¡µé¢æ›´æ–°ï¼ˆä¾‹å¦‚å€ŸåŠ© jQueryï¼‰ï¼Œè€Œåœ¨ React.js å½“ä¸­å¯ä»¥ç›´æ¥é€šè¿‡ setState çš„æ–¹å¼é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œæ¸²æŸ“çš„æ—¶å€™å¯ä»¥æŠŠæ–°çš„ props ä¼ é€’ç»™å­ç»„ä»¶ï¼Œä»è€Œè¾¾åˆ°é¡µé¢æ›´æ–°çš„æ•ˆæœã€‚</p>
<p>React.js è¿™ç§é‡æ–°æ¸²æŸ“çš„æœºåˆ¶å¸®åŠ©æˆ‘ä»¬å…é™¤äº†ç»å¤§éƒ¨åˆ†çš„ DOM æ›´æ–°æ“ä½œï¼Œä¹Ÿè®©ç±»ä¼¼äº jQuery è¿™ç§ä»¥å°è£… DOM æ“ä½œä¸ºä¸»çš„ç¬¬ä¸‰æ–¹çš„åº“ä»æˆ‘ä»¬çš„å¼€å‘å·¥å…·é“¾ä¸­åˆ é™¤ã€‚</p>
<p>ä½†æ˜¯ React.js å¹¶ä¸èƒ½å®Œå…¨æ»¡è¶³æ‰€æœ‰ DOM æ“ä½œéœ€æ±‚ï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å’Œ DOM æ‰“äº¤é“ã€‚æ¯”å¦‚è¯´ä½ æƒ³è¿›å…¥é¡µé¢ä»¥åè‡ªåŠ¨ focus åˆ°æŸä¸ªè¾“å…¥æ¡†ï¼Œä½ éœ€è¦è°ƒç”¨ input.focus() çš„ DOM APIï¼Œæ¯”å¦‚è¯´ä½ æƒ³åŠ¨æ€è·å–æŸä¸ª DOM å…ƒç´ çš„å°ºå¯¸æ¥åšåç»­çš„åŠ¨ç”»ï¼Œç­‰ç­‰ã€‚</p>
<p>React.js å½“ä¸­æä¾›äº† ref å±æ€§æ¥å¸®åŠ©æˆ‘ä»¬è·å–å·²ç»æŒ‚è½½çš„å…ƒç´ çš„ DOM èŠ‚ç‚¹ï¼Œä½ å¯ä»¥ç»™æŸä¸ª JSX å…ƒç´ åŠ ä¸Š refå±æ€§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoFocusInput</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  componentDidMount () &#123;</span><br><span class="line">    <span class="keyword">this</span>.input.focus()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;input ref=&#123;(input) =&gt; <span class="keyword">this</span>.input = input&#125; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;AutoFocusInput /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç»™ input å…ƒç´ åŠ äº†ä¸€ä¸ª ref å±æ€§ï¼Œè¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å½“ input å…ƒç´ åœ¨é¡µé¢ä¸ŠæŒ‚è½½å®Œæˆä»¥åï¼ŒReact.js å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªæŒ‚è½½ä»¥åçš„ DOM èŠ‚ç‚¹ä¼ ç»™è¿™ä¸ªå‡½æ•°ã€‚åœ¨å‡½æ•°ä¸­æˆ‘ä»¬æŠŠè¿™ä¸ª DOM å…ƒç´ è®¾ç½®ä¸ºç»„ä»¶å®ä¾‹çš„ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·ä»¥åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ this.input è·å–åˆ°è¿™ä¸ª DOM å…ƒç´ ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ componentDidMount ä¸­ä½¿ç”¨è¿™ä¸ª DOM å…ƒç´ ï¼Œå¹¶ä¸”è°ƒç”¨ this.input.focus() çš„ DOM APIã€‚æ•´ä½“å°±è¾¾åˆ°äº†é¡µé¢åŠ è½½å®Œæˆå°±è‡ªåŠ¨ focus åˆ°è¾“å…¥æ¡†çš„åŠŸèƒ½ï¼ˆå¤§å®¶å¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬ç”¨ä¸Šäº† componentDidMount è¿™ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼‰ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç»™ä»»æ„ä»£è¡¨ HTML å…ƒç´ æ ‡ç­¾åŠ ä¸Š ref ä»è€Œè·å–åˆ°å®ƒ DOM å…ƒç´ ç„¶åè°ƒç”¨ DOM APIã€‚ä½†æ˜¯è®°ä½ä¸€ä¸ªåŸåˆ™ï¼šèƒ½ä¸ç”¨ ref å°±ä¸ç”¨ã€‚ç‰¹åˆ«æ˜¯è¦é¿å…ç”¨ ref æ¥åš React.js æœ¬æ¥å°±å¯ä»¥å¸®åŠ©ä½ åšåˆ°çš„é¡µé¢è‡ªåŠ¨æ›´æ–°çš„æ“ä½œå’Œäº‹ä»¶ç›‘å¬ã€‚å¤šä½™çš„ DOM æ“ä½œå…¶å®æ˜¯ä»£ç é‡Œé¢çš„â€œå™ªéŸ³â€ï¼Œä¸åˆ©äºæˆ‘ä»¬ç†è§£å’Œç»´æŠ¤ã€‚</p>
<p>é¡ºå¸¦ä¸€æçš„æ˜¯ï¼Œå…¶å®å¯ä»¥ç»™ç»„ä»¶æ ‡ç­¾ä¹ŸåŠ ä¸Š ref ï¼Œä¾‹å¦‚ï¼š</p>
<p>&lt;Clock ref={(clock) =&gt; this.clock = clock} /&gt;<br> è¿™æ ·ä½ è·å–åˆ°çš„æ˜¯è¿™ä¸ª Clock ç»„ä»¶åœ¨ React.js å†…éƒ¨åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä½†è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¸¸ç”¨çš„åšæ³•ï¼Œè€Œä¸”ä¹Ÿå¹¶ä¸å»ºè®®è¿™ä¹ˆåšï¼Œæ‰€ä»¥è¿™é‡Œå°±ç®€å•æåŠï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·±å­¦ä¹ æ¢ç´¢ã€‚</p>
<h2 id="13ã€props-children-å’Œå®¹å™¨ç±»ç»„ä»¶"><a href="#13ã€props-children-å’Œå®¹å™¨ç±»ç»„ä»¶" class="headerlink" title="13ã€props.children å’Œå®¹å™¨ç±»ç»„ä»¶"></a>13ã€props.children å’Œå®¹å™¨ç±»ç»„ä»¶</h2><p>æœ‰ä¸€ç±»ç»„ä»¶ï¼Œå……å½“äº†å®¹å™¨çš„ä½œç”¨ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§å¤–å±‚ç»“æ„å½¢å¼ï¼Œç„¶åä½ å¯ä»¥å¾€é‡Œé¢å¡ä»»æ„çš„å†…å®¹ã€‚è¿™ç§ç»“æ„åœ¨å®é™…å½“ä¸­éå¸¸å¸¸è§ï¼Œä¾‹å¦‚è¿™ç§å¸¦å¡ç‰‡ç»„ä»¶ï¼š</p>
<p>ç»„ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªä¸å¸¦ä»»ä½•å†…å®¹çš„æ–¹å½¢çš„å®¹å™¨ï¼Œæˆ‘å¯ä»¥åœ¨ç”¨è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ç»™å®ƒä¼ å…¥ä»»æ„å†…å®¹ï¼š</p>
<p>åŸºäºæˆ‘ä»¬ç›®å‰çš„çŸ¥è¯†å‚¨å¤‡ï¼Œå¯ä»¥è¿…é€Ÿå†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Card</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">'card'</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">'card-content'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.content&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Card content=&#123;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;React.js å°ä¹¦&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">       &lt;div&gt;å¼€æºã€å…è´¹ã€ä¸“ä¸šã€ç®€å•&lt;/</span>div&gt;</span><br><span class="line">      è®¢é˜…ï¼š&lt;input /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &#125; /</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬é€šè¿‡ç»™ <code>Card</code> ç»„ä»¶ä¼ å…¥ä¸€ä¸ª <code>content</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ä¼ å…¥ä»»æ„çš„ JSX ç»“æ„ã€‚ç„¶ååœ¨ <code>Card</code> å†…éƒ¨ä¼šé€šè¿‡ <code>{this.props.content}</code> æŠŠå†…å®¹æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p>
<p>è¿™æ ·æ˜æ˜¾å¤ªä¸‘äº†ï¼Œå¦‚æœ <code>Card</code> é™¤äº† <code>content</code> ä»¥å¤–è¿˜èƒ½ä¼ å…¥å…¶ä»–å±æ€§çš„è¯ï¼Œé‚£ä¹ˆè¿™äº› JSX å’Œå…¶ä»–å±æ€§å°±ä¼šæ··åœ¨ä¸€èµ·ã€‚å¾ˆä¸å¥½ç»´æŠ¤ï¼Œå¦‚æœèƒ½åƒä¸‹é¢çš„ä»£ç é‚£æ ·ä½¿ç”¨ <code>Card</code> é‚£æƒ³å¿…ä¹Ÿæ˜¯æå¥½çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Card&gt;</span><br><span class="line">    &lt;h2&gt;React.js å°ä¹¦&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div&gt;å¼€æºã€å…è´¹ã€ä¸“ä¸šã€ç®€å•&lt;/</span>div&gt;</span><br><span class="line">    è®¢é˜…ï¼š&lt;input /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Card&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById('root')</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœç»„ä»¶æ ‡ç­¾ä¹Ÿèƒ½åƒæ™®é€šçš„ HTML æ ‡ç­¾é‚£æ ·ç¼–å†™å†…åµŒçš„ç»“æ„ï¼Œé‚£ä¹ˆå°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚å®é™…ä¸Šï¼ŒReact.js é»˜è®¤å°±æ”¯æŒè¿™ç§å†™æ³•ï¼Œæ‰€æœ‰åµŒå¥—åœ¨ç»„ä»¶ä¸­çš„ JSX ç»“æ„éƒ½å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨é€šè¿‡ <code>props.children</code> è·å–åˆ°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Card</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">'card'</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">'card-content'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.children&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠŠ <code>props.children</code> æ‰“å°å‡ºæ¥ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒå…¶å®æ˜¯ä¸ªæ•°ç»„ï¼š</p>
<img src="../images/image-20200314145828931.png" alt="image-20200314145828931" style="zoom:200%;" />

<p>React.js å°±æ˜¯æŠŠæˆ‘ä»¬åµŒå¥—çš„ JSX å…ƒç´ ä¸€ä¸ªä¸ªéƒ½æ”¾åˆ°æ•°ç»„å½“ä¸­ï¼Œç„¶åé€šè¿‡ <code>props.children</code> ä¼ ç»™äº† <code>Card</code>ã€‚</p>
<p>ç”±äº JSX ä¼šæŠŠæ’å…¥è¡¨è¾¾å¼é‡Œé¢æ•°ç»„ä¸­çš„ JSX ä¸€ä¸ªä¸ªç½—åˆ—ä¸‹æ¥æ˜¾ç¤ºã€‚æ‰€ä»¥å…¶å®å°±ç›¸å½“äºåœ¨ <code>Card</code> ä¸­åµŒå¥—äº†ä»€ä¹ˆ JSX ç»“æ„ï¼Œéƒ½ä¼šæ˜¾ç¤ºåœ¨ <code>Card</code> çš„ç±»åä¸º <code>card-content</code> çš„ <code>div</code> å…ƒç´ å½“ä¸­ã€‚</p>
<p>è¿™ç§åµŒå¥—çš„å†…å®¹æˆä¸ºäº† <code>props.children</code> æ•°ç»„çš„æœºåˆ¶ä½¿å¾—æˆ‘ä»¬ç¼–å†™ç»„ä»¶å˜å¾—éå¸¸çš„çµæ´»ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨æŠŠæ•°ç»„ä¸­çš„ JSX å…ƒç´ å®‰ç½®åœ¨ä¸åŒçš„åœ°æ–¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Layout</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">'two-cols-layout'</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">'sidebar'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.children[<span class="number">0</span>]&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div className='main'&gt;</span></span><br><span class="line"><span class="regexp">          &#123;this.props.children[1]&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªä¸¤åˆ—å¸ƒå±€ç»„ä»¶ï¼ŒåµŒå¥—çš„ JSX çš„ç¬¬ä¸€ä¸ªç»“æ„ä¼šæˆä¸ºä¾§è¾¹æ ï¼Œç¬¬äºŒä¸ªç»“æ„ä¼šæˆä¸ºå†…å®¹æ ï¼Œå…¶ä½™çš„ç»“æ„éƒ½ä¼šè¢«å¿½ç•¥ã€‚è¿™æ ·é€šè¿‡è¿™ä¸ªå¸ƒå±€ç»„ä»¶ï¼Œå°±å¯ä»¥åœ¨å„ä¸ªåœ°æ–¹é«˜åº¦å¤ç”¨æˆ‘ä»¬çš„å¸ƒå±€ã€‚</p>
<h3 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å…¶ä¸­åµŒå¥— JSX ç»“æ„ã€‚åµŒå¥—çš„ç»“æ„åœ¨ç»„ä»¶å†…éƒ¨éƒ½å¯ä»¥é€šè¿‡ <code>props.children</code> è·å–åˆ°ï¼Œè¿™ç§ç»„ä»¶ç¼–å†™æ–¹å¼åœ¨ç¼–å†™å®¹å™¨ç±»å‹çš„ç»„ä»¶å½“ä¸­éå¸¸æœ‰ç”¨ã€‚è€Œåœ¨å®é™…çš„ React.js é¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ¯å¤©éƒ½éœ€è¦ç”¨è¿™ç§æ–¹å¼æ¥ç¼–å†™ç»„ä»¶ã€‚</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/React/" rel="tag"># React</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/03/14/google%E6%8A%80%E6%9C%AF%E5%86%99%E4%BD%9C/" rel="prev" title="googleæŠ€æœ¯å†™ä½œ">
      <i class="fa fa-chevron-left"></i> googleæŠ€æœ¯å†™ä½œ
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/03/15/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%87%BA%E7%8E%B0%E5%8D%B1%E6%9C%BA%E9%83%BD%E8%A6%81%E5%90%AF%E5%8A%A8%E5%A4%A7%E5%9F%BA%E5%BB%BA/" rel="next" title="ä¸ºä»€ä¹ˆå‡ºç°å±æœºéƒ½è¦å¯åŠ¨å¤§åŸºå»º">
      ä¸ºä»€ä¹ˆå‡ºç°å±æœºéƒ½è¦å¯åŠ¨å¤§åŸºå»º <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1ã€ä»€ä¹ˆæ˜¯react"><span class="nav-number">1.</span> <span class="nav-text">1ã€ä»€ä¹ˆæ˜¯react</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2ã€ç†è§£JSX"><span class="nav-number">2.</span> <span class="nav-text">2ã€ç†è§£JSX</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3ã€ç»„ä»¶çš„ç»„åˆã€åµŒå¥—å’Œç»„ä»¶æ ‘"><span class="nav-number">3.</span> <span class="nav-text">3ã€ç»„ä»¶çš„ç»„åˆã€åµŒå¥—å’Œç»„ä»¶æ ‘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4ã€äº‹ä»¶ç›‘å¬"><span class="nav-number">4.</span> <span class="nav-text">4ã€äº‹ä»¶ç›‘å¬</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5ã€ç»„ä»¶çš„-state-å’Œ-setState"><span class="nav-number">5.</span> <span class="nav-text">5ã€ç»„ä»¶çš„ state å’Œ setState</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6ã€é…ç½®ç»„ä»¶çš„-props"><span class="nav-number">6.</span> <span class="nav-text">6ã€é…ç½®ç»„ä»¶çš„ props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7ã€state-vs-props"><span class="nav-number">7.</span> <span class="nav-text">7ã€state vs props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8ã€æ¸²æŸ“åˆ—è¡¨æ•°æ®"><span class="nav-number">8.</span> <span class="nav-text">8ã€æ¸²æŸ“åˆ—è¡¨æ•°æ®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¸²æŸ“å­˜æ”¾-JSX-å…ƒç´ çš„æ•°ç»„"><span class="nav-number">8.1.</span> <span class="nav-text">æ¸²æŸ“å­˜æ”¾ JSX å…ƒç´ çš„æ•°ç»„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨-map-æ¸²æŸ“åˆ—è¡¨æ•°æ®"><span class="nav-number">8.2.</span> <span class="nav-text">ä½¿ç”¨ map æ¸²æŸ“åˆ—è¡¨æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#key-key-key"><span class="nav-number">8.3.</span> <span class="nav-text">key! key! key!</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9ã€å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç†-â€”â€”-çŠ¶æ€æå‡"><span class="nav-number">9.</span> <span class="nav-text">9ã€å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç† â€”â€” çŠ¶æ€æå‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">9.1.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10ã€æŒ‚è½½é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><span class="nav-number">10.</span> <span class="nav-text">10ã€æŒ‚è½½é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ€»ç»“-1"><span class="nav-number">10.1.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11ã€æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><span class="nav-number">11.</span> <span class="nav-text">11ã€æ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12ã€ref-å’Œ-React-js-ä¸­çš„-DOM-æ“ä½œ"><span class="nav-number">12.</span> <span class="nav-text">12ã€ref å’Œ React.js ä¸­çš„ DOM æ“ä½œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13ã€props-children-å’Œå®¹å™¨ç±»ç»„ä»¶"><span class="nav-number">13.</span> <span class="nav-text">13ã€props.children å’Œå®¹å™¨ç±»ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ€»ç»“-2"><span class="nav-number">13.1.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1436668936&auto=0&height=66"></iframe>
      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Yuanchen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">170</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">63</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuanchen</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme â€“ <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0
  </div>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
