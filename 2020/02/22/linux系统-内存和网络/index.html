<!DOCTYPE html>


<html lang="en">
	

		<head>
			<meta charset="utf-8" />
			 
			<meta name="keywords" content="life,think,work,blog,code" />
			 
			<meta name="description" content="a place holder" />
			
			<meta
				name="viewport"
				content="width=device-width, initial-scale=1, maximum-scale=1"
			/>
			<meta
				name="google-site-verification"
				content="Xe5wkkWgdmMwA81kCWOHLlJSlYSRE47NKPlVzl8ynK8"
			/>
			<title>linux系统_内存和网络 |  Blog</title>
  <meta name="generator" content="hexo-theme-ayer">
			
			<link rel="shortcut icon" href="/favicon.ico" />
			 
<link rel="stylesheet" href="/dist/main.css">

			<link
				rel="stylesheet"
				href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
			/>
			
<link rel="stylesheet" href="/css/custom.css">
 
			<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
			 
 

		<link rel="alternate" href="/atom.xml" title="Blog" type="application/atom+xml">
</head>
	</html>
</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-linux系统-内存和网络"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  linux系统_内存和网络
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/02/22/linux%E7%B3%BB%E7%BB%9F-%E5%86%85%E5%AD%98%E5%92%8C%E7%BD%91%E7%BB%9C/" class="article-date">
  <time datetime="2020-02-23T02:36:14.000Z" itemprop="datePublished">2020-02-22</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">4.3k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">16 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <ul>
<li><strong>系统底层相关</strong>。 主要是以 Linux 系统为主，其中有大量的文章可以让你学习到 Linux 内核，以及内存、网络、异步 I/O 模型、Lock-free 的无锁编程，还有其它和系统底层相关的东西。注意，系统底层要是深下去是可以完全不见底的。而且内存方面的知识也是比较多的，所以，这里还是主要给出一些非常有价值的基础性的知识和技术。学好这些东西，你会对系统有很深的理解，而且可以把这些知识反哺到架构设计上来。</li>
<li><strong>数据库相关</strong>。数据库方面主要是 MySQL 和各种开源 NoSQL 的一些相关的有价值的文章和导读，主要是让你对这些数据库的内在有一定的了解，但又不会太深。真正的深入是需要扎入到源代码中的。需要说明的是，这块技术不是长项，但又是每个架构师需要知道的，所以，在这里给的学习资源可能会比较浅，这点还希望你来补充和指正。</li>
<li><strong>分布式架构</strong>。这一部分是最长最多的。其中有架构入门、分布式理论中各种非常有价值的经典论文，然后是一些分布式工程设计方面的文章，其中包括设计模式和工程应用，最后还有各大公司的架构供参考。</li>
<li><strong>微服务</strong>。有了分布式架构理论和工程的基础，接下来是对微服务的学习。在这部分内容中，罗列几个介绍微服务架构非常系统的文章，然后比较一下微服务和 SOA 的差别，最后则是一些工程实践和最佳实践。</li>
<li><strong>容器化和自动化运维</strong>。在容器化和自动化运维中，主要是学习 Docker 和 Kubernetes 这两个自动化运维的杀手型技术。而不是 Salt、Puppet、Chef 和 Ansible 这样比较传统的工具。原因很简单，因为自动化部署根本不够，还需要对环境和运行时的管理和运维才够，而只有 Docker 和 Kubernetes 才是未来。所以，这里重点让你学习这两个技术，其中有很多文章需要一些系统底层的知识。</li>
<li><strong>机器学习和人工智能</strong>。主要给了一些基础性的知识，其中包括基本原理、图书、课程、文章和相关的算法。顺着这路走，不能说能成为一个人工智能专家，但成为一个机器学习的高级工程师甚至准专家还是可能的。</li>
<li><strong>前端开发</strong>。这里的前端主要是 H5 的前端了，这一节会带你学习一下前端开发所需要知道的基础知识，尤其是对前端开发语言 JavaScript 的学习，花费了相当的篇幅列出了很多很经典的学习资料，必定会让你成为一个 JavaScript 高手。然后你还需要了解浏览器是怎样工作的，还有相关的网络协议和一些性能优化的技巧。最后则是 JavaScript 框架的学习，这里只给了 React.js 和 Vue.js，并通过 React.js 带出来函数式编程的学习。后端程序员给出来的这组前端开发的学习资料和路径会比前端程序员更靠谱一些。</li>
<li><strong>信息源</strong>。最后，则是一些信息源，其中包括各大公司的技术 Blog，还有相关的论文集散地。</li>
</ul>
<p>另外，这里需要说明几点。</p>
<ul>
<li>假设你在前面已经打下了非常扎实的基础，但是要成为一个高手，基础知识只是一个地基，你还需要很多更为具体的技术。对很多人来说，就是看各种各样的文章、手册、论文、分享…… <strong>其实，学习到一定程度，就是要从书本中走出去，到社区里和大家一起学习，而且还需要自己找食吃了。所以，对于这里面的文章，有很多都是在罗列各种文章和资源，只是为你梳理信息源，而不是喂你吃饭。</strong></li>
<li><strong>老实说，已经为你梳理并过滤掉了很多的信息，这里只留下了 30% 觉得最经济也最有价值的信息</strong>。虽然对于不同定位和不同需求的人还可以再对这些信息进行删减，但是这么一做就会对其它人不公平了。所以，这也是最小数量集的信息和资源吧。<strong>你也可以把这里的东西当成一个索引来对待</strong>。</li>
<li>这些内容，不能说是隔离开来的，应该说是相辅相成的。也没什么顺序，可以各取所需。虽然看上去内容很多，但你也别害怕，真的不用害怕，你会越学越快，越实践越有感觉，也越有效率。在一开始可能会很慢，但是坚持住，积累一段时间后就会越来越快的。 而且，绝大多数人是坚持不下来的。只要你能坚持下来，你一定会成为各个大公司的抢手货。<strong>你不需要特别努力，只需要日进一步，3-5 年后，你就会发现，绝大多数人都在你身后很远的地方了。</strong></li>
</ul>
<p>今天分享的内容为系统底层知识中的 Linux 系统、内存和网络等方面的相关知识及推荐的学习资料。</p>
<h1 id="Linux-系统相关"><a href="#Linux-系统相关" class="headerlink" title="Linux 系统相关"></a>Linux 系统相关</h1><p>学习 Linux 操作系统的原理是通向系统工程师的必经之路。Unix/Linux 操作系统里的东西并不难学。你千万不要一下子扎到源代码里去，那样没用——你还是要在上层先通过读一些不错的文档来学习。下面罗列了一些很不错的站点，其中有很多内容供你去钻研和探索。</p>
<p>在这里默认你前面已经读过并读懂了推荐的那些和 Unix/Linux 相关的图书了。所以，相信你对 Unix/Linux 下的编程已经是有一些基础了，因此，你继续深挖 Linux 下的这些知识应该也不是很难的事了。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/?version=7">Red Hat Enterprise Linux 文档</a> 。Red Hat Enterprise Linux（RHEL）是老牌 Linux 厂商 Red Hat 出品的面向商业的 Linux 发行版。Red Hat 网站上的这个文档中有很多很有价值的内容，值得一看。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/0xAX/linux-insides">Linux Insides</a> ，GitHub 上的一个开源电子书，其中讲述了 Linux 内核是怎样启动、初始化以及进行管理的。</li>
<li><a target="_blank" rel="noopener" href="http://lwn.net/Kernel/Index/">LWN’s kernel page</a> ，上面有很多非常不错的文章来解释 Linux 内核的一些东西。</li>
<li><a target="_blank" rel="noopener" href="http://learnlinuxconcepts.blogspot.com/2014/10/this-blog-is-to-help-those-students-and.html">Learn Linux Kernel from Android Perspective</a> ，从 Android 的角度来学习 Linux 内核，这个站点上的 Blog 相对于前面的比较简单易读一些。</li>
<li><a target="_blank" rel="noopener" href="https://www.kernel.org/doc/">Linux Kernel Doc</a>， Linux 的内核文档也可以浏览一下。</li>
<li><a target="_blank" rel="noopener" href="http://planet.kernel.org/">Kernel Planet</a> ，Linux 内核开发者的 Blog，有很多很不错的文章和想法。</li>
<li><a target="_blank" rel="noopener" href="https://lenovopress.com/redp4285.pdf">Linux Performance and Tuning Guidelines</a> ，这是 IBM 出的红皮书，虽然有点老了，但还是非常值得一读的。</li>
<li><a target="_blank" rel="noopener" href="http://tldp.org/LDP/tlk/tlk.html">TLK: The Linux Kernel</a> ，这是一本相对比较老的书了，Linux 内核版本为 2.0.33，但了解一下前人的思路，也是很有帮助的。</li>
<li><a target="_blank" rel="noopener" href="http://www.brendangregg.com/linuxperf.html">Linux Performance</a> ，这个网站上提供了和 Linux 系统性能相关的各种工具和文章收集，非常不错。</li>
<li><a target="_blank" rel="noopener" href="https://blogs.dropbox.com/tech/2017/09/optimizing-web-servers-for-high-throughput-and-low-latency/">Optimizing web servers for high throughput and low latency</a> ，这是一篇非常底层的系统调优的文章，来自 DropBox，从中你可以学到很多底层的性能调优的经验和知识。</li>
</ul>
<h1 id="内存相关"><a href="#内存相关" class="headerlink" title="内存相关"></a>内存相关</h1><p>计算机内存管理是每一个底层程序员需要了解的非常重要的事儿。当然，这里重点还是 Linux 操作系统相关的内存管理上的知识。</p>
<p>首先，LWN.net 上有一系列的 “<strong>What every programmer should know about memory</strong>” 文章你需要读一下。当然，你可以直接访问一个完整的 <a target="_blank" rel="noopener" href="http://futuretech.blinkenlights.nl/misc/cpumemory.pdf">PDF 文档</a>。下面是这个系列文章的网页版列表。读完这个列表的内容，你基本上就对内存有了一个比较好的知识体系了。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://lwn.net/Articles/250967/">Part 1: Introduction</a> ，中译版为 “<a target="_blank" rel="noopener" href="https://www.oschina.net/translate/what-every-programmer-should-know-about-memory-part1">每个程序员都应该了解的内存知识【第一部分】</a>”</li>
<li><a target="_blank" rel="noopener" href="https://lwn.net/Articles/252125/">Part 2: CPU caches</a></li>
<li><a target="_blank" rel="noopener" href="http://lwn.net/Articles/253361/">Part 3 (Virtual memory)</a></li>
<li><a target="_blank" rel="noopener" href="http://lwn.net/Articles/254445/">Part 4 (NUMA systems)</a></li>
<li><a target="_blank" rel="noopener" href="http://lwn.net/Articles/255364/">Part 5 (What programmers can do - cache optimization)</a></li>
<li><a target="_blank" rel="noopener" href="http://lwn.net/Articles/256433/">Part 6 (What programmers can do - multi-threaded optimizations)</a></li>
<li><a target="_blank" rel="noopener" href="http://lwn.net/Articles/257209/">Part 7 (Memory performance tools)</a></li>
<li><a target="_blank" rel="noopener" href="https://lwn.net/Articles/258154/">Part 8 (Future technologies)</a></li>
<li><a target="_blank" rel="noopener" href="https://lwn.net/Articles/258188/">Part 9 (Appendices and bibliography)</a></li>
</ul>
<p>然后是几篇和内存相关的论文。下面这三篇论文是个人觉得能对你非常有帮助的文章，尤其是你要做一些程序的性能优化方面。</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://irl.cs.ucla.edu/~yingdi/web/paperreading/whymb.2010.06.07c.pdf">Memory Barriers: a Hardware View for Software Hackers</a>。内存的读写屏障是线程并发访问共享的内存数据时，从程序本身、编译器到 CPU 都必须遵循的一个规范。有了这个规范，才能保证访问共享的内存数据时，一个线程对该数据的更新能被另一个线程以正确的顺序感知到。在 SMP（对称多处理）这种类型的多处理器系统（包括多核系统）上，这种读写屏障还包含了复杂的缓存一致性策略。这篇文章做了详细解释。</li>
<li><a target="_blank" rel="noopener" href="http://www.cl.cam.ac.uk/~pes20/ppc-supplemental/test7.pdf">A Tutorial Introduction to the ARM and POWER Relaxed Memory Models</a>，对 ARM 和 POWER 的宽松内存模型的一个教程式的简介。本篇文章的焦点是 ARM 和 POWER 体系结构下多处理器系统内存并发访问一致性的设计思路和使用方法。与支持较强的 TSO 模型的 x86 体系结构不同，ARM 和 POWER 这两种体系结构出于对功耗和性能的考虑，使用了一种更为宽松的内存模型。本文详细讨论了 ARM 和 POWER 的模型。</li>
<li><a target="_blank" rel="noopener" href="http://www.cl.cam.ac.uk/~pes20/weakmemory/cacm.pdf">x86-TSO: A Rigorous and Usable Programmer’s Model for x86 Multiprocessors</a>，介绍 x86 的多处理器内存并发访问的一致性模型 TSO。</li>
</ul>
<p>接下来是开发者最关心的内存管理方面的 lib 库。通常来说，有三种内存分配管理模块。就目前而言，BSD 的 jemalloc 有很大的影响力。后面可以看到不同公司的实践性文章。</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.malloc.de/en/">ptmalloc</a> 是 glibc 的内存分配管理。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/gperftools/gperftools">tcmalloc</a> 是 Google 的内存分配管理模块，全称是 Thread-Caching malloc，基本上来说比 glibc 的 ptmalloc 快两倍以上。</li>
<li><a target="_blank" rel="noopener" href="http://jemalloc.net/">jemalloc</a> 是 BSD 提供的内存分配管理。其论文为 <a target="_blank" rel="noopener" href="https://people.freebsd.org/~jasone/jemalloc/bsdcan2006/jemalloc.pdf">A Scalable Concurrent malloc(3) Implementation for FreeBSD</a>，这是一个可以并行处理的内存分配管理器。</li>
</ul>
<p>关于 C 的这些内存分配器，你可以参看 Wikipedia 的 “<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/C_dynamic_memory_allocation#Thread-caching_malloc_(tcmalloc)">C Dynamic Memory Allocation</a>”这个词条。</p>
<p>下面是几篇不错的文章，让你感觉一下上面那三种内存分配器的一些比较和工程实践。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://owent.net/2013/867.html">ptmalloc，tcmalloc 和 jemalloc 内存分配策略研究</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnhalo.net/2016/06/13/memory-optimize/">内存优化总结：ptmalloc、tcmalloc 和 jemalloc</a></li>
<li><a target="_blank" rel="noopener" href="https://www.facebook.com/notes/facebook-engineering/scalable-memory-allocation-using-jemalloc/480222803919">Scalable memory allocation using jemalloc</a></li>
<li><a target="_blank" rel="noopener" href="https://zapier.com/engineering/celery-python-jemalloc/">Decreasing RAM Usage by 40% Using jemalloc with Python &amp; Celery</a></li>
</ul>
<h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><h2 id="网络学习"><a href="#网络学习" class="headerlink" title="网络学习"></a>网络学习</h2><p>首先，推荐一本书——《<a target="_blank" rel="noopener" href="https://book.douban.com/subject/10510747/">计算机网络（第五版）</a>》，这本“计算机网络”和前面推荐的那本计算机网络不一样，前面那本偏扫盲，这本中有很多细节。这本书是国内外使用最广泛、最权威的计算机网络经典教材。全书按照网络协议模型自下而上（物理层、数据链路层、介质访问控制层、网络层、传输层和应用层）有系统地介绍了计算机网络的基本原理，并结合 Internet 给出了大量的协议实例。</p>
<p>这本书还与时俱进地引入了最新的网络技术，包括无线网络、3G 蜂窝网络、RFID 与传感器网络、内容分发与 P2P 网络、流媒体传输与 IP 语音，以及延迟容忍网络等。另外，本书针对当前网络应用中日益突出的安全问题，用了一整章的篇幅对计算机网络的安全性进行了深入讨论，而且把相关内容与最新网络技术结合起来阐述。这本书读起来并不枯燥，因为其占有很多小故事和小段子。</p>
<p>然后，有两个网上的教程和讲义也可以让人入门。</p>
<ul>
<li>渥汰华大学的一个课程讲议你也可以一看 <a target="_blank" rel="noopener" href="http://www.site.uottawa.ca/~shervin/courses/ceg4185/lectures/">Computer Network Design</a> 。</li>
<li>GeeksforGeeks 上也有一个简单的 <a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/computer-network-tutorials/">Computer Network Tutorials</a> 。</li>
</ul>
<h2 id="网络调优"><a href="#网络调优" class="headerlink" title="网络调优"></a>网络调优</h2><p>接下来，你可能需要一些非常实用的可以操作的技术，下面的几篇文章相信可以帮助到你。</p>
<ul>
<li>《Linux 的高级路由和流量控制 HowTo》（<a target="_blank" rel="noopener" href="http://lartc.org/">Linux Advanced Routing &amp; Traffic Control HOWTO</a> ），这是一个非常容易上手的关于 iproute2、流量整形和一点 netfilter 的指南。</li>
<li>关于网络调优，你可以看一下这个文档 <a target="_blank" rel="noopener" href="https://access.redhat.com/sites/default/files/attachments/20150325_network_performance_tuning.pdf">Red Hat Enterprise Linux Network Performance Tuning Guide</a>。</li>
<li>还有一些网络工具能够帮上你的大忙，这里有一个网络工具的 Awesome 列表 <a target="_blank" rel="noopener" href="https://github.com/caesar0301/awesome-pcaptools">Awesome Pcap Tools</a> ，其中罗列了各种网络工具，能够让你更从容地调试网络相关的程序。</li>
<li><a target="_blank" rel="noopener" href="https://netdevconf.org/1.2/papers/bbr-netdev-1.2.new.new.pdf">Making Linux TCP Fast</a> ，一篇非常不错的 TCP 调优的论文。</li>
<li>下面是在 PackageCloud 上的两篇关于 Linux 网络栈相关的底层文章，非常值得一读。<ul>
<li><a target="_blank" rel="noopener" href="https://blog.packagecloud.io/eng/2016/06/22/monitoring-tuning-linux-networking-stack-receiving-data/">Monitoring and Tuning the Linux Networking Stack: Receiving Data</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.packagecloud.io/eng/2017/02/06/monitoring-tuning-linux-networking-stack-sending-data/">Monitoring and Tuning the Linux Networking Stack: Sending Data</a></li>
</ul>
</li>
</ul>
<h2 id="网络协议"><a href="#网络协议" class="headerlink" title="网络协议"></a>网络协议</h2><p>接下来，想要学习网络协议最好的方式就是学习通讯相关的 RFC。所以，在这里会推荐一系列值得读的 RFC 给你。读 RFC 有几个好处，一方面可以学习技术，另一方面，你可以通过 RFC 学习到一个好的技术文档是怎么写的，还能看到各种解决问题的方案和思路。</p>
<p>对于第 2 层链路层，你可能需要了解一下 ARP：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc826">RFC 826 - An Ethernet Address Resolution Protocol</a></li>
</ul>
<p>以及 Tunnel 相关的协议：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc1853">RFC 1853 - IP in IP Tunneling</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2784">RFC 2784 - Generic Routing Encapsulation (GRE)</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2661">RFC 2661 - Layer Two Tunneling Protocol “L2TP”</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2637">RFC 2637 - Point-to-Point Tunneling Protocol (PPTP)</a></li>
</ul>
<p>对于第 4 层，你最需要了解的是 TCP/IP 了。和 TCP 相关的 RFC 相当多，这里给一系列经典的 RFC。这些 RFC 都引用在了在 CoolShell 上的《<a target="_blank" rel="noopener" href="https://coolshell.cn/articles/11564.html">TCP 的那些事儿（上）</a>》和《<a target="_blank" rel="noopener" href="https://coolshell.cn/articles/11609.html">TCP 的那些事儿（下）</a>》两篇文章中。如果你看不懂 RFC，你也可以去看上述的文章。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc793">RFC 793 - Transmission Control Protocol</a> - 最初的 TCP 标准定义，但不包括 TCP 相关细节。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc813">RFC 813 - Window and Acknowledgement Strategy in TCP</a> - TCP 窗口与确认策略，并讨论了在使用该机制时可能遇到的问题及解决方法。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc879">RFC 879 - The TCP Maximum Segment Size and Related Topics</a> - 讨论 MSS 参数对控制 TCP 分组大小的重要性，以及该参数与 IP 分段大小的关系等。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc896">RFC 896 - Congestion Control in IP/TCP Internetworks</a> - 讨论拥塞问题和 TCP 如何控制拥塞。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2581">RFC 2581 - TCP Congestion Control</a> - 描述用于拥塞控制的四种机制：慢启动、拥塞防御、快重传和快恢复。后面这个 RFC 被 <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc5681">RFC 5681</a> 所更新。还有 <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6582">RFC 6582 - The NewReno Modification to TCP’s Fast Recovery Algorithm</a> 中一个改进的快速恢复算法。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2018">RFC 2018 - TCP Selective Acknowledgment Options</a> - TCP 的选择确认。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2883">RFC 2883 - An Extension to the Selective Acknowledgement (SACK) Option for TCP</a> - 对于 RFC 2018 的改进。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2988">RFC 2988 - Computing TCP’s Retransmission Timer</a> - 讨论与 TCP 重传计时器设置相关的话题，重传计时器控制报文在重传前应等待多长时间。也就是经典的 TCP Karn/Partridge 重传算法。</li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6298">RFC 6298 - Computing TCP’s Retransmission Timer</a> - TCP Jacobson/Karels Algorithm 重传算法。</li>
</ul>
<p>个人觉得 TCP 最牛的不是不丢包，而是拥塞控制。对此，如果你感兴趣，可以读一下经典论文《<a target="_blank" rel="noopener" href="http://ee.lbl.gov/papers/congavoid.pdf">Congestion Avoidance and Control</a>》。</p>
<p>关于 Linux 下的 TCP 参数，你需要仔仔细细地读一下<a target="_blank" rel="noopener" href="http://man7.org/linux/man-pages/man7/tcp.7.html">TCP 的 man page</a> 。</p>
<p>对于第 7 层协议，HTTP 协议是重点要学习的。</p>
<p>首先推荐的是《<a target="_blank" rel="noopener" href="https://book.douban.com/subject/10746113/">HTTP 权威指南</a> 》，这本书有点厚，可以当参考书来看。这本书中没有提到 HTTP/2 的事，但是可以让你了解到 HTTP 协议的绝大多数特性。</p>
<p>HTTP 1.1 的原始 RFC 是 1999 年 6 月的 <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616">RFC 2616</a>，但其在 2014 后很快被下面这些 RFC 给取代了。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7230">RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7231">RFC 7231 - Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7232">RFC 7232 - Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7233">RFC 7233 - Hypertext Transfer Protocol (HTTP/1.1): Range Requests</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7234">RFC 7234 - Hypertext Transfer Protocol (HTTP/1.1): Caching</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7235">RFC 7235 - Hypertext Transfer Protocol (HTTP/1.1): Authentication</a></li>
</ul>
<p>关于<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/HTTP/2">HTTP/2</a>，这是 HTTP 的一个比较新的协议，它于 2015 年被批准通过，现在基本上所有的主流浏览器都默认启用这个协议。所以，你有必要学习一下这个协议。下面是相关的学习资源。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://legacy.gitbook.com/book/ye11ow/http2-explained/details">Gitbook - HTTP/2 详解</a></li>
<li><a target="_blank" rel="noopener" href="http://daniel.haxx.se/http2/">http2 explained</a>（<a target="_blank" rel="noopener" href="https://www.gitbook.com/book/ye11ow/http2-explained/details">中译版</a>）</li>
<li><a target="_blank" rel="noopener" href="https://cascadingmedia.com/insites/2015/03/http-2.html">HTTP/2 for a Faster Web</a></li>
<li><a target="_blank" rel="noopener" href="https://www.nginx.com/wp-content/uploads/2015/09/NGINX_HTTP2_White_Paper_v4.pdf">Nginx HTTP/2 白皮书</a></li>
<li>HTTP/2 的两个 RFC：<ul>
<li><a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7540.html">RFC 7540 - Hypertext Transfer Protocol Version 2 (HTTP/2)</a> ，HTTP/2 的协议本身</li>
<li><a target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7541.html">RFC 7541 - HPACK: Header Compression for HTTP/2</a> ，HTTP/2 的压缩算法</li>
</ul>
</li>
</ul>
<p>最后，你可以上 Wikipedia 的 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Internet_protocol_suite">Internet Protocol Suite</a> 上看看，这是一个很不错的网络协议的词条汇集地。顺着这些协议，你可以找到很多有用的东西。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        Share
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://yc-s.github.io/2020/02/22/linux%E7%B3%BB%E7%BB%9F-%E5%86%85%E5%AD%98%E5%92%8C%E7%BD%91%E7%BB%9C/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2020/02/23/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/" class="article-nav-link">
        <strong class="article-nav-caption">prev post</strong>
        <div class="article-nav-title">
          
            配置中心
          
        </div>
      </a>
    
    
      <a href="/2020/02/21/AWS-EC2/" class="article-nav-link">
        <strong class="article-nav-caption">next post</strong>
        <div class="article-nav-title">AWS_EC2</div>
      </a>
    
  </nav>

  
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2019-2021
        <i class="ri-heart-fill heart_icon"></i> Aaron
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">home</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">archives</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">categories</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">tags</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->


<script src="/js/clickBoom2.js"></script>


<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>